<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSON Viewer - Online JSON Formatter & Visualizer | Web Toolbox</title>

    <!-- SEO Meta Tags -->
    <meta name="description" content="Free online JSON viewer with formatting, syntax highlighting, tree view, node collapse/expand, and keyword search. Paste or upload JSON files. Pure frontend, data never uploaded to server.">
    <meta name="keywords" content="JSON viewer,JSON formatter,JSON beautifier,JSON editor,JSON validator,online JSON tool,JSON visualizer,free tool">
    <meta name="author" content="heyuan110">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://www.heyuan110.com/web-toolbox/json-viewer.html">

    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.heyuan110.com/web-toolbox/json-viewer.html">
    <meta property="og:title" content="JSON Viewer - Online JSON Formatter & Visualizer">
    <meta property="og:description" content="Free online JSON viewer with formatting, syntax highlighting, tree view, and keyword search. Pure frontend, data safe.">
    <meta property="og:image" content="https://www.heyuan110.com/web-toolbox/screenshots/json-viewer.png">
    <meta property="og:locale" content="en_US">
    <meta property="og:locale:alternate" content="zh_CN">
    <meta property="og:site_name" content="Web Toolbox">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="JSON Viewer - Online JSON Formatter & Visualizer">
    <meta name="twitter:description" content="Free online JSON viewer with formatting, syntax highlighting, tree view, and keyword search.">
    <meta name="twitter:image" content="https://www.heyuan110.com/web-toolbox/screenshots/json-viewer.png">

    <!-- JSON-LD -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "JSON Viewer",
        "url": "https://www.heyuan110.com/web-toolbox/json-viewer.html",
        "description": "Online JSON formatting, syntax highlighting, visualization tool",
        "applicationCategory": "DeveloperApplication",
        "operatingSystem": "Web Browser",
        "offers": {"@type": "Offer", "price": "0", "priceCurrency": "USD"},
        "author": {"@type": "Person", "name": "heyuan110"},
        "inLanguage": ["en", "zh-CN", "fr", "es"]
    }
    </script>

    <!-- FAQ JSON-LD -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "FAQPage",
        "mainEntity": [
            {
                "@type": "Question",
                "name": "What is JSON format?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "JSON (JavaScript Object Notation) is a lightweight data interchange format. It's easy for humans to read and write, and easy for machines to parse and generate. JSON is commonly used for data transmission between frontend and backend in web applications."
                }
            },
            {
                "@type": "Question",
                "name": "Why does my JSON parsing fail?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Common reasons for JSON parsing failure include: missing quotes (all keys and string values need double quotes), trailing commas (no comma after the last element), using single quotes (JSON standard only supports double quotes), missing or mismatched brackets, containing comments (standard JSON doesn't support comments)."
                }
            },
            {
                "@type": "Question",
                "name": "What is the maximum JSON data size supported?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "JSON data size depends on browser memory limits, recommended not to exceed 10MB. Large JSON data may cause browser lag or crash. For very large data, use professional desktop JSON editors or command line tools."
                }
            },
            {
                "@type": "Question",
                "name": "Can I edit JSON?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Yes. You can edit JSON data directly in the input box, then click the Format button to validate the syntax. The tool will automatically detect errors and indicate their location for quick troubleshooting."
                }
            },
            {
                "@type": "Question",
                "name": "Will JSON data be uploaded to the server?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "No. All JSON parsing and formatting operations are performed locally in your browser. Data is never uploaded to any server. You can safely process sensitive data with complete privacy protection."
                }
            }
        ]
    }
    </script>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #0d1117;
            --bg-secondary: #161b22;
            --bg-tertiary: #21262d;
            --border-color: #30363d;
            --text-primary: #e6edf3;
            --text-secondary: #8b949e;
            --accent: #58a6ff;
            --accent-hover: #79c0ff;
            --string-color: #a5d6ff;
            --number-color: #79c0ff;
            --boolean-color: #ff7b72;
            --null-color: #ffa657;
            --key-color: #7ee787;
            --bracket-color: #8b949e;
            --line-color: #30363d;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans', Helvetica, Arial, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            line-height: 1.5;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            padding: 30px 0;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 30px;
            position: relative;
        }

        header h1 {
            font-size: 32px;
            font-weight: 600;
            background: linear-gradient(135deg, #58a6ff, #a371f7, #ff7b72);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }

        header p {
            color: var(--text-secondary);
            font-size: 14px;
        }

        /* è¯­è¨€åˆ‡æ¢å™¨æ ·å¼ */
        .lang-switcher {
            position: absolute;
            top: 0;
            right: 0;
        }

        .lang-dropdown {
            position: relative;
            display: inline-block;
        }

        .lang-current {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.15);
            color: #e4e4e7;
            padding: 8px 14px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.2s ease;
        }

        .lang-current:hover {
            background: rgba(88, 166, 255, 0.2);
            border-color: rgba(88, 166, 255, 0.4);
        }

        .lang-current::after {
            content: 'â–¼';
            font-size: 0.6rem;
            opacity: 0.7;
            transition: transform 0.2s ease;
        }

        .lang-dropdown.open .lang-current::after {
            transform: rotate(180deg);
        }

        .lang-menu {
            position: absolute;
            top: calc(100% + 6px);
            right: 0;
            background: rgba(22, 27, 34, 0.98);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 8px;
            min-width: 140px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
            opacity: 0;
            visibility: hidden;
            transform: translateY(-8px);
            transition: all 0.2s ease;
            z-index: 100;
            overflow: hidden;
        }

        .lang-dropdown.open .lang-menu {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .lang-btn {
            display: block;
            width: 100%;
            background: transparent;
            border: none;
            color: #a1a1aa;
            padding: 10px 14px;
            cursor: pointer;
            font-size: 0.9rem;
            text-align: left;
            transition: all 0.15s ease;
        }

        .lang-btn:hover {
            background: rgba(88, 166, 255, 0.2);
            color: #e4e4e7;
        }

        .lang-btn.active {
            background: rgba(88, 166, 255, 0.3);
            color: #58a6ff;
        }

        .main-layout {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            min-height: calc(100vh - 200px);
        }

        .panel {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .panel-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 16px;
            background: var(--bg-tertiary);
            border-bottom: 1px solid var(--border-color);
        }

        .panel-title {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .panel-actions {
            display: flex;
            gap: 8px;
        }

        .btn {
            padding: 6px 12px;
            font-size: 12px;
            font-weight: 500;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 6px;
            background: var(--bg-tertiary);
            color: var(--text-primary);
        }

        .btn:hover {
            background: var(--border-color);
            border-color: var(--text-secondary);
        }

        .btn-primary {
            background: linear-gradient(135deg, #238636, #2ea043);
            border-color: #238636;
            color: white;
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, #2ea043, #3fb950);
        }

        .btn-accent {
            background: linear-gradient(135deg, #1f6feb, #388bfd);
            border-color: #1f6feb;
            color: white;
        }

        .btn-accent:hover {
            background: linear-gradient(135deg, #388bfd, #58a6ff);
        }

        .input-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        .drop-overlay {
            display: none;
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(88, 166, 255, 0.15);
            border: 3px dashed var(--accent);
            border-radius: 8px;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            gap: 10px;
            font-size: 16px;
            color: var(--accent);
            z-index: 10;
            pointer-events: none;
        }

        .drop-overlay.active {
            display: flex;
        }

        .drop-icon {
            font-size: 48px;
        }

        #jsonInput {
            flex: 1;
            width: 100%;
            padding: 16px;
            background: var(--bg-primary);
            border: none;
            color: var(--text-primary);
            font-family: 'SF Mono', 'Fira Code', 'Monaco', 'Menlo', monospace;
            font-size: 13px;
            line-height: 1.6;
            resize: none;
            outline: none;
        }

        #jsonInput::placeholder {
            color: var(--text-secondary);
        }

        .output-area {
            flex: 1;
            overflow: auto;
            padding: 16px;
            background: var(--bg-primary);
        }

        /* JSONæ ‘æ ·å¼ */
        .json-tree {
            font-family: 'SF Mono', 'Fira Code', 'Monaco', 'Menlo', monospace;
            font-size: 13px;
            line-height: 1.8;
        }

        .json-item {
            position: relative;
            padding-left: 24px;
        }

        .json-item::before {
            content: '';
            position: absolute;
            left: 8px;
            top: 0;
            bottom: 0;
            width: 1px;
            background: var(--line-color);
        }

        .json-item:last-child::before {
            bottom: 50%;
        }

        .json-item::after {
            content: '';
            position: absolute;
            left: 8px;
            top: 14px;
            width: 12px;
            height: 1px;
            background: var(--line-color);
        }

        .json-row {
            display: flex;
            align-items: flex-start;
            padding: 2px 0;
            border-radius: 4px;
            transition: background 0.15s;
        }

        .json-row:hover {
            background: rgba(88, 166, 255, 0.1);
        }

        .json-toggle {
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: var(--text-secondary);
            font-size: 10px;
            flex-shrink: 0;
            border-radius: 4px;
            margin-right: 4px;
            transition: all 0.2s;
            user-select: none;
        }

        .json-toggle:hover {
            background: var(--border-color);
            color: var(--text-primary);
        }

        .json-toggle.collapsed::before {
            content: 'â–¶';
        }

        .json-toggle.expanded::before {
            content: 'â–¼';
        }

        .json-toggle.hidden {
            visibility: hidden;
        }

        .json-key {
            color: var(--key-color);
            margin-right: 4px;
        }

        .json-colon {
            color: var(--text-secondary);
            margin-right: 8px;
        }

        .json-value {
            word-break: break-all;
        }

        .json-value.string {
            color: var(--string-color);
        }

        .json-value.string::before,
        .json-value.string::after {
            content: '"';
            color: var(--string-color);
            opacity: 0.7;
        }

        .json-value.number {
            color: var(--number-color);
        }

        .json-value.boolean {
            color: var(--boolean-color);
            font-weight: 600;
        }

        .json-value.null {
            color: var(--null-color);
            font-style: italic;
        }

        .json-bracket {
            color: var(--bracket-color);
            font-weight: 500;
        }

        .json-bracket.open {
            margin-left: 4px;
        }

        .json-children {
            margin-left: 0;
        }

        .json-children.collapsed {
            display: none;
        }

        .json-ellipsis {
            color: var(--text-secondary);
            cursor: pointer;
            padding: 0 4px;
            border-radius: 3px;
        }

        .json-ellipsis:hover {
            background: var(--border-color);
        }

        .json-preview {
            color: var(--text-secondary);
            font-size: 12px;
            margin-left: 8px;
            opacity: 0.7;
        }

        .json-comma {
            color: var(--text-secondary);
        }

        .json-size {
            color: var(--text-secondary);
            font-size: 11px;
            margin-left: 8px;
            background: var(--bg-tertiary);
            padding: 1px 6px;
            border-radius: 10px;
        }

        /* æœç´¢æ¡† */
        .search-box {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: var(--bg-tertiary);
            border-bottom: 1px solid var(--border-color);
        }

        .search-input {
            flex: 1;
            padding: 6px 10px;
            background: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            color: var(--text-primary);
            font-size: 13px;
            outline: none;
        }

        .search-input:focus {
            border-color: var(--accent);
        }

        .search-info {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .highlight {
            background: rgba(255, 200, 0, 0.3);
            border-radius: 2px;
            padding: 0 2px;
        }

        /* çŠ¶æ€æ¶ˆæ¯ */
        .message {
            padding: 40px;
            text-align: center;
            color: var(--text-secondary);
        }

        .message.error {
            color: #ff7b72;
        }

        .message-icon {
            font-size: 48px;
            margin-bottom: 16px;
        }

        /* å·¥å…·æ  */
        .toolbar {
            display: flex;
            gap: 8px;
            padding: 12px 16px;
            background: var(--bg-tertiary);
            border-top: 1px solid var(--border-color);
            flex-wrap: wrap;
        }

        .toolbar-group {
            display: flex;
            gap: 4px;
            padding-right: 12px;
            border-right: 1px solid var(--border-color);
        }

        .toolbar-group:last-child {
            border-right: none;
        }

        /* ç»Ÿè®¡ä¿¡æ¯ */
        .stats {
            display: flex;
            gap: 16px;
            padding: 8px 16px;
            background: var(--bg-tertiary);
            border-top: 1px solid var(--border-color);
            font-size: 12px;
            color: var(--text-secondary);
        }

        .stat-item {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .stat-value {
            color: var(--accent);
            font-weight: 600;
        }

        /* è·¯å¾„æ˜¾ç¤º */
        .path-bar {
            padding: 8px 16px;
            background: var(--bg-tertiary);
            border-bottom: 1px solid var(--border-color);
            font-family: 'SF Mono', monospace;
            font-size: 12px;
            color: var(--text-secondary);
            white-space: nowrap;
            overflow-x: auto;
        }

        .path-segment {
            color: var(--accent);
            cursor: pointer;
        }

        .path-segment:hover {
            text-decoration: underline;
        }

        /* Toasté€šçŸ¥ */
        .toast {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 14px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.4);
            transition: transform 0.3s ease;
            z-index: 1000;
        }

        .toast.show {
            transform: translateX(-50%) translateY(0);
        }

        .toast.success {
            border-color: #238636;
            color: #3fb950;
        }

        /* æ·±åº¦æŒ‡ç¤ºå™¨ */
        .depth-indicator {
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 3px;
            border-radius: 2px;
        }

        .depth-0 .depth-indicator { background: #ff7b72; }
        .depth-1 .depth-indicator { background: #ffa657; }
        .depth-2 .depth-indicator { background: #d2a8ff; }
        .depth-3 .depth-indicator { background: #79c0ff; }
        .depth-4 .depth-indicator { background: #7ee787; }
        .depth-5 .depth-indicator { background: #ff7b72; }

        /* å“åº”å¼ */
        @media (max-width: 1024px) {
            .main-layout {
                grid-template-columns: 1fr;
            }

            .panel {
                min-height: 400px;
            }
        }

        /* æ»šåŠ¨æ¡ */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-primary);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--border-color);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--text-secondary);
        }

        /* å¤åˆ¶æŒ‰é’® */
        .copy-btn {
            opacity: 0;
            padding: 2px 6px;
            font-size: 10px;
            margin-left: 8px;
            transition: opacity 0.2s;
        }

        .json-row:hover .copy-btn {
            opacity: 1;
        }

        /* åŠ¨ç”» */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .json-tree > .json-node {
            animation: fadeIn 0.3s ease;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <!-- è¯­è¨€åˆ‡æ¢å™¨ -->
            <div class="lang-switcher" id="langSwitcher">
                <div class="lang-dropdown" id="langDropdown">
                    <div class="lang-current" id="langCurrent">ğŸŒ English</div>
                    <div class="lang-menu">
                        <button class="lang-btn" data-lang="en">ğŸ‡ºğŸ‡¸ English</button>
                        <button class="lang-btn" data-lang="zh-CN">ğŸ‡¨ğŸ‡³ ä¸­æ–‡</button>
                        <button class="lang-btn" data-lang="fr">ğŸ‡«ğŸ‡· FranÃ§ais</button>
                        <button class="lang-btn" data-lang="es">ğŸ‡ªğŸ‡¸ EspaÃ±ol</button>
                    </div>
                </div>
            </div>
            <a href="index.html" class="back-link" style="display: inline-block; margin-bottom: 16px; color: #8b949e; text-decoration: none; font-size: 14px; transition: color 0.2s;" data-i18n="backToToolbox">â† Back to Toolbox</a>
            <h1 data-i18n="pageTitle">{ } JSON Viewer</h1>
            <p data-i18n="pageSubtitle">Paste JSON data and instantly get a beautiful, interactive tree view</p>
        </header>

        <!-- åŠŸèƒ½ç‰¹ç‚¹ -->
        <section class="features-section" style="margin-bottom: 30px; padding: 24px; background: linear-gradient(135deg, rgba(88, 166, 255, 0.1), rgba(163, 113, 247, 0.1)); border: 1px solid #30363d; border-radius: 12px;">
            <h2 style="color: #e6edf3; font-size: 18px; margin-bottom: 20px; text-align: center;" data-i18n="featuresTitle">Features</h2>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 20px;">
                <div style="display: flex; align-items: flex-start; gap: 12px;">
                    <span style="font-size: 28px; flex-shrink: 0;">ğŸ¨</span>
                    <div>
                        <h3 style="color: #58a6ff; font-size: 15px; font-weight: 600; margin-bottom: 6px;" data-i18n="feature1Title">Formatted Display</h3>
                        <p style="color: #8b949e; font-size: 13px; line-height: 1.5;" data-i18n="feature1Desc">Auto-format JSON with syntax highlighting for clear data structure visualization</p>
                    </div>
                </div>
                <div style="display: flex; align-items: flex-start; gap: 12px;">
                    <span style="font-size: 28px; flex-shrink: 0;">ğŸŒ³</span>
                    <div>
                        <h3 style="color: #58a6ff; font-size: 15px; font-weight: 600; margin-bottom: 6px;" data-i18n="feature2Title">Tree View</h3>
                        <p style="color: #8b949e; font-size: 13px; line-height: 1.5;" data-i18n="feature2Desc">Collapsible tree structure clearly displays data hierarchy with quick navigation</p>
                    </div>
                </div>
                <div style="display: flex; align-items: flex-start; gap: 12px;">
                    <span style="font-size: 28px; flex-shrink: 0;">âš ï¸</span>
                    <div>
                        <h3 style="color: #58a6ff; font-size: 15px; font-weight: 600; margin-bottom: 6px;" data-i18n="feature3Title">Error Detection</h3>
                        <p style="color: #8b949e; font-size: 13px; line-height: 1.5;" data-i18n="feature3Desc">Automatically detect JSON syntax errors and indicate specific location for quick fixes</p>
                    </div>
                </div>
                <div style="display: flex; align-items: flex-start; gap: 12px;">
                    <span style="font-size: 28px; flex-shrink: 0;">ğŸ“‹</span>
                    <div>
                        <h3 style="color: #58a6ff; font-size: 15px; font-weight: 600; margin-bottom: 6px;" data-i18n="feature4Title">One-Click Copy</h3>
                        <p style="color: #8b949e; font-size: 13px; line-height: 1.5;" data-i18n="feature4Desc">Copy formatted JSON to clipboard with one click for quick use</p>
                    </div>
                </div>
            </div>
        </section>

        <div class="main-layout">
            <!-- è¾“å…¥é¢æ¿ -->
            <div class="panel">
                <div class="panel-header">
                    <span class="panel-title">ğŸ“ <span data-i18n="inputPanelTitle">Input JSON</span></span>
                    <div class="panel-actions">
                        <button class="btn" onclick="openFile()">ğŸ“‚ <span data-i18n="btnOpen">Open</span></button>
                        <button class="btn" onclick="loadSample()">ğŸ“‹ <span data-i18n="btnSample">Sample</span></button>
                        <button class="btn" onclick="clearInput()">ğŸ—‘ï¸ <span data-i18n="btnClear">Clear</span></button>
                        <button class="btn btn-primary" onclick="formatAndParse()">âœ¨ <span data-i18n="btnFormat">Format</span></button>
                    </div>
                </div>
                <input type="file" id="fileInput" accept=".json,.txt" style="display: none;">
                <div class="input-area" id="inputAreaWrapper">
                    <textarea id="jsonInput" data-i18n-placeholder="inputPlaceholder" placeholder='Paste JSON data here, or drag and drop a JSON file

Example:
{
  "name": "John",
  "age": 28,
  "skills": ["JavaScript", "Python", "Go"]
}'></textarea>
                    <div class="drop-overlay" id="dropOverlay">
                        <div class="drop-icon">ğŸ“„</div>
                        <div data-i18n="dropHint">Release to load JSON file</div>
                    </div>
                </div>
                <div class="toolbar">
                    <div class="toolbar-group">
                        <button class="btn" onclick="minifyJSON()">ğŸ—œï¸ <span data-i18n="btnMinify">Minify</span></button>
                        <button class="btn" onclick="beautifyJSON()">ğŸ¨ <span data-i18n="btnBeautify">Beautify</span></button>
                    </div>
                    <div class="toolbar-group">
                        <button class="btn" onclick="copyInput()">ğŸ“‹ <span data-i18n="btnCopy">Copy</span></button>
                        <button class="btn" onclick="downloadJSON()">ğŸ’¾ <span data-i18n="btnDownload">Download</span></button>
                    </div>
                    <div class="toolbar-group">
                        <button class="btn" onclick="escapeJSON()">ğŸ”’ <span data-i18n="btnEscape">Escape</span></button>
                        <button class="btn" onclick="unescapeJSON()">ğŸ”“ <span data-i18n="btnUnescape">Unescape</span></button>
                    </div>
                </div>
            </div>

            <!-- è¾“å‡ºé¢æ¿ -->
            <div class="panel">
                <div class="panel-header">
                    <span class="panel-title">ğŸŒ³ <span data-i18n="outputPanelTitle">Tree View</span></span>
                    <div class="panel-actions">
                        <button class="btn" onclick="expandAll()">ğŸ“‚ <span data-i18n="btnExpandAll">Expand All</span></button>
                        <button class="btn" onclick="collapseAll()">ğŸ“ <span data-i18n="btnCollapseAll">Collapse All</span></button>
                        <button class="btn btn-accent" onclick="copyFormatted()">ğŸ“‹ <span data-i18n="btnCopy">Copy</span></button>
                    </div>
                </div>
                <div class="search-box">
                    <input type="text" class="search-input" id="searchInput" data-i18n-placeholder="searchPlaceholder" placeholder="ğŸ” Search keys or values..." oninput="handleSearch()">
                    <span class="search-info" id="searchInfo"></span>
                </div>
                <div id="pathBar" class="path-bar" style="display: none;">
                    <span data-i18n="pathLabel">Path:</span> <span id="pathContent">$</span>
                </div>
                <div class="output-area" id="outputArea">
                    <div class="message">
                        <div class="message-icon">ğŸ“„</div>
                        <div data-i18n="emptyMessage">Enter JSON data on the left and click "Format"</div>
                    </div>
                </div>
                <div class="stats" id="statsBar" style="display: none;">
                    <span class="stat-item"><span data-i18n="statObjects">Objects</span>: <span class="stat-value" id="statObjects">0</span></span>
                    <span class="stat-item"><span data-i18n="statArrays">Arrays</span>: <span class="stat-value" id="statArrays">0</span></span>
                    <span class="stat-item"><span data-i18n="statStrings">Strings</span>: <span class="stat-value" id="statStrings">0</span></span>
                    <span class="stat-item"><span data-i18n="statNumbers">Numbers</span>: <span class="stat-value" id="statNumbers">0</span></span>
                    <span class="stat-item"><span data-i18n="statBooleans">Booleans</span>: <span class="stat-value" id="statBooleans">0</span></span>
                    <span class="stat-item">Null: <span class="stat-value" id="statNulls">0</span></span>
                    <span class="stat-item"><span data-i18n="statDepth">Depth</span>: <span class="stat-value" id="statDepth">0</span></span>
                </div>
            </div>
        </div>
    </div>

    <div class="toast" id="toast"></div>

    <script>
        let parsedData = null;
        let stats = { objects: 0, arrays: 0, strings: 0, numbers: 0, booleans: 0, nulls: 0, maxDepth: 0 };

        // å¤šè¯­è¨€ç¿»è¯‘æ•°æ®
        const translations = {
            'en': {
                backToToolbox: 'â† Back to Toolbox',
                pageTitle: '{ } JSON Viewer',
                pageSubtitle: 'Paste JSON data and instantly get a beautiful, interactive tree view',
                featuresTitle: 'Features',
                feature1Title: 'Formatted Display',
                feature1Desc: 'Auto-format JSON with syntax highlighting for clear data structure visualization',
                feature2Title: 'Tree View',
                feature2Desc: 'Collapsible tree structure clearly displays data hierarchy with quick navigation',
                feature3Title: 'Error Detection',
                feature3Desc: 'Automatically detect JSON syntax errors and indicate specific location for quick fixes',
                feature4Title: 'One-Click Copy',
                feature4Desc: 'Copy formatted JSON to clipboard with one click for quick use',
                inputPanelTitle: 'Input JSON',
                outputPanelTitle: 'Tree View',
                btnOpen: 'Open',
                btnSample: 'Sample',
                btnClear: 'Clear',
                btnFormat: 'Format',
                btnMinify: 'Minify',
                btnBeautify: 'Beautify',
                btnCopy: 'Copy',
                btnDownload: 'Download',
                btnEscape: 'Escape',
                btnUnescape: 'Unescape',
                btnExpandAll: 'Expand All',
                btnCollapseAll: 'Collapse All',
                inputPlaceholder: 'Paste JSON data here, or drag and drop a JSON file\n\nExample:\n{\n  "name": "John",\n  "age": 28,\n  "skills": ["JavaScript", "Python", "Go"]\n}',
                searchPlaceholder: 'ğŸ” Search keys or values...',
                dropHint: 'Release to load JSON file',
                pathLabel: 'Path:',
                emptyMessage: 'Enter JSON data on the left and click "Format"',
                pleaseInputJson: 'Please enter JSON data',
                statObjects: 'Objects',
                statArrays: 'Arrays',
                statStrings: 'Strings',
                statNumbers: 'Numbers',
                statBooleans: 'Booleans',
                statDepth: 'Depth',
                items: 'items',
                elements: 'elements',
                copyPath: 'Copy Path',
                copyValue: 'Copy',
                foundMatches: 'Found {count} matches',
                noMatches: 'No matches',
                parseSuccess: 'âœ“ JSON parsed successfully',
                parseSuccessWithFix: 'âœ“ Parse success (auto-removed comments and trailing commas)',
                parseError: 'JSON Parse Error',
                jsonMinified: 'âœ“ JSON minified',
                jsonBeautified: 'âœ“ JSON beautified',
                invalidJson: 'âŒ Invalid JSON',
                escaped: 'âœ“ Escaped',
                unescaped: 'âœ“ Unescaped',
                unescapeFailed: 'âŒ Unescape failed',
                copiedToClipboard: 'âœ“ Copied to clipboard',
                copiedFormattedJson: 'âœ“ Formatted JSON copied',
                pathCopied: 'âœ“ Path copied: ',
                valueCopied: 'âœ“ Value copied',
                fileLoaded: 'âœ“ File loaded: ',
                fileLoadFailed: 'âŒ File load failed',
                faqTitle: 'FAQ',
                faq1Q: 'What is JSON format?',
                faq1A: 'JSON (JavaScript Object Notation) is a lightweight data interchange format. It\'s easy for humans to read and write, and easy for machines to parse and generate. JSON is commonly used for data transmission between frontend and backend in web applications and is one of the most common formats for modern APIs.',
                faq2Q: 'Why does my JSON parsing fail?',
                faq2A: 'Common reasons for JSON parsing failure include:',
                faq2List1: 'Missing quotes: All keys and string values need double quotes',
                faq2List2: 'Trailing commas: No comma after the last element',
                faq2List3: 'Using single quotes: JSON standard only supports double quotes',
                faq2List4: 'Missing or mismatched brackets',
                faq2List5: 'Containing comments: Standard JSON doesn\'t support comments (this tool auto-removes them)',
                faq3Q: 'What is the maximum JSON data size supported?',
                faq3A: 'JSON data size depends on browser memory limits, recommended not to exceed 10MB. Large JSON data may cause browser lag or crash. For very large data, use professional desktop JSON editors or command line tools (like jq).',
                faq4Q: 'Can I edit JSON?',
                faq4A: 'Yes. You can edit JSON data directly in the input box, then click the "Format" button to validate the syntax. The tool will automatically detect errors and indicate their location for quick troubleshooting.',
                faq5Q: 'Will JSON data be uploaded to the server?',
                faq5A: 'No. All JSON parsing and formatting operations are performed locally in your browser. Data is never uploaded to any server. You can safely process sensitive data with complete privacy protection.',
                relatedTools: 'ğŸ”— Related Tools',
                relatedSqlite: 'SQLite Viewer',
                relatedSqliteDesc: 'Browse SQLite databases online',
                relatedCrypto: 'Crypto Toolkit',
                relatedCryptoDesc: 'Base64/MD5/AES encoding & encryption',
                relatedRegex: 'Regex Tester',
                relatedRegexDesc: 'Online regex matching & debugging',
                relatedTimestamp: 'Timestamp Converter',
                relatedTimestampDesc: 'Unix timestamp & date conversion',
                footerPrivacy: 'Pure frontend processing, data never uploaded to server',
                footerBack: 'â† Back to Web Toolbox'
            },
            'zh-CN': {
                backToToolbox: 'â† è¿”å›å·¥å…·ç®±',
                pageTitle: '{ } JSON æŸ¥çœ‹å™¨',
                pageSubtitle: 'ç²˜è´´ JSON æ•°æ®ï¼Œå³åˆ»è·å¾—ç¾è§‚ã€å¯äº¤äº’çš„æ ‘å½¢è§†å›¾',
                featuresTitle: 'åŠŸèƒ½ç‰¹ç‚¹',
                feature1Title: 'æ ¼å¼åŒ–æ˜¾ç¤º',
                feature1Desc: 'è‡ªåŠ¨æ ¼å¼åŒ– JSONï¼Œæ”¯æŒè¯­æ³•é«˜äº®æ˜¾ç¤ºï¼Œè®©æ•°æ®ç»“æ„ä¸€ç›®äº†ç„¶',
                feature2Title: 'æ ‘å½¢è§†å›¾',
                feature2Desc: 'å¯æŠ˜å çš„æ ‘å½¢ç»“æ„ï¼Œæ¸…æ™°å±•ç¤ºæ•°æ®å±‚çº§ï¼Œæ”¯æŒå¿«é€Ÿå¯¼èˆª',
                feature3Title: 'é”™è¯¯æ£€æµ‹',
                feature3Desc: 'è‡ªåŠ¨æ£€æµ‹ JSON è¯­æ³•é”™è¯¯å¹¶æç¤ºå…·ä½“ä½ç½®ï¼Œå¿«é€Ÿå®šä½é—®é¢˜',
                feature4Title: 'ä¸€é”®å¤åˆ¶',
                feature4Desc: 'æ ¼å¼åŒ–åçš„ JSON ä¸€é”®å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼Œæ–¹ä¾¿å¿«é€Ÿä½¿ç”¨',
                inputPanelTitle: 'è¾“å…¥ JSON',
                outputPanelTitle: 'æ ‘å½¢è§†å›¾',
                btnOpen: 'æ‰“å¼€',
                btnSample: 'ç¤ºä¾‹',
                btnClear: 'æ¸…ç©º',
                btnFormat: 'æ ¼å¼åŒ–',
                btnMinify: 'å‹ç¼©',
                btnBeautify: 'ç¾åŒ–',
                btnCopy: 'å¤åˆ¶',
                btnDownload: 'ä¸‹è½½',
                btnEscape: 'è½¬ä¹‰',
                btnUnescape: 'åè½¬ä¹‰',
                btnExpandAll: 'å…¨éƒ¨å±•å¼€',
                btnCollapseAll: 'å…¨éƒ¨æ”¶èµ·',
                inputPlaceholder: 'åœ¨æ­¤ç²˜è´´ JSON æ•°æ®ï¼Œæˆ–æ‹–æ”¾ JSON æ–‡ä»¶åˆ°æ­¤å¤„\n\nç¤ºä¾‹ï¼š\n{\n  "name": "å¼ ä¸‰",\n  "age": 28,\n  "skills": ["JavaScript", "Python", "Go"]\n}',
                searchPlaceholder: 'ğŸ” æœç´¢é”®åæˆ–å€¼...',
                dropHint: 'é‡Šæ”¾æ–‡ä»¶ä»¥åŠ è½½ JSON',
                pathLabel: 'è·¯å¾„:',
                emptyMessage: 'åœ¨å·¦ä¾§è¾“å…¥ JSON æ•°æ®åç‚¹å‡»ã€Œæ ¼å¼åŒ–ã€',
                pleaseInputJson: 'è¯·è¾“å…¥ JSON æ•°æ®',
                statObjects: 'å¯¹è±¡',
                statArrays: 'æ•°ç»„',
                statStrings: 'å­—ç¬¦ä¸²',
                statNumbers: 'æ•°å­—',
                statBooleans: 'å¸ƒå°”',
                statDepth: 'æ·±åº¦',
                items: 'é¡¹',
                elements: 'ä¸ªå…ƒç´ ',
                copyPath: 'å¤åˆ¶è·¯å¾„',
                copyValue: 'å¤åˆ¶',
                foundMatches: 'æ‰¾åˆ° {count} ä¸ªåŒ¹é…',
                noMatches: 'æ— åŒ¹é…',
                parseSuccess: 'âœ“ JSON è§£ææˆåŠŸ',
                parseSuccessWithFix: 'âœ“ è§£ææˆåŠŸï¼ˆå·²è‡ªåŠ¨ç§»é™¤æ³¨é‡Šå’Œå°¾é€—å·ï¼‰',
                parseError: 'JSON è§£æé”™è¯¯',
                jsonMinified: 'âœ“ JSON å·²å‹ç¼©',
                jsonBeautified: 'âœ“ JSON å·²ç¾åŒ–',
                invalidJson: 'âŒ æ— æ•ˆçš„ JSON',
                escaped: 'âœ“ å·²è½¬ä¹‰',
                unescaped: 'âœ“ å·²åè½¬ä¹‰',
                unescapeFailed: 'âŒ åè½¬ä¹‰å¤±è´¥',
                copiedToClipboard: 'âœ“ å·²å¤åˆ¶åˆ°å‰ªè´´æ¿',
                copiedFormattedJson: 'âœ“ å·²å¤åˆ¶æ ¼å¼åŒ–JSON',
                pathCopied: 'âœ“ è·¯å¾„å·²å¤åˆ¶: ',
                valueCopied: 'âœ“ å€¼å·²å¤åˆ¶',
                fileLoaded: 'âœ“ å·²åŠ è½½æ–‡ä»¶: ',
                fileLoadFailed: 'âŒ æ–‡ä»¶è¯»å–å¤±è´¥',
                faqTitle: 'å¸¸è§é—®é¢˜',
                faq1Q: 'ä»€ä¹ˆæ˜¯ JSON æ ¼å¼ï¼Ÿ',
                faq1A: 'JSON æ˜¯ JavaScript Object Notation çš„ç¼©å†™ï¼Œæ˜¯ä¸€ç§è½»é‡çº§çš„æ•°æ®äº¤æ¢æ ¼å¼ã€‚å®ƒåŸºäº JavaScript è¯­è¨€çš„ä¸€ä¸ªå­é›†ï¼Œæ˜“äºäººé˜…è¯»å’Œç¼–å†™ï¼ŒåŒæ—¶ä¹Ÿæ˜“äºæœºå™¨è§£æå’Œç”Ÿæˆã€‚JSON æ ¼å¼å¸¸ç”¨äº Web åº”ç”¨ç¨‹åºä¸­å‰åç«¯æ•°æ®ä¼ è¾“ï¼Œæ˜¯ç°ä»£ API æœ€å¸¸ç”¨çš„æ•°æ®æ ¼å¼ä¹‹ä¸€ã€‚',
                faq2Q: 'ä¸ºä»€ä¹ˆæˆ‘çš„ JSON è§£æå¤±è´¥ï¼Ÿ',
                faq2A: 'JSON è§£æå¤±è´¥çš„å¸¸è§åŸå› åŒ…æ‹¬ï¼š',
                faq2List1: 'ç¼ºå°‘å¼•å·ï¼šæ‰€æœ‰é”®åå’Œå­—ç¬¦ä¸²å€¼éƒ½éœ€è¦ä½¿ç”¨åŒå¼•å·',
                faq2List2: 'å¤šä½™çš„é€—å·ï¼šæœ€åä¸€ä¸ªå…ƒç´ åä¸èƒ½æœ‰é€—å·',
                faq2List3: 'ä½¿ç”¨äº†å•å¼•å·ï¼šJSON æ ‡å‡†åªæ”¯æŒåŒå¼•å·',
                faq2List4: 'ç¼ºå°‘æ‹¬å·æˆ–æ‹¬å·ä¸åŒ¹é…',
                faq2List5: 'åŒ…å«æ³¨é‡Šï¼šæ ‡å‡† JSON ä¸æ”¯æŒæ³¨é‡Šï¼ˆæœ¬å·¥å…·å·²æ”¯æŒè‡ªåŠ¨ç§»é™¤ï¼‰',
                faq3Q: 'æ”¯æŒå¤šå¤§çš„ JSON æ•°æ®ï¼Ÿ',
                faq3A: 'JSON æ•°æ®å¤§å°å–å†³äºæµè§ˆå™¨å†…å­˜é™åˆ¶ï¼Œå»ºè®®ä¸è¶…è¿‡ 10MBã€‚è¿‡å¤§çš„ JSON æ•°æ®å¯èƒ½å¯¼è‡´æµè§ˆå™¨å¡é¡¿æˆ–å´©æºƒã€‚å¯¹äºè¶…å¤§æ•°æ®ï¼Œå»ºè®®ä½¿ç”¨ä¸“ä¸šçš„æ¡Œé¢ JSON ç¼–è¾‘å™¨æˆ–å‘½ä»¤è¡Œå·¥å…·ï¼ˆå¦‚ jqï¼‰å¤„ç†ã€‚',
                faq4Q: 'å¯ä»¥ç¼–è¾‘ JSON å—ï¼Ÿ',
                faq4A: 'å¯ä»¥ã€‚æ‚¨å¯ä»¥ç›´æ¥åœ¨è¾“å…¥æ¡†ä¸­ç¼–è¾‘ JSON æ•°æ®ï¼Œä¿®æ”¹åç‚¹å‡»ã€Œæ ¼å¼åŒ–ã€æŒ‰é’®å³å¯éªŒè¯è¯­æ³•æ˜¯å¦æ­£ç¡®ã€‚å·¥å…·ä¼šè‡ªåŠ¨æ£€æµ‹é”™è¯¯å¹¶æç¤ºå…·ä½“ä½ç½®ï¼Œæ–¹ä¾¿æ‚¨å¿«é€Ÿå®šä½å’Œä¿®å¤é—®é¢˜ã€‚',
                faq5Q: 'JSON æ•°æ®ä¼šä¸Šä¼ åˆ°æœåŠ¡å™¨å—ï¼Ÿ',
                faq5A: 'ä¸ä¼šã€‚æ‰€æœ‰ JSON è§£æå’Œæ ¼å¼åŒ–æ“ä½œéƒ½åœ¨æ‚¨çš„æœ¬åœ°æµè§ˆå™¨ä¸­å®Œæˆï¼Œæ•°æ®ä¸ä¼šä¸Šä¼ åˆ°ä»»ä½•æœåŠ¡å™¨ã€‚æ‚¨å¯ä»¥æ”¾å¿ƒå¤„ç†æ•æ„Ÿæ•°æ®ï¼Œå®Œå…¨ä¿æŠ¤æ‚¨çš„éšç§å®‰å…¨ã€‚',
                relatedTools: 'ğŸ”— ç›¸å…³å·¥å…·æ¨è',
                relatedSqlite: 'SQLite æŸ¥çœ‹å™¨',
                relatedSqliteDesc: 'åœ¨çº¿æµè§ˆ SQLite æ•°æ®åº“',
                relatedCrypto: 'åŠ è§£å¯†å·¥å…·ç®±',
                relatedCryptoDesc: 'Base64/MD5/AES ç­‰ç¼–ç åŠ å¯†',
                relatedRegex: 'æ­£åˆ™è¡¨è¾¾å¼æµ‹è¯•',
                relatedRegexDesc: 'åœ¨çº¿æ­£åˆ™åŒ¹é…ä¸è°ƒè¯•',
                relatedTimestamp: 'æ—¶é—´æˆ³è½¬æ¢',
                relatedTimestampDesc: 'Unix æ—¶é—´æˆ³ä¸æ—¥æœŸäº’è½¬',
                footerPrivacy: 'çº¯å‰ç«¯å¤„ç†ï¼Œæ•°æ®ä¸ä¼šä¸Šä¼ åˆ°æœåŠ¡å™¨',
                footerBack: 'â† è¿”å› Web Toolbox é¦–é¡µ'
            },
            'fr': {
                backToToolbox: 'â† Retour Ã  la boÃ®te Ã  outils',
                pageTitle: '{ } Visionneur JSON',
                pageSubtitle: 'Collez des donnÃ©es JSON et obtenez instantanÃ©ment une vue arborescente interactive',
                featuresTitle: 'FonctionnalitÃ©s',
                feature1Title: 'Affichage formatÃ©',
                feature1Desc: 'Formatage automatique du JSON avec coloration syntaxique pour une visualisation claire',
                feature2Title: 'Vue arborescente',
                feature2Desc: 'Structure arborescente pliable affichant clairement la hiÃ©rarchie des donnÃ©es',
                feature3Title: 'DÃ©tection d\'erreurs',
                feature3Desc: 'DÃ©tection automatique des erreurs de syntaxe JSON avec indication de l\'emplacement',
                feature4Title: 'Copie en un clic',
                feature4Desc: 'Copiez le JSON formatÃ© dans le presse-papiers en un clic',
                inputPanelTitle: 'EntrÃ©e JSON',
                outputPanelTitle: 'Vue arborescente',
                btnOpen: 'Ouvrir',
                btnSample: 'Exemple',
                btnClear: 'Effacer',
                btnFormat: 'Formater',
                btnMinify: 'Minifier',
                btnBeautify: 'Embellir',
                btnCopy: 'Copier',
                btnDownload: 'TÃ©lÃ©charger',
                btnEscape: 'Ã‰chapper',
                btnUnescape: 'DÃ©sechapper',
                btnExpandAll: 'Tout dÃ©plier',
                btnCollapseAll: 'Tout replier',
                inputPlaceholder: 'Collez des donnÃ©es JSON ici, ou glissez-dÃ©posez un fichier JSON\n\nExemple:\n{\n  "nom": "Jean",\n  "age": 28,\n  "competences": ["JavaScript", "Python", "Go"]\n}',
                searchPlaceholder: 'ğŸ” Rechercher clÃ©s ou valeurs...',
                dropHint: 'RelÃ¢chez pour charger le fichier JSON',
                pathLabel: 'Chemin:',
                emptyMessage: 'Entrez des donnÃ©es JSON Ã  gauche et cliquez sur "Formater"',
                pleaseInputJson: 'Veuillez entrer des donnÃ©es JSON',
                statObjects: 'Objets',
                statArrays: 'Tableaux',
                statStrings: 'ChaÃ®nes',
                statNumbers: 'Nombres',
                statBooleans: 'BoolÃ©ens',
                statDepth: 'Profondeur',
                items: 'Ã©lÃ©ments',
                elements: 'Ã©lÃ©ments',
                copyPath: 'Copier le chemin',
                copyValue: 'Copier',
                foundMatches: 'TrouvÃ© {count} correspondances',
                noMatches: 'Aucune correspondance',
                parseSuccess: 'âœ“ JSON analysÃ© avec succÃ¨s',
                parseSuccessWithFix: 'âœ“ Analyse rÃ©ussie (commentaires et virgules supprimÃ©s)',
                parseError: 'Erreur d\'analyse JSON',
                jsonMinified: 'âœ“ JSON minifiÃ©',
                jsonBeautified: 'âœ“ JSON embelli',
                invalidJson: 'âŒ JSON invalide',
                escaped: 'âœ“ Ã‰chappÃ©',
                unescaped: 'âœ“ DÃ©sechappÃ©',
                unescapeFailed: 'âŒ Ã‰chec du dÃ©sechappement',
                copiedToClipboard: 'âœ“ CopiÃ© dans le presse-papiers',
                copiedFormattedJson: 'âœ“ JSON formatÃ© copiÃ©',
                pathCopied: 'âœ“ Chemin copiÃ©: ',
                valueCopied: 'âœ“ Valeur copiÃ©e',
                fileLoaded: 'âœ“ Fichier chargÃ©: ',
                fileLoadFailed: 'âŒ Ã‰chec du chargement du fichier',
                faqTitle: 'FAQ',
                faq1Q: 'Qu\'est-ce que le format JSON?',
                faq1A: 'JSON (JavaScript Object Notation) est un format d\'Ã©change de donnÃ©es lÃ©ger. Il est facile Ã  lire et Ã  Ã©crire pour les humains, et facile Ã  analyser et gÃ©nÃ©rer pour les machines. JSON est couramment utilisÃ© pour la transmission de donnÃ©es entre le frontend et le backend dans les applications web.',
                faq2Q: 'Pourquoi mon analyse JSON Ã©choue-t-elle?',
                faq2A: 'Raisons courantes d\'Ã©chec d\'analyse JSON:',
                faq2List1: 'Guillemets manquants: Toutes les clÃ©s et valeurs de chaÃ®ne ont besoin de guillemets doubles',
                faq2List2: 'Virgules de fin: Pas de virgule aprÃ¨s le dernier Ã©lÃ©ment',
                faq2List3: 'Utilisation de guillemets simples: Le standard JSON ne supporte que les guillemets doubles',
                faq2List4: 'Crochets manquants ou mal appariÃ©s',
                faq2List5: 'Contient des commentaires: Le JSON standard ne supporte pas les commentaires (cet outil les supprime automatiquement)',
                faq3Q: 'Quelle taille maximale de donnÃ©es JSON est supportÃ©e?',
                faq3A: 'La taille des donnÃ©es JSON dÃ©pend des limites de mÃ©moire du navigateur, il est recommandÃ© de ne pas dÃ©passer 10 Mo. Des donnÃ©es JSON volumineuses peuvent causer des ralentissements ou des plantages du navigateur. Pour des donnÃ©es trÃ¨s volumineuses, utilisez des Ã©diteurs JSON de bureau professionnels ou des outils en ligne de commande (comme jq).',
                faq4Q: 'Puis-je modifier le JSON?',
                faq4A: 'Oui. Vous pouvez modifier les donnÃ©es JSON directement dans la zone de saisie, puis cliquer sur le bouton "Formater" pour valider la syntaxe. L\'outil dÃ©tectera automatiquement les erreurs et indiquera leur emplacement.',
                faq5Q: 'Les donnÃ©es JSON seront-elles tÃ©lÃ©chargÃ©es sur le serveur?',
                faq5A: 'Non. Toutes les opÃ©rations d\'analyse et de formatage JSON sont effectuÃ©es localement dans votre navigateur. Les donnÃ©es ne sont jamais tÃ©lÃ©chargÃ©es sur aucun serveur. Vous pouvez traiter des donnÃ©es sensibles en toute sÃ©curitÃ©.',
                relatedTools: 'ğŸ”— Outils connexes',
                relatedSqlite: 'Visionneur SQLite',
                relatedSqliteDesc: 'Parcourir les bases de donnÃ©es SQLite en ligne',
                relatedCrypto: 'BoÃ®te Ã  outils Crypto',
                relatedCryptoDesc: 'Encodage et chiffrement Base64/MD5/AES',
                relatedRegex: 'Testeur Regex',
                relatedRegexDesc: 'Correspondance et dÃ©bogage regex en ligne',
                relatedTimestamp: 'Convertisseur Timestamp',
                relatedTimestampDesc: 'Conversion timestamp Unix et date',
                footerPrivacy: 'Traitement frontend pur, donnÃ©es jamais tÃ©lÃ©chargÃ©es sur le serveur',
                footerBack: 'â† Retour Ã  Web Toolbox'
            },
            'es': {
                backToToolbox: 'â† Volver a la caja de herramientas',
                pageTitle: '{ } Visor JSON',
                pageSubtitle: 'Pega datos JSON y obtÃ©n instantÃ¡neamente una vista de Ã¡rbol interactiva',
                featuresTitle: 'CaracterÃ­sticas',
                feature1Title: 'VisualizaciÃ³n formateada',
                feature1Desc: 'Formateo automÃ¡tico de JSON con resaltado de sintaxis para una visualizaciÃ³n clara',
                feature2Title: 'Vista de Ã¡rbol',
                feature2Desc: 'Estructura de Ã¡rbol plegable que muestra claramente la jerarquÃ­a de datos',
                feature3Title: 'DetecciÃ³n de errores',
                feature3Desc: 'DetecciÃ³n automÃ¡tica de errores de sintaxis JSON con indicaciÃ³n de ubicaciÃ³n',
                feature4Title: 'Copiar con un clic',
                feature4Desc: 'Copia el JSON formateado al portapapeles con un clic',
                inputPanelTitle: 'Entrada JSON',
                outputPanelTitle: 'Vista de Ã¡rbol',
                btnOpen: 'Abrir',
                btnSample: 'Ejemplo',
                btnClear: 'Limpiar',
                btnFormat: 'Formatear',
                btnMinify: 'Minificar',
                btnBeautify: 'Embellecer',
                btnCopy: 'Copiar',
                btnDownload: 'Descargar',
                btnEscape: 'Escapar',
                btnUnescape: 'Desescapar',
                btnExpandAll: 'Expandir todo',
                btnCollapseAll: 'Contraer todo',
                inputPlaceholder: 'Pega datos JSON aquÃ­, o arrastra y suelta un archivo JSON\n\nEjemplo:\n{\n  "nombre": "Juan",\n  "edad": 28,\n  "habilidades": ["JavaScript", "Python", "Go"]\n}',
                searchPlaceholder: 'ğŸ” Buscar claves o valores...',
                dropHint: 'Suelta para cargar el archivo JSON',
                pathLabel: 'Ruta:',
                emptyMessage: 'Ingresa datos JSON a la izquierda y haz clic en "Formatear"',
                pleaseInputJson: 'Por favor ingresa datos JSON',
                statObjects: 'Objetos',
                statArrays: 'Arrays',
                statStrings: 'Cadenas',
                statNumbers: 'NÃºmeros',
                statBooleans: 'Booleanos',
                statDepth: 'Profundidad',
                items: 'elementos',
                elements: 'elementos',
                copyPath: 'Copiar ruta',
                copyValue: 'Copiar',
                foundMatches: 'Encontrado {count} coincidencias',
                noMatches: 'Sin coincidencias',
                parseSuccess: 'âœ“ JSON analizado con Ã©xito',
                parseSuccessWithFix: 'âœ“ AnÃ¡lisis exitoso (se eliminaron comentarios y comas finales)',
                parseError: 'Error de anÃ¡lisis JSON',
                jsonMinified: 'âœ“ JSON minificado',
                jsonBeautified: 'âœ“ JSON embellecido',
                invalidJson: 'âŒ JSON invÃ¡lido',
                escaped: 'âœ“ Escapado',
                unescaped: 'âœ“ Desescapado',
                unescapeFailed: 'âŒ FallÃ³ el desescapado',
                copiedToClipboard: 'âœ“ Copiado al portapapeles',
                copiedFormattedJson: 'âœ“ JSON formateado copiado',
                pathCopied: 'âœ“ Ruta copiada: ',
                valueCopied: 'âœ“ Valor copiado',
                fileLoaded: 'âœ“ Archivo cargado: ',
                fileLoadFailed: 'âŒ Fallo al cargar archivo',
                faqTitle: 'Preguntas frecuentes',
                faq1Q: 'Â¿QuÃ© es el formato JSON?',
                faq1A: 'JSON (JavaScript Object Notation) es un formato ligero de intercambio de datos. Es fÃ¡cil de leer y escribir para humanos, y fÃ¡cil de analizar y generar para mÃ¡quinas. JSON se usa comÃºnmente para la transmisiÃ³n de datos entre frontend y backend en aplicaciones web.',
                faq2Q: 'Â¿Por quÃ© falla mi anÃ¡lisis de JSON?',
                faq2A: 'Razones comunes de fallo en el anÃ¡lisis de JSON:',
                faq2List1: 'Faltan comillas: Todas las claves y valores de cadena necesitan comillas dobles',
                faq2List2: 'Comas finales: No debe haber coma despuÃ©s del Ãºltimo elemento',
                faq2List3: 'Uso de comillas simples: El estÃ¡ndar JSON solo soporta comillas dobles',
                faq2List4: 'Corchetes faltantes o no coincidentes',
                faq2List5: 'Contiene comentarios: El JSON estÃ¡ndar no soporta comentarios (esta herramienta los elimina automÃ¡ticamente)',
                faq3Q: 'Â¿CuÃ¡l es el tamaÃ±o mÃ¡ximo de datos JSON soportado?',
                faq3A: 'El tamaÃ±o de datos JSON depende de los lÃ­mites de memoria del navegador, se recomienda no exceder 10MB. Datos JSON grandes pueden causar lentitud o bloqueo del navegador. Para datos muy grandes, usa editores JSON de escritorio profesionales o herramientas de lÃ­nea de comandos (como jq).',
                faq4Q: 'Â¿Puedo editar JSON?',
                faq4A: 'SÃ­. Puedes editar datos JSON directamente en el cuadro de entrada, luego haz clic en el botÃ³n "Formatear" para validar la sintaxis. La herramienta detectarÃ¡ automÃ¡ticamente los errores e indicarÃ¡ su ubicaciÃ³n.',
                faq5Q: 'Â¿Se subirÃ¡n los datos JSON al servidor?',
                faq5A: 'No. Todas las operaciones de anÃ¡lisis y formateo de JSON se realizan localmente en tu navegador. Los datos nunca se suben a ningÃºn servidor. Puedes procesar datos sensibles de forma segura con total protecciÃ³n de privacidad.',
                relatedTools: 'ğŸ”— Herramientas relacionadas',
                relatedSqlite: 'Visor SQLite',
                relatedSqliteDesc: 'Navegar bases de datos SQLite en lÃ­nea',
                relatedCrypto: 'Caja de herramientas Crypto',
                relatedCryptoDesc: 'CodificaciÃ³n y cifrado Base64/MD5/AES',
                relatedRegex: 'Probador Regex',
                relatedRegexDesc: 'Coincidencia y depuraciÃ³n regex en lÃ­nea',
                relatedTimestamp: 'Convertidor Timestamp',
                relatedTimestampDesc: 'ConversiÃ³n timestamp Unix y fecha',
                footerPrivacy: 'Procesamiento frontend puro, datos nunca subidos al servidor',
                footerBack: 'â† Volver a Web Toolbox'
            }
        };

        // å½“å‰è¯­è¨€
        let currentLang = localStorage.getItem('toolbox_lang') || detectLanguage();

        // è¯­è¨€æ˜¾ç¤ºåç§°æ˜ å°„
        const langNames = {
            'en': 'ğŸ‡ºğŸ‡¸ English',
            'zh-CN': 'ğŸ‡¨ğŸ‡³ ä¸­æ–‡',
            'fr': 'ğŸ‡«ğŸ‡· FranÃ§ais',
            'es': 'ğŸ‡ªğŸ‡¸ EspaÃ±ol'
        };

        // æ£€æµ‹æµè§ˆå™¨è¯­è¨€
        function detectLanguage() {
            const browserLang = navigator.language || navigator.userLanguage;
            if (browserLang.startsWith('zh')) return 'zh-CN';
            if (browserLang.startsWith('fr')) return 'fr';
            if (browserLang.startsWith('es')) return 'es';
            return 'en';
        }

        // è·å–ç¿»è¯‘æ–‡æœ¬
        function t(key) {
            const trans = translations[currentLang] || translations['en'];
            return trans[key] || translations['en'][key] || key;
        }

        // åº”ç”¨ç¿»è¯‘
        function applyTranslations(lang) {
            const trans = translations[lang] || translations['en'];

            // æ›´æ–° HTML lang å±æ€§
            document.documentElement.lang = lang;

            // ç¿»è¯‘æ‰€æœ‰å¸¦ data-i18n å±æ€§çš„å…ƒç´ 
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (trans[key]) {
                    el.innerHTML = trans[key];
                }
            });

            // ç¿»è¯‘ placeholder
            document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
                const key = el.getAttribute('data-i18n-placeholder');
                if (trans[key]) {
                    el.placeholder = trans[key];
                }
            });

            // æ›´æ–°è¯­è¨€æŒ‰é’®çŠ¶æ€
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.lang === lang);
            });

            // æ›´æ–°å½“å‰è¯­è¨€æ˜¾ç¤º
            const langCurrent = document.getElementById('langCurrent');
            if (langCurrent) {
                langCurrent.textContent = langNames[lang] || langNames['en'];
            }
        }

        // åˆ‡æ¢è¯­è¨€
        function switchLanguage(lang) {
            currentLang = lang;
            localStorage.setItem('toolbox_lang', lang);
            applyTranslations(lang);
            // å…³é—­ä¸‹æ‹‰èœå•
            const dropdown = document.getElementById('langDropdown');
            if (dropdown) dropdown.classList.remove('open');
        }

        // ç§»é™¤ JSON ä¸­çš„æ³¨é‡Šï¼ˆæ”¯æŒ JSONC æ ¼å¼ï¼‰
        function stripJsonComments(jsonString) {
            let result = '';
            let i = 0;
            let inString = false;
            let stringChar = '';

            while (i < jsonString.length) {
                const char = jsonString[i];
                const nextChar = jsonString[i + 1];

                // å¤„ç†å­—ç¬¦ä¸²çŠ¶æ€
                if (inString) {
                    result += char;
                    // æ£€æŸ¥è½¬ä¹‰å­—ç¬¦
                    if (char === '\\' && i + 1 < jsonString.length) {
                        result += nextChar;
                        i += 2;
                        continue;
                    }
                    // æ£€æŸ¥å­—ç¬¦ä¸²ç»“æŸ
                    if (char === stringChar) {
                        inString = false;
                    }
                    i++;
                    continue;
                }

                // æ£€æŸ¥å­—ç¬¦ä¸²å¼€å§‹
                if (char === '"' || char === "'") {
                    inString = true;
                    stringChar = char;
                    result += char;
                    i++;
                    continue;
                }

                // æ£€æŸ¥å•è¡Œæ³¨é‡Š //
                if (char === '/' && nextChar === '/') {
                    // è·³è¿‡åˆ°è¡Œå°¾
                    while (i < jsonString.length && jsonString[i] !== '\n') {
                        i++;
                    }
                    continue;
                }

                // æ£€æŸ¥å¤šè¡Œæ³¨é‡Š /* */
                if (char === '/' && nextChar === '*') {
                    i += 2;
                    // è·³è¿‡åˆ° */
                    while (i < jsonString.length - 1) {
                        if (jsonString[i] === '*' && jsonString[i + 1] === '/') {
                            i += 2;
                            break;
                        }
                        i++;
                    }
                    continue;
                }

                result += char;
                i++;
            }

            return result;
        }

        // ç§»é™¤å°¾éšé€—å·ï¼ˆJSON ä¸å…è®¸ï¼Œä½† JSONC å¸¸è§ï¼‰
        function removeTrailingCommas(jsonString) {
            // ç§»é™¤å¯¹è±¡å’Œæ•°ç»„ä¸­çš„å°¾éšé€—å·
            return jsonString.replace(/,(\s*[}\]])/g, '$1');
        }

        // é¢„å¤„ç† JSON å­—ç¬¦ä¸²ï¼Œå¢å¼ºå…¼å®¹æ€§
        function preprocessJson(input) {
            let processed = input;

            // 1. ç§»é™¤æ³¨é‡Š
            processed = stripJsonComments(processed);

            // 2. ç§»é™¤å°¾éšé€—å·
            processed = removeTrailingCommas(processed);

            return processed;
        }

        // è§£æå¹¶æ¸²æŸ“JSON
        function formatAndParse() {
            const input = document.getElementById('jsonInput').value.trim();
            const output = document.getElementById('outputArea');

            if (!input) {
                output.innerHTML = `<div class="message"><div class="message-icon">ğŸ“„</div><div>${t('pleaseInputJson')}</div></div>`;
                document.getElementById('statsBar').style.display = 'none';
                return;
            }

            let wasPreprocessed = false;

            try {
                // å…ˆå°è¯•ç›´æ¥è§£æ
                try {
                    parsedData = JSON.parse(input);
                } catch (directError) {
                    // ç›´æ¥è§£æå¤±è´¥ï¼Œå°è¯•é¢„å¤„ç†åè§£æ
                    const preprocessed = preprocessJson(input);
                    parsedData = JSON.parse(preprocessed);
                    wasPreprocessed = true;
                }

                // ç¾åŒ–è¾“å…¥æ¡†ä¸­çš„JSON
                document.getElementById('jsonInput').value = JSON.stringify(parsedData, null, 2);

                // é‡ç½®ç»Ÿè®¡
                stats = { objects: 0, arrays: 0, strings: 0, numbers: 0, booleans: 0, nulls: 0, maxDepth: 0 };

                // æ¸²æŸ“æ ‘å½¢è§†å›¾
                output.innerHTML = '<div class="json-tree">' + renderNode(parsedData, '', 0, false) + '</div>';

                // æ›´æ–°ç»Ÿè®¡
                updateStats();

                if (wasPreprocessed) {
                    showToast(t('parseSuccessWithFix'), 'success');
                } else {
                    showToast(t('parseSuccess'), 'success');
                }

            } catch (e) {
                output.innerHTML = `<div class="message error"><div class="message-icon">âŒ</div><div>${t('parseError')}</div><div style="margin-top: 10px; font-size: 13px;">${escapeHtml(e.message)}</div></div>`;
                document.getElementById('statsBar').style.display = 'none';
                parsedData = null;
            }
        }

        // æ¸²æŸ“èŠ‚ç‚¹
        function renderNode(data, key, depth, isLast, path = '$') {
            const type = getType(data);
            const currentPath = key ? (path + (isNaN(key) ? '.' + key : '[' + key + ']')) : path;
            const nodeId = 'node-' + Math.random().toString(36).substr(2, 9);

            // æ›´æ–°ç»Ÿè®¡
            if (depth > stats.maxDepth) stats.maxDepth = depth;

            let html = `<div class="json-node depth-${depth % 6}" data-path="${escapeHtml(currentPath)}">`;
            html += '<div class="json-row">';

            if (type === 'object' || type === 'array') {
                const isObject = type === 'object';
                const items = isObject ? Object.keys(data) : data;
                const size = isObject ? Object.keys(data).length : data.length;
                const bracket = isObject ? ['{', '}'] : ['[', ']'];

                if (isObject) stats.objects++;
                else stats.arrays++;

                const sizeText = isObject ? `${size} ${t('items')}` : `${size} ${t('elements')}`;

                html += `<span class="json-toggle expanded" onclick="toggleNode(this, '${nodeId}')"></span>`;

                if (key !== '') {
                    html += `<span class="json-key">"${escapeHtml(key)}"</span>`;
                    html += '<span class="json-colon">:</span>';
                }

                html += `<span class="json-bracket open">${bracket[0]}</span>`;
                html += `<span class="json-size">${sizeText}</span>`;
                html += `<span class="json-ellipsis" onclick="toggleNode(document.querySelector('#${nodeId}').previousElementSibling.querySelector('.json-toggle'), '${nodeId}')" style="display: none;">...</span>`;
                html += `<button class="btn copy-btn" onclick="copyPath('${escapeHtml(currentPath)}')">${t('copyPath')}</button>`;
                html += '</div>';

                html += `<div class="json-children" id="${nodeId}">`;

                if (isObject) {
                    const keys = Object.keys(data);
                    keys.forEach((k, i) => {
                        html += `<div class="json-item">${renderNode(data[k], k, depth + 1, i === keys.length - 1, currentPath)}</div>`;
                    });
                } else {
                    data.forEach((item, i) => {
                        html += `<div class="json-item">${renderNode(item, i.toString(), depth + 1, i === data.length - 1, currentPath)}</div>`;
                    });
                }

                html += '</div>';
                html += `<div class="json-row"><span class="json-toggle hidden"></span><span class="json-bracket">${bracket[1]}</span>${!isLast ? '<span class="json-comma">,</span>' : ''}</div>`;

            } else {
                // åŸºæœ¬ç±»å‹
                html += '<span class="json-toggle hidden"></span>';

                if (key !== '') {
                    html += `<span class="json-key">"${escapeHtml(key)}"</span>`;
                    html += '<span class="json-colon">:</span>';
                }

                html += renderValue(data, type);
                if (!isLast) html += '<span class="json-comma">,</span>';
                html += `<button class="btn copy-btn" onclick="copyValue(\`${escapeHtml(JSON.stringify(data))}\`)">${t('copyValue')}</button>`;
                html += '</div>';
            }

            html += '</div>';
            return html;
        }

        // æ¸²æŸ“å€¼
        function renderValue(value, type) {
            switch (type) {
                case 'string':
                    stats.strings++;
                    const displayValue = value.length > 100 ? value.substring(0, 100) + '...' : value;
                    return `<span class="json-value string" title="${escapeHtml(value)}">${escapeHtml(displayValue)}</span>`;
                case 'number':
                    stats.numbers++;
                    return `<span class="json-value number">${value}</span>`;
                case 'boolean':
                    stats.booleans++;
                    return `<span class="json-value boolean">${value}</span>`;
                case 'null':
                    stats.nulls++;
                    return '<span class="json-value null">null</span>';
                default:
                    return `<span class="json-value">${escapeHtml(String(value))}</span>`;
            }
        }

        // è·å–ç±»å‹
        function getType(value) {
            if (value === null) return 'null';
            if (Array.isArray(value)) return 'array';
            return typeof value;
        }

        // åˆ‡æ¢èŠ‚ç‚¹
        function toggleNode(toggle, nodeId) {
            const children = document.getElementById(nodeId);
            const ellipsis = toggle.parentElement.querySelector('.json-ellipsis');
            const size = toggle.parentElement.querySelector('.json-size');

            if (toggle.classList.contains('expanded')) {
                toggle.classList.remove('expanded');
                toggle.classList.add('collapsed');
                children.classList.add('collapsed');
                if (ellipsis) ellipsis.style.display = 'inline';
                if (size) size.style.display = 'none';
            } else {
                toggle.classList.remove('collapsed');
                toggle.classList.add('expanded');
                children.classList.remove('collapsed');
                if (ellipsis) ellipsis.style.display = 'none';
                if (size) size.style.display = 'inline';
            }
        }

        // å…¨éƒ¨å±•å¼€
        function expandAll() {
            document.querySelectorAll('.json-toggle.collapsed').forEach(toggle => {
                const nodeId = toggle.getAttribute('onclick').match(/'([^']+)'/)[1];
                toggleNode(toggle, nodeId);
            });
        }

        // å…¨éƒ¨æ”¶èµ·
        function collapseAll() {
            document.querySelectorAll('.json-toggle.expanded:not(.hidden)').forEach(toggle => {
                const match = toggle.getAttribute('onclick')?.match(/'([^']+)'/);
                if (match) toggleNode(toggle, match[1]);
            });
        }

        // æ›´æ–°ç»Ÿè®¡
        function updateStats() {
            document.getElementById('statsBar').style.display = 'flex';
            document.getElementById('statObjects').textContent = stats.objects;
            document.getElementById('statArrays').textContent = stats.arrays;
            document.getElementById('statStrings').textContent = stats.strings;
            document.getElementById('statNumbers').textContent = stats.numbers;
            document.getElementById('statBooleans').textContent = stats.booleans;
            document.getElementById('statNulls').textContent = stats.nulls;
            document.getElementById('statDepth').textContent = stats.maxDepth;
        }

        // æœç´¢
        function handleSearch() {
            const query = document.getElementById('searchInput').value.toLowerCase();
            const info = document.getElementById('searchInfo');

            // ç§»é™¤æ‰€æœ‰é«˜äº®
            document.querySelectorAll('.highlight').forEach(el => {
                el.outerHTML = el.innerHTML;
            });

            if (!query) {
                info.textContent = '';
                return;
            }

            let count = 0;

            // æœç´¢é”®å’Œå€¼
            document.querySelectorAll('.json-key, .json-value').forEach(el => {
                const text = el.textContent.toLowerCase();
                if (text.includes(query)) {
                    const regex = new RegExp(`(${escapeRegex(query)})`, 'gi');
                    el.innerHTML = el.innerHTML.replace(regex, '<span class="highlight">$1</span>');
                    count++;

                    // å±•å¼€çˆ¶èŠ‚ç‚¹
                    let parent = el.closest('.json-children');
                    while (parent) {
                        if (parent.classList.contains('collapsed')) {
                            parent.classList.remove('collapsed');
                            const toggle = parent.previousElementSibling?.querySelector('.json-toggle');
                            if (toggle) {
                                toggle.classList.remove('collapsed');
                                toggle.classList.add('expanded');
                            }
                        }
                        parent = parent.parentElement?.closest('.json-children');
                    }
                }
            });

            info.textContent = count > 0 ? t('foundMatches').replace('{count}', count) : t('noMatches');
        }

        // å·¥å…·å‡½æ•°
        function escapeHtml(str) {
            const div = document.createElement('div');
            div.textContent = str;
            return div.innerHTML;
        }

        function escapeRegex(str) {
            return str.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
        }

        // å¤åˆ¶è·¯å¾„
        function copyPath(path) {
            navigator.clipboard.writeText(path);
            showToast(t('pathCopied') + path, 'success');
        }

        // å¤åˆ¶å€¼
        function copyValue(value) {
            navigator.clipboard.writeText(JSON.parse(value));
            showToast(t('valueCopied'), 'success');
        }

        // å¤åˆ¶è¾“å…¥
        function copyInput() {
            navigator.clipboard.writeText(document.getElementById('jsonInput').value);
            showToast(t('copiedToClipboard'), 'success');
        }

        // å¤åˆ¶æ ¼å¼åŒ–åçš„JSON
        function copyFormatted() {
            if (parsedData) {
                navigator.clipboard.writeText(JSON.stringify(parsedData, null, 2));
                showToast(t('copiedFormattedJson'), 'success');
            }
        }

        // ä¸‹è½½JSON
        function downloadJSON() {
            const data = document.getElementById('jsonInput').value;
            if (!data) return;

            const blob = new Blob([data], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'data.json';
            a.click();
            URL.revokeObjectURL(url);
        }

        // å‹ç¼©JSON
        function minifyJSON() {
            const input = document.getElementById('jsonInput');
            try {
                const data = JSON.parse(input.value);
                input.value = JSON.stringify(data);
                showToast(t('jsonMinified'), 'success');
            } catch (e) {
                showToast(t('invalidJson'), 'error');
            }
        }

        // ç¾åŒ–JSON
        function beautifyJSON() {
            const input = document.getElementById('jsonInput');
            try {
                const data = JSON.parse(input.value);
                input.value = JSON.stringify(data, null, 2);
                showToast(t('jsonBeautified'), 'success');
            } catch (e) {
                showToast(t('invalidJson'), 'error');
            }
        }

        // è½¬ä¹‰JSONå­—ç¬¦ä¸²
        function escapeJSON() {
            const input = document.getElementById('jsonInput');
            input.value = JSON.stringify(input.value);
            showToast(t('escaped'), 'success');
        }

        // åè½¬ä¹‰
        function unescapeJSON() {
            const input = document.getElementById('jsonInput');
            try {
                input.value = JSON.parse(input.value);
                showToast(t('unescaped'), 'success');
            } catch (e) {
                showToast(t('unescapeFailed'), 'error');
            }
        }

        // æ¸…ç©ºè¾“å…¥
        function clearInput() {
            document.getElementById('jsonInput').value = '';
            document.getElementById('outputArea').innerHTML = `<div class="message"><div class="message-icon">ğŸ“„</div><div>${t('emptyMessage')}</div></div>`;
            document.getElementById('statsBar').style.display = 'none';
            parsedData = null;
        }

        // åŠ è½½ç¤ºä¾‹
        function loadSample() {
            const sampleZh = {
                "ç”¨æˆ·ä¿¡æ¯": {
                    "å§“å": "å¼ ä¸‰",
                    "å¹´é¾„": 28,
                    "é‚®ç®±": "zhangsan@example.com",
                    "å·²è®¤è¯": true,
                    "ä¼šå‘˜ç­‰çº§": "é‡‘å¡ä¼šå‘˜"
                },
                "è®¢å•åˆ—è¡¨": [
                    {
                        "è®¢å•å·": "ORD20241225001",
                        "å•†å“": "iPhone 15 Pro Max",
                        "ä»·æ ¼": 9999.00,
                        "æ•°é‡": 1,
                        "çŠ¶æ€": "å·²å‘è´§",
                        "æ”¶è´§åœ°å€": {
                            "çœä»½": "å¹¿ä¸œçœ",
                            "åŸå¸‚": "æ·±åœ³å¸‚",
                            "åŒºå¿": "å—å±±åŒº",
                            "è¯¦ç»†åœ°å€": "ç§‘æŠ€å›­è·¯100å·"
                        }
                    },
                    {
                        "è®¢å•å·": "ORD20241225002",
                        "å•†å“": "AirPods Pro 2",
                        "ä»·æ ¼": 1899.00,
                        "æ•°é‡": 2,
                        "çŠ¶æ€": "å¾…æ”¯ä»˜",
                        "æ”¶è´§åœ°å€": null
                    }
                ],
                "è´­ç‰©è½¦": {
                    "å•†å“æ•°é‡": 5,
                    "æ€»é‡‘é¢": 3580.50,
                    "ä¼˜æƒ åˆ¸": ["WELCOME10", "NEWYEAR2025"],
                    "å·²é€‰ä¸­": true
                },
                "è®¾ç½®": {
                    "é€šçŸ¥": {
                        "é‚®ä»¶é€šçŸ¥": true,
                        "çŸ­ä¿¡é€šçŸ¥": false,
                        "æ¨é€é€šçŸ¥": true
                    },
                    "éšç§": {
                        "ä¸ªäººèµ„æ–™å¯è§": "ä»…å¥½å‹",
                        "åœ¨çº¿çŠ¶æ€": true
                    },
                    "ä¸»é¢˜": "æ·±è‰²æ¨¡å¼"
                },
                "æ ‡ç­¾": ["VIP", "æ´»è·ƒç”¨æˆ·", "æ–°å¹´ç‰¹æƒ "],
                "æ³¨å†Œæ—¶é—´": "2023-06-15T08:30:00Z",
                "æœ€åç™»å½•": "2024-12-25T14:22:33Z",
                "å¤‡æ³¨": null
            };

            const sampleEn = {
                "user_info": {
                    "name": "John Doe",
                    "age": 28,
                    "email": "john@example.com",
                    "verified": true,
                    "membership": "Gold Member"
                },
                "orders": [
                    {
                        "order_id": "ORD20241225001",
                        "product": "iPhone 15 Pro Max",
                        "price": 999.00,
                        "quantity": 1,
                        "status": "Shipped",
                        "shipping_address": {
                            "state": "California",
                            "city": "San Francisco",
                            "district": "Financial District",
                            "street": "100 Tech Park Road"
                        }
                    },
                    {
                        "order_id": "ORD20241225002",
                        "product": "AirPods Pro 2",
                        "price": 249.00,
                        "quantity": 2,
                        "status": "Pending Payment",
                        "shipping_address": null
                    }
                ],
                "cart": {
                    "item_count": 5,
                    "total": 3580.50,
                    "coupons": ["WELCOME10", "NEWYEAR2025"],
                    "selected": true
                },
                "settings": {
                    "notifications": {
                        "email": true,
                        "sms": false,
                        "push": true
                    },
                    "privacy": {
                        "profile_visible": "Friends Only",
                        "online_status": true
                    },
                    "theme": "Dark Mode"
                },
                "tags": ["VIP", "Active User", "New Year Promo"],
                "registered_at": "2023-06-15T08:30:00Z",
                "last_login": "2024-12-25T14:22:33Z",
                "notes": null
            };

            const sample = currentLang === 'zh-CN' ? sampleZh : sampleEn;
            document.getElementById('jsonInput').value = JSON.stringify(sample, null, 2);
            formatAndParse();
        }

        // Toasté€šçŸ¥
        function showToast(message, type = 'info') {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.className = 'toast ' + type + ' show';
            setTimeout(() => {
                toast.classList.remove('show');
            }, 2000);
        }

        // å¿«æ·é”®
        document.addEventListener('keydown', (e) => {
            if (e.ctrlKey || e.metaKey) {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    formatAndParse();
                } else if (e.key === 'b') {
                    e.preventDefault();
                    beautifyJSON();
                }
            }
        });

        // æ–‡ä»¶é€‰æ‹©
        const fileInput = document.getElementById('fileInput');

        function openFile() {
            fileInput.click();
        }

        fileInput.addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (file) {
                loadFile(file);
            }
            // æ¸…ç©ºä»¥ä¾¿ä¸‹æ¬¡é€‰æ‹©åŒä¸€æ–‡ä»¶ä¹Ÿèƒ½è§¦å‘
            fileInput.value = '';
        });

        // åŠ è½½æ–‡ä»¶
        function loadFile(file) {
            const reader = new FileReader();
            reader.onload = (event) => {
                document.getElementById('jsonInput').value = event.target.result;
                formatAndParse();
                showToast(t('fileLoaded') + file.name, 'success');
            };
            reader.onerror = () => {
                showToast(t('fileLoadFailed'), 'error');
            };
            reader.readAsText(file);
        }

        // æ‹–æ”¾æ”¯æŒ
        const inputAreaWrapper = document.getElementById('inputAreaWrapper');
        const dropOverlay = document.getElementById('dropOverlay');
        let dragCounter = 0;

        inputAreaWrapper.addEventListener('dragenter', (e) => {
            e.preventDefault();
            dragCounter++;
            dropOverlay.classList.add('active');
        });

        inputAreaWrapper.addEventListener('dragleave', (e) => {
            e.preventDefault();
            dragCounter--;
            if (dragCounter === 0) {
                dropOverlay.classList.remove('active');
            }
        });

        inputAreaWrapper.addEventListener('dragover', (e) => {
            e.preventDefault();
        });

        inputAreaWrapper.addEventListener('drop', (e) => {
            e.preventDefault();
            dragCounter = 0;
            dropOverlay.classList.remove('active');

            const file = e.dataTransfer.files[0];
            if (file) {
                // æ”¯æŒ .json æ–‡ä»¶å’Œæ–‡æœ¬æ–‡ä»¶
                if (file.name.endsWith('.json') || file.type === 'application/json' || file.type.startsWith('text/')) {
                    loadFile(file);
                } else {
                    // å°è¯•è¯»å–ä»»ä½•æ–‡ä»¶
                    loadFile(file);
                }
            }
        });

        // é˜»æ­¢æ•´ä¸ªé¡µé¢çš„æ‹–æ”¾é»˜è®¤è¡Œä¸º
        document.addEventListener('dragover', (e) => e.preventDefault());
        document.addEventListener('drop', (e) => e.preventDefault());

        // è¯­è¨€åˆ‡æ¢å™¨äº¤äº’
        const langDropdown = document.getElementById('langDropdown');
        const langCurrentBtn = document.getElementById('langCurrent');

        if (langCurrentBtn && langDropdown) {
            // ç‚¹å‡»å½“å‰è¯­è¨€æŒ‰é’®åˆ‡æ¢ä¸‹æ‹‰èœå•
            langCurrentBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                langDropdown.classList.toggle('open');
            });

            // ç‚¹å‡»é¡µé¢å…¶ä»–åœ°æ–¹å…³é—­ä¸‹æ‹‰èœå•
            document.addEventListener('click', () => {
                langDropdown.classList.remove('open');
            });
        }

        // ç»‘å®šè¯­è¨€åˆ‡æ¢æŒ‰é’®äº‹ä»¶
        document.querySelectorAll('.lang-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                e.stopPropagation();
                switchLanguage(btn.dataset.lang);
            });
        });

        // åˆå§‹åŒ–ç¿»è¯‘
        applyTranslations(currentLang);
    </script>

    <!-- FAQ å¸¸è§é—®é¢˜ -->
    <section class="faq-section" style="max-width: 1600px; margin: 40px auto; padding: 0 20px;">
        <h2 style="color: #e6edf3; font-size: 20px; margin-bottom: 24px; padding-bottom: 12px; border-bottom: 1px solid #30363d;" data-i18n="faqTitle">FAQ</h2>
        <div style="display: flex; flex-direction: column; gap: 16px;">
            <details style="background: #161b22; border: 1px solid #30363d; border-radius: 8px; overflow: hidden;">
                <summary style="padding: 16px 20px; cursor: pointer; color: #e6edf3; font-weight: 500; display: flex; align-items: center; gap: 10px; user-select: none;">
                    <span style="color: #58a6ff;">Q:</span> <span data-i18n="faq1Q">What is JSON format?</span>
                </summary>
                <div style="padding: 0 20px 16px 20px; color: #8b949e; line-height: 1.7;">
                    <p data-i18n="faq1A">JSON (JavaScript Object Notation) is a lightweight data interchange format. It's easy for humans to read and write, and easy for machines to parse and generate. JSON is commonly used for data transmission between frontend and backend in web applications and is one of the most common formats for modern APIs.</p>
                </div>
            </details>
            <details style="background: #161b22; border: 1px solid #30363d; border-radius: 8px; overflow: hidden;">
                <summary style="padding: 16px 20px; cursor: pointer; color: #e6edf3; font-weight: 500; display: flex; align-items: center; gap: 10px; user-select: none;">
                    <span style="color: #58a6ff;">Q:</span> <span data-i18n="faq2Q">Why does my JSON parsing fail?</span>
                </summary>
                <div style="padding: 0 20px 16px 20px; color: #8b949e; line-height: 1.7;">
                    <p data-i18n="faq2A">Common reasons for JSON parsing failure include:</p>
                    <ul style="margin: 10px 0 0 20px;">
                        <li data-i18n="faq2List1">Missing quotes: All keys and string values need double quotes</li>
                        <li data-i18n="faq2List2">Trailing commas: No comma after the last element</li>
                        <li data-i18n="faq2List3">Using single quotes: JSON standard only supports double quotes</li>
                        <li data-i18n="faq2List4">Missing or mismatched brackets</li>
                        <li data-i18n="faq2List5">Containing comments: Standard JSON doesn't support comments (this tool auto-removes them)</li>
                    </ul>
                </div>
            </details>
            <details style="background: #161b22; border: 1px solid #30363d; border-radius: 8px; overflow: hidden;">
                <summary style="padding: 16px 20px; cursor: pointer; color: #e6edf3; font-weight: 500; display: flex; align-items: center; gap: 10px; user-select: none;">
                    <span style="color: #58a6ff;">Q:</span> <span data-i18n="faq3Q">What is the maximum JSON data size supported?</span>
                </summary>
                <div style="padding: 0 20px 16px 20px; color: #8b949e; line-height: 1.7;">
                    <p data-i18n="faq3A">JSON data size depends on browser memory limits, recommended not to exceed 10MB. Large JSON data may cause browser lag or crash. For very large data, use professional desktop JSON editors or command line tools (like jq).</p>
                </div>
            </details>
            <details style="background: #161b22; border: 1px solid #30363d; border-radius: 8px; overflow: hidden;">
                <summary style="padding: 16px 20px; cursor: pointer; color: #e6edf3; font-weight: 500; display: flex; align-items: center; gap: 10px; user-select: none;">
                    <span style="color: #58a6ff;">Q:</span> <span data-i18n="faq4Q">Can I edit JSON?</span>
                </summary>
                <div style="padding: 0 20px 16px 20px; color: #8b949e; line-height: 1.7;">
                    <p data-i18n="faq4A">Yes. You can edit JSON data directly in the input box, then click the "Format" button to validate the syntax. The tool will automatically detect errors and indicate their location for quick troubleshooting.</p>
                </div>
            </details>
            <details style="background: #161b22; border: 1px solid #30363d; border-radius: 8px; overflow: hidden;">
                <summary style="padding: 16px 20px; cursor: pointer; color: #e6edf3; font-weight: 500; display: flex; align-items: center; gap: 10px; user-select: none;">
                    <span style="color: #58a6ff;">Q:</span> <span data-i18n="faq5Q">Will JSON data be uploaded to the server?</span>
                </summary>
                <div style="padding: 0 20px 16px 20px; color: #8b949e; line-height: 1.7;">
                    <p data-i18n="faq5A">No. All JSON parsing and formatting operations are performed locally in your browser. Data is never uploaded to any server. You can safely process sensitive data with complete privacy protection.</p>
                </div>
            </details>
        </div>
    </section>

    <!-- ç›¸å…³å·¥å…·æ¨è -->
    <section class="related-tools" style="max-width: 1600px; margin: 40px auto; padding: 0 20px;">
        <h3 style="color: #e6edf3; font-size: 18px; margin-bottom: 20px; padding-bottom: 10px; border-bottom: 1px solid #30363d;" data-i18n="relatedTools">ğŸ”— Related Tools</h3>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px;">
            <a href="sqlite-viewer.html" style="display: block; padding: 16px; background: #161b22; border: 1px solid #30363d; border-radius: 8px; text-decoration: none; transition: all 0.2s;">
                <div style="font-size: 24px; margin-bottom: 8px;">ğŸ—„ï¸</div>
                <div style="color: #e6edf3; font-weight: 500;" data-i18n="relatedSqlite">SQLite Viewer</div>
                <div style="color: #8b949e; font-size: 12px; margin-top: 4px;" data-i18n="relatedSqliteDesc">Browse SQLite databases online</div>
            </a>
            <a href="crypto-tools.html" style="display: block; padding: 16px; background: #161b22; border: 1px solid #30363d; border-radius: 8px; text-decoration: none; transition: all 0.2s;">
                <div style="font-size: 24px; margin-bottom: 8px;">ğŸ”</div>
                <div style="color: #e6edf3; font-weight: 500;" data-i18n="relatedCrypto">Crypto Toolkit</div>
                <div style="color: #8b949e; font-size: 12px; margin-top: 4px;" data-i18n="relatedCryptoDesc">Base64/MD5/AES encoding & encryption</div>
            </a>
            <a href="regex-tester.html" style="display: block; padding: 16px; background: #161b22; border: 1px solid #30363d; border-radius: 8px; text-decoration: none; transition: all 0.2s;">
                <div style="font-size: 24px; margin-bottom: 8px;">ğŸ”</div>
                <div style="color: #e6edf3; font-weight: 500;" data-i18n="relatedRegex">Regex Tester</div>
                <div style="color: #8b949e; font-size: 12px; margin-top: 4px;" data-i18n="relatedRegexDesc">Online regex matching & debugging</div>
            </a>
            <a href="timestamp-converter.html" style="display: block; padding: 16px; background: #161b22; border: 1px solid #30363d; border-radius: 8px; text-decoration: none; transition: all 0.2s;">
                <div style="font-size: 24px; margin-bottom: 8px;">â°</div>
                <div style="color: #e6edf3; font-weight: 500;" data-i18n="relatedTimestamp">Timestamp Converter</div>
                <div style="color: #8b949e; font-size: 12px; margin-top: 4px;" data-i18n="relatedTimestampDesc">Unix timestamp & date conversion</div>
            </a>
        </div>
    </section>

    <footer style="text-align: center; padding: 30px 20px; border-top: 1px solid #30363d; color: #8b949e; font-size: 14px;">
        <p data-i18n="footerPrivacy">Pure frontend processing, data never uploaded to server</p>
        <p style="margin-top: 12px;">
            <a href="index.html" style="color: #58a6ff; text-decoration: none;" data-i18n="footerBack">â† Back to Web Toolbox</a>
            <span style="margin: 0 12px;">|</span>
            <a href="https://github.com/heyuan110" target="_blank" rel="noopener" style="color: #58a6ff; text-decoration: none;">GitHub</a>
        </p>
    </footer>
</body>
</html>
