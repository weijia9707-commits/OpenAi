<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pomodoro Timer - Free Online Focus Timer | No Ads, No Signup | ç•ªèŒ„é’Ÿ | Web Toolbox</title>
  <meta name="description" content="Free online pomodoro timer for focus sessions and breaks. Customize work and break durations with browser notifications. âœ… No ads âœ… No signup âœ… No limits. Runs entirely in your browser.">
  <meta name="keywords" content="pomodoro timer,focus timer,study timer,productivity timer,ç•ªèŒ„é’Ÿ,ä¸“æ³¨è®¡æ—¶å™¨,no ads,no signup,no login,no watermark,free unlimited,browser-based,no installation,local processing">
  <meta name="author" content="*****">
  <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
  <meta name="googlebot" content="index, follow">
  <meta name="bingbot" content="index, follow">
  <meta name="revisit-after" content="7 days">
  <meta name="rating" content="general">
  <meta name="distribution" content="global">
  <meta name="language" content="en">
  <link rel="canonical" href="https://www.*****.com/web-toolbox/pomodoro.html">
  <link rel="alternate" hreflang="en" href="https://www.*****.com/web-toolbox/pomodoro.html">
  <link rel="alternate" hreflang="zh-CN" href="https://www.*****.com/web-toolbox/pomodoro.html">
  <link rel="alternate" hreflang="fr" href="https://www.*****.com/web-toolbox/pomodoro.html">
  <link rel="alternate" hreflang="es" href="https://www.*****.com/web-toolbox/pomodoro.html">
  <link rel="alternate" hreflang="x-default" href="https://www.*****.com/web-toolbox/pomodoro.html">

  <meta property="og:type" content="website">
  <meta property="og:url" content="https://www.*****.com/web-toolbox/pomodoro.html">
  <meta property="og:title" content="Pomodoro Timer - Free Online Focus Timer | No Ads, No Signup">
  <meta property="og:description" content="Use pomodoro focus cycles with short and long breaks in browser.">
  <meta property="og:image" content="https://www.*****.com/web-toolbox/screenshots/pomodoro.webp">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:locale" content="en_US">
  <meta property="og:locale:alternate" content="zh_CN">
  <meta property="og:site_name" content="Web Toolbox">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@*****">
  <meta name="twitter:creator" content="@*****">
  <meta name="twitter:title" content="Pomodoro Timer - Free Online Focus Timer | No Ads, No Signup">
  <meta name="twitter:description" content="Track focus sessions and breaks with pomodoro timer online.">
  <meta name="twitter:image" content="https://www.*****.com/web-toolbox/screenshots/pomodoro.webp">

  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"WebApplication",
    "name":"Pomodoro Timer",
    "alternateName":["ç•ªèŒ„é’Ÿ","Focus Timer","Study Timer"],
    "url":"https://www.*****.com/web-toolbox/pomodoro.html",
    "description":"Free online pomodoro timer with work and break cycles.",
    "inLanguage":["en","zh-CN","fr","es"],
    "applicationCategory":"UtilitiesApplication",
    "operatingSystem":"Web Browser",
    "offers":{"@type":"Offer","price":"0","priceCurrency":"USD"},
    "author":{"@type":"Person","name":"*****"},
    "publisher":{"@type":"Organization","name":"Web Toolbox","url":"https://www.*****.com/web-toolbox/"},
    "featureList":["Pomodoro work/break cycles","Custom durations","Notification support","Session counter","No ads","No signup required","No watermark","100% browser-based","Unlimited usage"],
    "screenshot":"https://www.*****.com/web-toolbox/screenshots/pomodoro.webp"
  }
  </script>
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"BreadcrumbList",
    "itemListElement":[
      {"@type":"ListItem","position":1,"name":"Home","item":"https://www.*****.com/"},
      {"@type":"ListItem","position":2,"name":"Web Toolbox","item":"https://www.*****.com/web-toolbox/"},
      {"@type":"ListItem","position":3,"name":"Pomodoro Timer","item":"https://www.*****.com/web-toolbox/pomodoro.html"}
    ]
  }
  </script>
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"HowTo",
    "name":"How to Use Pomodoro Timer Online",
    "totalTime":"PT1M",
    "step":[
      {"@type":"HowToStep","position":1,"name":"Set durations","text":"Configure work, short break, and long break minutes."},
      {"@type":"HowToStep","position":2,"name":"Start focus session","text":"Click start and focus until timer ends."},
      {"@type":"HowToStep","position":3,"name":"Follow break cycles","text":"Take short or long breaks based on session count and continue."}
    ]
  }
  </script>
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"FAQPage",
    "mainEntity":[
      {"@type":"Question","name":"What is pomodoro timer and why is it useful?","acceptedAnswer":{"@type":"Answer","text":"Pomodoro timer is a focus technique that alternates work sessions and breaks. It helps maintain concentration, reduce burnout, and improve daily productivity."}},
      {"@type":"Question","name":"Can I customize work and break duration?","acceptedAnswer":{"@type":"Answer","text":"Yes. You can set custom minutes for work, short break, and long break to match study or deep work routines."}},
      {"@type":"Question","name":"Does it support browser notifications?","acceptedAnswer":{"@type":"Answer","text":"Yes. If notification permission is granted, this focus timer will alert you when session phase changes."}},
      {"@type":"Question","name":"Will timer keep running in background tab?","acceptedAnswer":{"@type":"Answer","text":"Yes. Timer is based on JavaScript intervals and keeps counting in most background tab scenarios, then updates UI accordingly."}},
      {"@type":"Question","name":"Is this tool really free with no ads?","acceptedAnswer":{"@type":"Answer","text":"Yes, 100% free with no ads, no registration, no watermark, and no usage limits. All processing happens locally in your browser â€” your data is never uploaded to any server."}}
    ]
  }
  </script>

  <style>
    :root {
      --bg: #020617;
      --surface: #0b1220;
      --surface-2: #111a2a;
      --text: #e2e8f0;
      --muted: #94a3b8;
      --border: rgba(148, 163, 184, 0.24);
      --ring-bg: rgba(100, 116, 139, 0.35);
      --ring-work: #06b6d4;
      --ring-short: #22c55e;
      --ring-long: #f59e0b;
      --primary: #0ea5e9;
      --primary-2: #0284c7;
      --radius: 16px;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: "Space Grotesk", "Avenir Next", "IBM Plex Sans", "Segoe UI", sans-serif;
      color: var(--text);
      min-height: 100vh;
      padding: 24px 16px 64px;
      background:
        radial-gradient(1100px 520px at 8% -10%, rgba(14,165,233,0.22), transparent 55%),
        radial-gradient(900px 500px at 100% 0%, rgba(245,158,11,0.16), transparent 56%),
        linear-gradient(180deg, #020617 0%, #040b16 100%);
      position: relative;
      overflow-x: hidden;
    }

    body::before {
      content: "";
      position: fixed;
      inset: 0;
      pointer-events: none;
      background-image:
        linear-gradient(rgba(148,163,184,0.06) 1px, transparent 1px),
        linear-gradient(90deg, rgba(148,163,184,0.06) 1px, transparent 1px);
      background-size: 28px 28px;
      mask-image: radial-gradient(circle at 50% 20%, black, transparent 75%);
    }

    .container { max-width: 980px; margin: 0 auto; }

    .topbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .back {
      color: #cbd5e1;
      text-decoration: none;
      font-size: 14px;
      padding: 10px 14px;
      border: 1px solid var(--border);
      border-radius: 12px;
      background: rgba(15, 23, 42, 0.72);
      backdrop-filter: blur(6px);
      transition: border-color .2s ease, transform .2s ease;
    }

    .back:hover { border-color: #38bdf8; transform: translateY(-1px); }

    .lang-dropdown { position: relative; }

    .lang-current {
      border: 1px solid var(--border);
      border-radius: 12px;
      background: rgba(15, 23, 42, 0.75);
      padding: 9px 12px;
      font-size: 14px;
      cursor: pointer;
      user-select: none;
      backdrop-filter: blur(6px);
    }

    .lang-menu {
      position: absolute;
      top: calc(100% + 8px);
      right: 0;
      background: #0b1220;
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 6px;
      min-width: 158px;
      display: none;
      z-index: 30;
      box-shadow: 0 20px 40px rgba(0,0,0,.35);
    }

    .lang-dropdown.open .lang-menu { display: block; }

    .lang-btn {
      width: 100%;
      background: transparent;
      border: 0;
      color: var(--text);
      padding: 9px 10px;
      text-align: left;
      border-radius: 8px;
      cursor: pointer;
    }

    .lang-btn:hover { background: rgba(14,165,233,.18); }

    h1 {
      text-align: center;
      font-size: clamp(2rem, 4vw, 2.8rem);
      letter-spacing: -0.03em;
      margin-bottom: 10px;
      background: linear-gradient(120deg, #e2e8f0 5%, #7dd3fc 50%, #fbbf24 95%);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }

    .subtitle {
      text-align: center;
      color: var(--muted);
      margin-bottom: 22px;
      font-size: 1.03rem;
    }

    .card {
      background: linear-gradient(180deg, rgba(17,26,42,.88), rgba(9,14,24,.86));
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: 0 24px 48px rgba(0,0,0,.36);
    }

    .tool-card {
      padding: 18px;
      position: relative;
      overflow: hidden;
    }

    .tool-card::before {
      content: "";
      position: absolute;
      inset: -1px;
      border-radius: var(--radius);
      pointer-events: none;
      background: linear-gradient(120deg, rgba(14,165,233,.28), rgba(245,158,11,.24), rgba(34,197,94,.22));
      mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
      -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
      mask-composite: exclude;
      -webkit-mask-composite: xor;
      padding: 1px;
    }

    .timer-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
      margin-bottom: 12px;
      flex-wrap: wrap;
    }

    .phase-pill,
    .cycle-pill {
      border: 1px solid var(--border);
      border-radius: 999px;
      padding: 6px 11px;
      font-size: 12px;
      letter-spacing: .02em;
      background: rgba(2, 6, 23, 0.62);
    }

    .phase-pill { color: #7dd3fc; }
    .cycle-pill { color: #fbbf24; }

    .timer-wrap {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 14px;
      padding: 10px 0 12px;
    }

    .timer-orb {
      position: relative;
      width: 294px;
      height: 294px;
      display: grid;
      place-items: center;
      isolation: isolate;
    }

    .timer-orb::before {
      content: "";
      position: absolute;
      inset: -18px;
      border-radius: 50%;
      background: conic-gradient(from 0deg, rgba(14,165,233,.2), rgba(34,197,94,.15), rgba(245,158,11,.18), rgba(14,165,233,.2));
      filter: blur(16px);
      z-index: 0;
      animation: orbSpin 13s linear infinite;
      opacity: .55;
    }

    .timer-orb::after {
      content: "";
      position: absolute;
      inset: -8px;
      border-radius: 50%;
      border: 1px solid rgba(125, 211, 252, 0.2);
      z-index: 0;
      animation: orbBreath 3s ease-in-out infinite;
    }

    .timer-svg { width: 294px; height: 294px; transform: rotate(-90deg); position: relative; z-index: 1; }
    .progress-bg { fill: none; stroke: var(--ring-bg); stroke-width: 11; }

    .progress-bar {
      fill: none;
      stroke: var(--ring-work);
      stroke-width: 11;
      stroke-linecap: round;
      stroke-dasharray: 754;
      stroke-dashoffset: 0;
      transition: stroke-dashoffset .35s linear, stroke .25s ease;
      filter: drop-shadow(0 0 12px rgba(14,165,233,.42));
    }

    .timer-core {
      position: absolute;
      inset: 36px;
      border-radius: 50%;
      display: grid;
      place-items: center;
      background: radial-gradient(circle at 35% 25%, rgba(14,165,233,.17), rgba(15,23,42,.9) 58%);
      border: 1px solid rgba(148,163,184,.2);
      text-align: center;
      padding: 18px;
      z-index: 2;
      overflow: hidden;
    }

    .timer {
      font-family: "JetBrains Mono", "IBM Plex Mono", Consolas, monospace;
      font-size: clamp(48px, 9vw, 66px);
      font-weight: 700;
      letter-spacing: 1px;
      text-shadow: 0 0 18px rgba(14,165,233,.2);
      line-height: 1;
      margin: 0;
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -56%);
      width: 5.2ch;
      text-align: center;
      font-variant-numeric: tabular-nums;
      font-feature-settings: "tnum";
    }

    .timer.tick { animation: tickPop .2s ease; }

    .timer-caption {
      color: #9fb3c8;
      font-size: 13px;
      letter-spacing: .01em;
      min-height: 18px;
      position: absolute;
      left: 0;
      right: 0;
      bottom: 24px;
      padding: 0 20px;
    }

    .timer-orb.running .timer-core {
      animation: pulseOrb 2.8s ease-in-out infinite;
    }

    .spark {
      position: absolute;
      left: 50%;
      top: 50%;
      width: 8px;
      height: 8px;
      border-radius: 50%;
      pointer-events: none;
      z-index: 4;
      box-shadow: 0 0 10px currentColor;
      animation: sparkFly .9s ease-out forwards;
    }

    [data-reveal] {
      opacity: 0;
      transform: translateY(14px) scale(.98);
      animation: revealUp .72s cubic-bezier(.2,.7,.2,1) forwards;
    }

    [data-reveal="2"] { animation-delay: .08s; }
    [data-reveal="3"] { animation-delay: .16s; }
    [data-reveal="4"] { animation-delay: .24s; }
    [data-reveal="5"] { animation-delay: .32s; }

    @keyframes pulseOrb {
      0%, 100% { box-shadow: 0 0 0 0 rgba(14,165,233,.2); }
      50% { box-shadow: 0 0 0 14px rgba(14,165,233,0); }
    }

    @keyframes orbSpin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    @keyframes orbBreath {
      0%, 100% { transform: scale(1); opacity: .4; }
      50% { transform: scale(1.03); opacity: .9; }
    }

    @keyframes tickPop {
      0% { transform: translate(-50%, -56%) scale(1); }
      50% { transform: translate(-50%, -56%) scale(1.06); }
      100% { transform: translate(-50%, -56%) scale(1); }
    }

    @keyframes revealUp {
      to { opacity: 1; transform: translateY(0) scale(1); }
    }

    @keyframes sparkFly {
      0% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
      100% { transform: translate(calc(-50% + var(--dx)), calc(-50% + var(--dy))) scale(.2); opacity: 0; }
    }

    .mode-tabs {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 8px;
      width: min(560px, 100%);
    }

    .mode-chip {
      border: 1px solid var(--border);
      border-radius: 12px;
      background: rgba(2,6,23,.62);
      color: #a7b6c8;
      padding: 9px 10px;
      font-size: 13px;
      text-align: center;
      transition: all .2s ease;
      font-weight: 500;
    }

    .mode-chip.active {
      color: #f8fafc;
      border-color: rgba(125,211,252,.55);
      background: linear-gradient(160deg, rgba(14,165,233,.26), rgba(2,132,199,.16));
      box-shadow: 0 8px 16px rgba(2,132,199,.2);
    }

    .session-line {
      color: #94a3b8;
      font-size: 14px;
    }

    .toolbar {
      display: grid;
      grid-template-columns: repeat(4, minmax(0, 1fr));
      gap: 8px;
      margin-top: 14px;
    }

    .btn {
      border: 1px solid var(--border);
      background: #0a1323;
      color: var(--text);
      padding: 11px 10px;
      border-radius: 12px;
      font-size: 13px;
      cursor: pointer;
      transition: transform .2s ease, border-color .2s ease, background .2s ease;
      font-weight: 600;
    }

    .btn:hover { transform: translateY(-1px); border-color: #38bdf8; }

    .btn.primary {
      background: linear-gradient(135deg, var(--primary), var(--primary-2));
      border-color: transparent;
      color: #f8fafc;
    }

    .settings {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 10px;
      margin-top: 12px;
    }

    .field {
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 10px;
      background: rgba(2,6,23,.54);
    }

    .field label {
      display: block;
      color: var(--muted);
      font-size: 12px;
      margin-bottom: 6px;
    }

    .field input {
      width: 100%;
      padding: 9px;
      border: 1px solid rgba(148,163,184,.22);
      background: #020617;
      color: var(--text);
      border-radius: 10px;
      font-size: 14px;
      outline: none;
    }

    .field input:focus { border-color: #38bdf8; box-shadow: 0 0 0 3px rgba(14,165,233,.16); }

    .preset-bar {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 12px;
      justify-content: center;
    }

    .preset-btn {
      border: 1px dashed rgba(125, 211, 252, 0.45);
      border-radius: 999px;
      padding: 7px 11px;
      font-size: 12px;
      background: rgba(14,165,233,.08);
      color: #bae6fd;
      cursor: pointer;
      transition: all .2s ease;
    }

    .preset-btn:hover { background: rgba(14,165,233,.18); transform: translateY(-1px); }

    .status {
      color: #93c5fd;
      font-size: 13px;
      min-height: 18px;
      margin-top: 10px;
      text-align: center;
    }

    .shortcuts {
      text-align: center;
      color: #7f95ab;
      font-size: 12px;
      margin-top: 4px;
    }

    .trust-bar {
      display: flex;
      justify-content: center;
      gap: 18px;
      flex-wrap: wrap;
      margin: 14px 0 24px;
      padding: 12px 18px;
      border-radius: 12px;
      border: 1px solid rgba(14,165,233,.24);
      background: linear-gradient(90deg, rgba(14,165,233,.1), rgba(34,197,94,.08));
    }

    .trust-item { font-size: 13px; color: #a7d7f3; white-space: nowrap; }

    .features-section,
    .faq-section,
    .related-tools {
      margin-top: 22px;
      background: rgba(10, 18, 32, 0.84);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 18px;
    }

    .features-section h2,
    .faq-section h2,
    .related-tools h3 {
      text-align: center;
      margin-bottom: 14px;
      font-size: 1.2rem;
    }

    .features-grid,
    .related-grid {
      display: grid;
      grid-template-columns: repeat(4, minmax(0, 1fr));
      gap: 10px;
    }

    .feature,
    .related {
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 12px;
      background: rgba(2,6,23,.52);
    }

    .feature h4,
    .related h4 { margin: 8px 0 6px; font-size: 14px; }

    .feature p,
    .related p { color: var(--muted); font-size: 13px; line-height: 1.55; }

    .related { text-decoration: none; color: inherit; display: block; transition: transform .2s ease, border-color .2s ease; }
    .related:hover { border-color: #38bdf8; transform: translateY(-2px); }

    .faq-item {
      border: 1px solid var(--border);
      border-radius: 10px;
      margin-bottom: 8px;
      overflow: hidden;
      background: rgba(2,6,23,.5);
    }

    .faq-q {
      width: 100%;
      text-align: left;
      background: transparent;
      border: 0;
      color: var(--text);
      padding: 12px 14px;
      cursor: pointer;
      font-size: 14px;
      font-family: inherit;
    }

    .faq-a {
      display: none;
      padding: 0 14px 12px;
      color: var(--muted);
      font-size: 13px;
      line-height: 1.6;
    }

    .faq-item.active .faq-a { display: block; }

    @media (max-width: 960px) {
      .settings { grid-template-columns: 1fr; }
      .features-grid, .related-grid { grid-template-columns: repeat(2, minmax(0, 1fr)); }
      .toolbar { grid-template-columns: repeat(2, minmax(0, 1fr)); }
      .timer-orb, .timer-svg { width: 258px; height: 258px; }
      .timer-core { inset: 32px; }
    }

    @media (max-width: 640px) {
      .features-grid, .related-grid { grid-template-columns: 1fr; }
      .timer-orb, .timer-svg { width: 232px; height: 232px; }
      .timer-core { inset: 28px; }
      .mode-tabs { grid-template-columns: 1fr; }
      .trust-bar { justify-content: flex-start; }
    }

    @media (prefers-reduced-motion: reduce) {
      *, *::before, *::after { animation: none !important; transition: none !important; }
      [data-reveal] { opacity: 1; transform: none; }
    }
  </style>
</head>
<body>
<div class="container">
  <div class="topbar">
    <a class="back" href="index.html">â† <span data-i18n="back">Back to Toolbox</span></a>
    <div class="lang-dropdown" id="langDropdown">
      <div class="lang-current" id="langCurrent">ğŸ‡ºğŸ‡¸ English</div>
      <div class="lang-menu">
        <button class="lang-btn" data-lang="en">ğŸ‡ºğŸ‡¸ English</button>
        <button class="lang-btn" data-lang="zh-CN">ğŸ‡¨ğŸ‡³ ä¸­æ–‡</button>
        <button class="lang-btn" data-lang="fr">ğŸ‡«ğŸ‡· FranÃ§ais</button>
        <button class="lang-btn" data-lang="es">ğŸ‡ªğŸ‡¸ EspaÃ±ol</button>
      </div>
    </div>
  </div>

  <h1 data-i18n="title">Pomodoro Timer</h1>
  <p class="subtitle" data-i18n="subtitle">Boost focus with work and break cycles</p>

  <section class="card tool-card" data-reveal="1">
    <div class="timer-header">
      <div class="phase-pill" id="phaseLabel">Work Session</div>
      <div class="cycle-pill" id="cycleLabel">Cycle 1/4</div>
    </div>

    <div class="timer-wrap">
      <div class="timer-orb" id="timerOrb">
        <svg class="timer-svg" viewBox="0 0 294 294" aria-hidden="true">
          <circle class="progress-bg" cx="147" cy="147" r="120"></circle>
          <circle class="progress-bar" id="progressCircle" cx="147" cy="147" r="120"></circle>
        </svg>
        <div class="timer-core">
          <div class="timer" id="timer">25:00</div>
          <div class="timer-caption" id="timerCaption" data-i18n="caption">One session at a time.</div>
        </div>
      </div>

      <div class="mode-tabs">
        <div class="mode-chip" id="chipWork" data-i18n="phaseWork">Work Session</div>
        <div class="mode-chip" id="chipShort" data-i18n="phaseShort">Short Break</div>
        <div class="mode-chip" id="chipLong" data-i18n="phaseLong">Long Break</div>
      </div>

      <div class="session-line" id="sessions">Completed Sessions: 0</div>
    </div>

    <div class="toolbar">
      <button class="btn primary" id="startBtn" data-i18n="start">Start</button>
      <button class="btn" id="pauseBtn" data-i18n="pause">Pause</button>
      <button class="btn" id="resetBtn" data-i18n="reset">Reset</button>
      <button class="btn" id="skipBtn" data-i18n="skip">Skip Phase</button>
    </div>

    <div class="settings">
      <div class="field"><label data-i18n="workMin">Work (minutes)</label><input id="workMin" type="number" min="1" value="25"></div>
      <div class="field"><label data-i18n="shortMin">Short Break (minutes)</label><input id="shortMin" type="number" min="1" value="5"></div>
      <div class="field"><label data-i18n="longMin">Long Break (minutes)</label><input id="longMin" type="number" min="1" value="15"></div>
    </div>

    <div class="preset-bar">
      <button class="preset-btn" data-preset="classic" data-i18n="presetClassic">Classic 25/5/15</button>
      <button class="preset-btn" data-preset="sprint" data-i18n="presetSprint">Sprint 50/10/20</button>
      <button class="preset-btn" data-preset="flow" data-i18n="presetFlow">Flow 90/15/25</button>
    </div>

    <div class="status" id="status"></div>
    <div class="shortcuts" data-i18n="shortcuts">Shortcuts: Space start/pause, R reset, S skip</div>
  </section>

  <div class="trust-bar" data-reveal="2"><span class="trust-item" data-i18n="trust_users">ğŸŒ Used by 50,000+ users</span><span class="trust-item" data-i18n="trust_rating">â­ 4.9/5 rating</span><span class="trust-item" data-i18n="trust_privacy">ğŸ”’ 100% Private</span><span class="trust-item" data-i18n="trust_free">ğŸš« No Ads, No Signup</span></div>

  <section class="features-section" data-reveal="3"><h2 data-i18n="features_title">Pomodoro Features</h2><div class="features-grid"><article class="feature"><div>ğŸ”’</div><h4 data-i18n="f1_t">100% Free & Private</h4><p data-i18n="f1_d">No ads, no signup, no watermark. Everything runs locally in your browser. Your data never leaves your device.</p></article><article class="feature"><div>â±ï¸</div><h4 data-i18n="f2_t">Focus Timer Cycles</h4><p data-i18n="f2_d">Switch automatically between work, short break, and long break phases.</p></article><article class="feature"><div>ğŸ””</div><h4 data-i18n="f3_t">Notification Reminder</h4><p data-i18n="f3_d">Browser notifications remind you when each pomodoro phase ends.</p></article><article class="feature"><div>ğŸ“ˆ</div><h4 data-i18n="f4_t">Session Counter</h4><p data-i18n="f4_d">Track completed focus rounds for study planning and productivity review.</p></article></div></section>

  <section class="faq-section" data-reveal="4"><h2 data-i18n="faq_title">Frequently Asked Questions</h2>
    <div class="faq-item"><button class="faq-q" data-i18n="faq1_q">What is pomodoro timer and why is it useful?</button><div class="faq-a" data-i18n="faq1_a">Pomodoro timer is a focus technique that alternates work sessions and breaks. It helps maintain concentration, reduce burnout, and improve daily productivity.</div></div>
    <div class="faq-item"><button class="faq-q" data-i18n="faq2_q">Can I customize work and break duration?</button><div class="faq-a" data-i18n="faq2_a">Yes. You can set custom minutes for work, short break, and long break to match study or deep work routines.</div></div>
    <div class="faq-item"><button class="faq-q" data-i18n="faq3_q">Does it support browser notifications?</button><div class="faq-a" data-i18n="faq3_a">Yes. If notification permission is granted, this focus timer will alert you when session phase changes.</div></div>
    <div class="faq-item"><button class="faq-q" data-i18n="faq4_q">Will timer keep running in background tab?</button><div class="faq-a" data-i18n="faq4_a">Yes. Timer is based on JavaScript intervals and keeps counting in most background tab scenarios, then updates UI accordingly.</div></div>
    <div class="faq-item"><button class="faq-q" data-i18n="faq_free_q">Is this tool really free with no ads?</button><div class="faq-a" data-i18n="faq_free_a">Yes, 100% free with no ads, no registration, no watermark, and no usage limits. All processing happens locally in your browser â€” your data is never uploaded to any server.</div></div>
  </section>

  <section class="related-tools" data-reveal="5"><h3 data-i18n="related_title">Related Tools</h3><div class="related-grid"><a class="related" href="metronome.html"><div>ğŸµ</div><h4 data-i18n="r1_t">Metronome</h4><p data-i18n="r1_d">Use stable rhythm for focused practice sessions.</p></a><a class="related" href="word-counter.html"><div>ğŸ“</div><h4 data-i18n="r2_t">Word Counter</h4><p data-i18n="r2_d">Track writing output per pomodoro block.</p></a><a class="related" href="world-clock.html"><div>ğŸŒ</div><h4 data-i18n="r3_t">World Clock</h4><p data-i18n="r3_d">Coordinate focus sessions across time zones.</p></a><a class="related" href="calculator.html"><div>ğŸ§®</div><h4 data-i18n="r4_t">Calculator</h4><p data-i18n="r4_d">Estimate daily focus hours and plans.</p></a></div></section>
</div>

<script>
(function(){
  'use strict';

  var langNames={en:'ğŸ‡ºğŸ‡¸ English','zh-CN':'ğŸ‡¨ğŸ‡³ ä¸­æ–‡',fr:'ğŸ‡«ğŸ‡· FranÃ§ais',es:'ğŸ‡ªğŸ‡¸ EspaÃ±ol'};
  var i18n={
    en:{back:'Back to Toolbox',title:'Pomodoro Timer',subtitle:'Boost focus with work and break cycles',caption:'One session at a time.',start:'Start',pause:'Pause',reset:'Reset',skip:'Skip Phase',workMin:'Work (minutes)',shortMin:'Short Break (minutes)',longMin:'Long Break (minutes)',phaseWork:'Work Session',phaseShort:'Short Break',phaseLong:'Long Break',cycle:'Cycle {n}/4',sessions:'Completed Sessions: {n}',running:'Timer running...',paused:'Timer paused',resetDone:'Timer reset',skipDone:'Phase skipped',presetApplied:'Preset applied',notifyTitle:'Pomodoro Timer',shortcuts:'Shortcuts: Space start/pause, R reset, S skip',presetClassic:'Classic 25/5/15',presetSprint:'Sprint 50/10/20',presetFlow:'Flow 90/15/25',trust_users:'ğŸŒ Used by 50,000+ users',trust_rating:'â­ 4.9/5 rating',trust_privacy:'ğŸ”’ 100% Private',trust_free:'ğŸš« No Ads, No Signup',features_title:'Pomodoro Features',f1_t:'100% Free & Private',f1_d:'No ads, no signup, no watermark. Everything runs locally in your browser. Your data never leaves your device.',f2_t:'Focus Timer Cycles',f2_d:'Switch automatically between work, short break, and long break phases.',f3_t:'Notification Reminder',f3_d:'Browser notifications remind you when each pomodoro phase ends.',f4_t:'Session Counter',f4_d:'Track completed focus rounds for study planning and productivity review.',faq_title:'Frequently Asked Questions',faq1_q:'What is pomodoro timer and why is it useful?',faq1_a:'Pomodoro timer is a focus technique that alternates work sessions and breaks. It helps maintain concentration, reduce burnout, and improve daily productivity.',faq2_q:'Can I customize work and break duration?',faq2_a:'Yes. You can set custom minutes for work, short break, and long break to match study or deep work routines.',faq3_q:'Does it support browser notifications?',faq3_a:'Yes. If notification permission is granted, this focus timer will alert you when session phase changes.',faq4_q:'Will timer keep running in background tab?',faq4_a:'Yes. Timer is based on JavaScript intervals and keeps counting in most background tab scenarios, then updates UI accordingly.',faq_free_q:'Is this tool really free with no ads?',faq_free_a:'Yes, 100% free with no ads, no registration, no watermark, and no usage limits. All processing happens locally in your browser â€” your data is never uploaded to any server.',related_title:'Related Tools',r1_t:'Metronome',r1_d:'Use stable rhythm for focused practice sessions.',r2_t:'Word Counter',r2_d:'Track writing output per pomodoro block.',r3_t:'World Clock',r3_d:'Coordinate focus sessions across time zones.',r4_t:'Calculator',r4_d:'Estimate daily focus hours and plans.'},
    'zh-CN':{back:'è¿”å›å·¥å…·ç®±',title:'ç•ªèŒ„é’Ÿè®¡æ—¶å™¨',subtitle:'é€šè¿‡ä¸“æ³¨ä¸ä¼‘æ¯å¾ªç¯æå‡æ•ˆç‡',caption:'ä¸€æ¬¡åªåšä¸€ä»¶äº‹ï¼Œä¸“æ³¨å°±ä¼šå åŠ ã€‚',start:'å¼€å§‹',pause:'æš‚åœ',reset:'é‡ç½®',skip:'è·³è¿‡é˜¶æ®µ',workMin:'ä¸“æ³¨æ—¶é•¿ï¼ˆåˆ†é’Ÿï¼‰',shortMin:'çŸ­ä¼‘æ¯ï¼ˆåˆ†é’Ÿï¼‰',longMin:'é•¿ä¼‘æ¯ï¼ˆåˆ†é’Ÿï¼‰',phaseWork:'ä¸“æ³¨é˜¶æ®µ',phaseShort:'çŸ­ä¼‘æ¯',phaseLong:'é•¿ä¼‘æ¯',cycle:'å¾ªç¯ {n}/4',sessions:'å·²å®Œæˆè½®æ¬¡ï¼š{n}',running:'è®¡æ—¶è¿›è¡Œä¸­...',paused:'è®¡æ—¶å·²æš‚åœ',resetDone:'è®¡æ—¶å·²é‡ç½®',skipDone:'å·²è·³è¿‡å½“å‰é˜¶æ®µ',presetApplied:'å·²åº”ç”¨é¢„è®¾',notifyTitle:'ç•ªèŒ„é’Ÿæé†’',shortcuts:'å¿«æ·é”®ï¼šç©ºæ ¼ å¼€å§‹/æš‚åœï¼ŒR é‡ç½®ï¼ŒS è·³è¿‡',presetClassic:'ç»å…¸ 25/5/15',presetSprint:'å†²åˆº 50/10/20',presetFlow:'æ·±åº¦ 90/15/25',trust_users:'ğŸŒ è¶…è¿‡ 50,000 ç”¨æˆ·ä½¿ç”¨',trust_rating:'â­ 4.9/5 å¥½è¯„',trust_privacy:'ğŸ”’ 100% éšç§å®‰å…¨',trust_free:'ğŸš« æ— å¹¿å‘Šã€æ— éœ€æ³¨å†Œ',features_title:'ç•ªèŒ„é’ŸåŠŸèƒ½ç‰¹ç‚¹',f1_t:'100% å…è´¹ä¸”å®‰å…¨',f1_d:'æ— å¹¿å‘Šã€æ— éœ€æ³¨å†Œã€æ— æ°´å°ã€‚æ‰€æœ‰å¤„ç†éƒ½åœ¨æµè§ˆå™¨æœ¬åœ°å®Œæˆï¼Œæ•°æ®ä¸ä¼šä¸Šä¼ åˆ°ä»»ä½•æœåŠ¡å™¨ã€‚',f2_t:'ä¸“æ³¨å¾ªç¯',f2_d:'è‡ªåŠ¨åœ¨ä¸“æ³¨ã€çŸ­ä¼‘æ¯ã€é•¿ä¼‘æ¯ä¹‹é—´åˆ‡æ¢ã€‚',f3_t:'é€šçŸ¥æé†’',f3_d:'é˜¶æ®µç»“æŸæ—¶é€šè¿‡æµè§ˆå™¨é€šçŸ¥æç¤ºä½ åˆ‡æ¢ã€‚',f4_t:'è½®æ¬¡ç»Ÿè®¡',f4_d:'è®°å½•å®Œæˆçš„ä¸“æ³¨è½®æ¬¡ï¼Œä¾¿äºå¤ç›˜ä¸è®¡åˆ’ã€‚',faq_title:'å¸¸è§é—®é¢˜',faq1_q:'ä»€ä¹ˆæ˜¯ç•ªèŒ„é’Ÿï¼Ÿä¸ºä»€ä¹ˆæœ‰æ•ˆï¼Ÿ',faq1_a:'ç•ªèŒ„é’Ÿé€šè¿‡â€œä¸“æ³¨ + ä¼‘æ¯â€å¾ªç¯æ¥ç®¡ç†æ³¨æ„åŠ›ã€‚å®ƒå¯ä»¥é™ä½ç–²åŠ³æ„Ÿï¼Œå¸®åŠ©ä½ æ›´ç¨³å®šåœ°å®Œæˆå­¦ä¹ å’Œå·¥ä½œä»»åŠ¡ã€‚',faq2_q:'å¯ä»¥è‡ªå®šä¹‰ä¸“æ³¨å’Œä¼‘æ¯æ—¶é•¿å—ï¼Ÿ',faq2_a:'å¯ä»¥ã€‚ä½ å¯ä»¥è‡ªå®šä¹‰ä¸“æ³¨ã€çŸ­ä¼‘æ¯å’Œé•¿ä¼‘æ¯æ—¶é—´ï¼Œé€‚é…ä¸åŒä»»åŠ¡èŠ‚å¥ã€‚',faq3_q:'æ”¯æŒæµè§ˆå™¨é€šçŸ¥æé†’å—ï¼Ÿ',faq3_a:'æ”¯æŒã€‚è‹¥ä½ æˆæƒé€šçŸ¥ï¼Œé˜¶æ®µåˆ‡æ¢æ—¶ä¼šå¼¹å‡ºæé†’ï¼Œé¿å…é”™è¿‡ä¼‘æ¯æˆ–å¼€å§‹æ—¶é—´ã€‚',faq4_q:'åˆ‡åˆ°åå°æ ‡ç­¾é¡µåè¿˜ä¼šè®¡æ—¶å—ï¼Ÿ',faq4_a:'ä¼šã€‚è®¡æ—¶åŸºäºæµè§ˆå™¨å®šæ—¶å™¨ï¼Œåœ¨å¤§å¤šæ•°åå°åœºæ™¯ä¾æ—§èƒ½æŒç»­è®¡æ—¶å¹¶åŒæ­¥ç•Œé¢ã€‚',faq_free_q:'è¿™ä¸ªå·¥å…·çœŸçš„å…è´¹ä¸”æ— å¹¿å‘Šå—ï¼Ÿ',faq_free_a:'æ˜¯çš„ï¼Œ100% å…è´¹ï¼Œæ— å¹¿å‘Šã€æ— éœ€æ³¨å†Œã€æ— æ°´å°ã€æ— é™åˆ¶ã€‚æ‰€æœ‰å¤„ç†éƒ½åœ¨æµè§ˆå™¨æœ¬åœ°å®Œæˆï¼Œä½ çš„æ•°æ®ä¸ä¼šä¸Šä¼ åˆ°ä»»ä½•æœåŠ¡å™¨ã€‚',related_title:'ç›¸å…³å·¥å…·',r1_t:'åœ¨çº¿èŠ‚æ‹å™¨',r1_d:'ç”¨ç¨³å®šèŠ‚å¥è¾…åŠ©ä¸“æ³¨ç»ƒä¹ ã€‚',r2_t:'å­—æ•°ç»Ÿè®¡',r2_d:'ç»Ÿè®¡æ¯ä¸ªç•ªèŒ„é’Ÿè¾“å‡ºã€‚',r3_t:'ä¸–ç•Œæ—¶é’Ÿ',r3_d:'è·¨æ—¶åŒºå®‰æ’ä¸“æ³¨æ—¶æ®µã€‚',r4_t:'è®¡ç®—å™¨',r4_d:'ä¼°ç®—æ¯æ—¥ä¸“æ³¨æ€»æ—¶é•¿ã€‚'},
    fr:{back:'Retour Ã  la boÃ®te Ã  outils',title:'Minuteur Pomodoro',subtitle:'AmÃ©liorez concentration avec cycles travail/pause',caption:'Une session a la fois, focus total.',start:'DÃ©marrer',pause:'Pause',reset:'RÃ©initialiser',skip:'Passer phase',workMin:'Travail (minutes)',shortMin:'Pause courte (minutes)',longMin:'Pause longue (minutes)',phaseWork:'Session de travail',phaseShort:'Pause courte',phaseLong:'Pause longue',cycle:'Cycle {n}/4',sessions:'Sessions terminÃ©es: {n}',running:'Minuteur en cours...',paused:'Minuteur en pause',resetDone:'Minuteur rÃ©initialisÃ©',skipDone:'Phase passÃ©e',presetApplied:'Preset appliquÃ©',notifyTitle:'Rappel Pomodoro',shortcuts:'Raccourcis: Espace start/pause, R reset, S skip',presetClassic:'Classique 25/5/15',presetSprint:'Sprint 50/10/20',presetFlow:'Flow 90/15/25',trust_users:'ğŸŒ UtilisÃ© par 50 000+ utilisateurs',trust_rating:'â­ Note 4.9/5',trust_privacy:'ğŸ”’ 100% PrivÃ©',trust_free:'ğŸš« Sans pub, sans inscription',features_title:'Fonctions Pomodoro',f1_t:'100% Gratuit et PrivÃ©',f1_d:'Sans publicitÃ©, sans inscription, sans filigrane. Tout est traitÃ© localement dans votre navigateur.',f2_t:'Cycles de focus',f2_d:'Alterne automatiquement travail et pauses.',f3_t:'Rappel notification',f3_d:'Notifications navigateur lors du changement de phase.',f4_t:'Compteur de sessions',f4_d:'Suivi des rounds de concentration terminÃ©s.',faq_title:'Questions frÃ©quentes',faq1_q:'Qu est ce qu un pomodoro timer et pourquoi utile ?',faq1_a:'Le pomodoro alterne sessions de travail et pauses. Cette methode aide a garder concentration et reduire fatigue.',faq2_q:'Puis je personnaliser durees ?',faq2_a:'Oui. Definissez vos propres minutes de travail, pause courte et pause longue.',faq3_q:'Supporte t il notifications navigateur ?',faq3_a:'Oui. Avec permission activee, le focus timer vous avertit a chaque changement de phase.',faq4_q:'Le timer continue en onglet arriere plan ?',faq4_a:'Oui. Le timer continue dans la plupart des cas et met l interface a jour ensuite.',faq_free_q:'Cet outil est-il vraiment gratuit et sans pub ?',faq_free_a:'Oui, 100% gratuit, sans publicitÃ©, sans inscription, sans filigrane et sans limites. Tout est traitÃ© localement dans votre navigateur â€” vos donnÃ©es ne sont jamais tÃ©lÃ©versÃ©es.',related_title:'Outils associÃ©s',r1_t:'MÃ©tronome',r1_d:'Rythme stable pour focus.',r2_t:'Compteur de mots',r2_d:'Mesurer production Ã©crite.',r3_t:'Horloge mondiale',r3_d:'Planifier sessions multi fuseaux.',r4_t:'Calculatrice',r4_d:'Estimer temps total de focus.'},
    es:{back:'Volver a la caja de herramientas',title:'Temporizador Pomodoro',subtitle:'Mejora foco con ciclos de trabajo y descanso',caption:'Una sesiÃ³n a la vez, foco total.',start:'Iniciar',pause:'Pausar',reset:'Reiniciar',skip:'Saltar fase',workMin:'Trabajo (minutos)',shortMin:'Descanso corto (minutos)',longMin:'Descanso largo (minutos)',phaseWork:'SesiÃ³n de trabajo',phaseShort:'Descanso corto',phaseLong:'Descanso largo',cycle:'Ciclo {n}/4',sessions:'Sesiones completadas: {n}',running:'Temporizador en marcha...',paused:'Temporizador en pausa',resetDone:'Temporizador reiniciado',skipDone:'Fase omitida',presetApplied:'Preset aplicado',notifyTitle:'Aviso Pomodoro',shortcuts:'Atajos: Espacio iniciar/pausar, R reiniciar, S saltar',presetClassic:'ClÃ¡sico 25/5/15',presetSprint:'Sprint 50/10/20',presetFlow:'Flow 90/15/25',trust_users:'ğŸŒ Usado por mÃ¡s de 50,000 usuarios',trust_rating:'â­ CalificaciÃ³n 4.9/5',trust_privacy:'ğŸ”’ 100% Privado',trust_free:'ğŸš« Sin anuncios, sin registro',features_title:'Funciones Pomodoro',f1_t:'100% Gratis y Privado',f1_d:'Sin anuncios, sin registro, sin marca de agua. Todo se procesa localmente en tu navegador.',f2_t:'Ciclos de enfoque',f2_d:'Alterna automÃ¡ticamente trabajo y descansos.',f3_t:'Recordatorio por notificaciÃ³n',f3_d:'Notificaciones del navegador al cambiar fase.',f4_t:'Contador de sesiones',f4_d:'Seguimiento de rondas de enfoque completadas.',faq_title:'Preguntas frecuentes',faq1_q:'Â¿QuÃ© es pomodoro timer y por quÃ© sirve?',faq1_a:'Pomodoro alterna sesiones de trabajo y descansos. Ayuda a mantener concentraciÃ³n y reducir fatiga durante el dÃ­a.',faq2_q:'Â¿Puedo personalizar duraciones?',faq2_a:'SÃ­. Puedes configurar minutos de trabajo, descanso corto y largo segÃºn tu rutina.',faq3_q:'Â¿Soporta notificaciones del navegador?',faq3_a:'SÃ­. Si autorizas notificaciones, este focus timer te avisarÃ¡ al cambiar de fase.',faq4_q:'Â¿Sigue contando en pestaÃ±a en segundo plano?',faq4_a:'SÃ­. El temporizador sigue contando en la mayorÃ­a de escenarios de pestaÃ±a en segundo plano.',faq_free_q:'Â¿Esta herramienta es realmente gratis y sin anuncios?',faq_free_a:'SÃ­, 100% gratis, sin anuncios, sin registro, sin marca de agua y sin lÃ­mites. Todo el procesamiento ocurre localmente en tu navegador: tus datos nunca se suben a ningÃºn servidor.',related_title:'Herramientas relacionadas',r1_t:'MetrÃ³nomo',r1_d:'Ritmo estable para prÃ¡cticas de foco.',r2_t:'Contador de palabras',r2_d:'Mide producciÃ³n por pomodoro.',r3_t:'Reloj mundial',r3_d:'Coordina sesiones en zonas horarias.',r4_t:'Calculadora',r4_d:'Calcula horas de enfoque diarias.'}
  };

  var CIRC = 2 * Math.PI * 120;
  var currentLang = localStorage.getItem('pomodoro_lang') || 'en';
  var phase = 'work';
  var timerInt = null;
  var remaining = 1500;
  var phaseTotal = 1500;
  var workDone = 0;
  var running = false;
  var endAt = 0;
  var prevDisplay = '';

  var progressCircle = document.getElementById('progressCircle');
  var timerOrb = document.getElementById('timerOrb');
  progressCircle.style.strokeDasharray = String(CIRC);

  function t(k){
    var d=i18n[currentLang]||i18n.en;
    return d[k]||i18n.en[k]||k;
  }

  function minutes(id, def){
    var v = parseInt(document.getElementById(id).value, 10);
    return isNaN(v) || v < 1 ? def : v;
  }

  function format(sec){
    var m = Math.floor(sec/60), s = sec%60;
    return String(m).padStart(2,'0') + ':' + String(s).padStart(2,'0');
  }

  function setStatus(v){
    document.getElementById('status').textContent = v || '';
  }

  function updateProgress(){
    var ratio = phaseTotal > 0 ? remaining / phaseTotal : 0;
    ratio = Math.max(0, Math.min(1, ratio));
    progressCircle.style.strokeDashoffset = String(CIRC * (1 - ratio));
    if(phase === 'work') progressCircle.style.stroke = 'var(--ring-work)';
    else if(phase === 'short') progressCircle.style.stroke = 'var(--ring-short)';
    else progressCircle.style.stroke = 'var(--ring-long)';
  }

  function updateModeChips(){
    ['chipWork','chipShort','chipLong'].forEach(function(id){
      document.getElementById(id).classList.remove('active');
    });
    if(phase === 'work') document.getElementById('chipWork').classList.add('active');
    if(phase === 'short') document.getElementById('chipShort').classList.add('active');
    if(phase === 'long') document.getElementById('chipLong').classList.add('active');
  }

  function updateUI(){
    var timerEl = document.getElementById('timer');
    var nextDisplay = format(remaining);
    if(nextDisplay !== prevDisplay){
      timerEl.classList.remove('tick');
      void timerEl.offsetWidth;
      timerEl.classList.add('tick');
      prevDisplay = nextDisplay;
    }
    timerEl.textContent = nextDisplay;
    document.getElementById('phaseLabel').textContent = phase === 'work' ? t('phaseWork') : (phase === 'short' ? t('phaseShort') : t('phaseLong'));
    document.getElementById('sessions').textContent = t('sessions').replace('{n}', String(workDone));
    document.getElementById('cycleLabel').textContent = t('cycle').replace('{n}', String((workDone % 4) + 1));
    updateModeChips();
    updateProgress();
  }

  function spawnSparks(){
    var colors = ['#7dd3fc', '#22c55e', '#fbbf24', '#38bdf8'];
    for(var i=0;i<16;i++){
      var spark = document.createElement('span');
      var angle = (Math.PI * 2 * i / 16) + (Math.random() * .45);
      var distance = 58 + Math.random() * 86;
      spark.className = 'spark';
      spark.style.setProperty('--dx', (Math.cos(angle) * distance).toFixed(2) + 'px');
      spark.style.setProperty('--dy', (Math.sin(angle) * distance).toFixed(2) + 'px');
      spark.style.color = colors[i % colors.length];
      spark.style.background = colors[i % colors.length];
      timerOrb.appendChild(spark);
      setTimeout(function(node){
        return function(){ if(node && node.parentNode) node.parentNode.removeChild(node); };
      }(spark), 950);
    }
  }

  function applyLanguage(lang){
    currentLang = i18n[lang] ? lang : 'en';
    localStorage.setItem('pomodoro_lang', currentLang);
    document.documentElement.lang = currentLang;
    document.getElementById('langCurrent').textContent = langNames[currentLang];
    document.querySelectorAll('[data-i18n]').forEach(function(el){
      el.textContent = t(el.getAttribute('data-i18n'));
    });
    updateUI();
  }

  function resetPhaseDuration(){
    if(phase === 'work') phaseTotal = minutes('workMin',25) * 60;
    else if(phase === 'short') phaseTotal = minutes('shortMin',5) * 60;
    else phaseTotal = minutes('longMin',15) * 60;
    remaining = phaseTotal;
  }

  function notify(msg){
    if('Notification' in window){
      if(Notification.permission === 'granted'){
        new Notification(t('notifyTitle'),{ body: msg });
      } else if(Notification.permission !== 'denied'){
        Notification.requestPermission();
      }
    }
  }

  function beginCountdown(){
    clearInterval(timerInt);
    endAt = Date.now() + (remaining * 1000);
    timerInt = setInterval(function(){
      var secLeft = Math.max(0, Math.ceil((endAt - Date.now()) / 1000));
      remaining = secLeft;
      updateUI();
      if(secLeft <= 0){
        nextPhase();
        if(running){ beginCountdown(); }
      }
    }, 250);
  }

  function nextPhase(){
    if(phase === 'work'){
      workDone++;
      phase = (workDone % 4 === 0) ? 'long' : 'short';
    } else {
      phase = 'work';
    }
    resetPhaseDuration();
    updateUI();
    spawnSparks();
    notify(document.getElementById('phaseLabel').textContent);
  }

  function start(){
    if(running) return;
    running = true;
    timerOrb.classList.add('running');
    setStatus(t('running'));
    beginCountdown();
  }

  function pause(){
    if(!running) return;
    running = false;
    timerOrb.classList.remove('running');
    clearInterval(timerInt);
    var secLeft = Math.max(0, Math.ceil((endAt - Date.now()) / 1000));
    remaining = secLeft;
    updateUI();
    setStatus(t('paused'));
  }

  function reset(){
    running = false;
    timerOrb.classList.remove('running');
    clearInterval(timerInt);
    phase = 'work';
    workDone = 0;
    resetPhaseDuration();
    updateUI();
    setStatus(t('resetDone'));
  }

  function skip(){
    nextPhase();
    if(running){ beginCountdown(); }
    setStatus(t('skipDone'));
  }

  function applyPreset(type){
    if(type === 'classic'){
      document.getElementById('workMin').value = '25';
      document.getElementById('shortMin').value = '5';
      document.getElementById('longMin').value = '15';
    } else if(type === 'sprint'){
      document.getElementById('workMin').value = '50';
      document.getElementById('shortMin').value = '10';
      document.getElementById('longMin').value = '20';
    } else {
      document.getElementById('workMin').value = '90';
      document.getElementById('shortMin').value = '15';
      document.getElementById('longMin').value = '25';
    }
    if(!running){
      resetPhaseDuration();
      updateUI();
    }
    setStatus(t('presetApplied'));
  }

  document.getElementById('startBtn').addEventListener('click', start);
  document.getElementById('pauseBtn').addEventListener('click', pause);
  document.getElementById('resetBtn').addEventListener('click', reset);
  document.getElementById('skipBtn').addEventListener('click', skip);

  ['workMin','shortMin','longMin'].forEach(function(id){
    document.getElementById(id).addEventListener('change', function(){
      if(!running){
        resetPhaseDuration();
        updateUI();
      }
    });
  });

  document.querySelectorAll('.preset-btn').forEach(function(btn){
    btn.addEventListener('click', function(){
      applyPreset(btn.getAttribute('data-preset'));
    });
  });

  document.getElementById('langCurrent').addEventListener('click', function(e){
    e.stopPropagation();
    document.getElementById('langDropdown').classList.toggle('open');
  });

  document.querySelectorAll('.lang-btn').forEach(function(btn){
    btn.addEventListener('click', function(e){
      e.stopPropagation();
      applyLanguage(btn.getAttribute('data-lang'));
      document.getElementById('langDropdown').classList.remove('open');
    });
  });

  document.addEventListener('click', function(){
    document.getElementById('langDropdown').classList.remove('open');
  });

  document.querySelectorAll('.faq-q').forEach(function(btn){
    btn.addEventListener('click', function(){
      var item = btn.parentElement;
      var open = item.classList.contains('active');
      document.querySelectorAll('.faq-item').forEach(function(it){ it.classList.remove('active'); });
      if(!open) item.classList.add('active');
    });
  });

  document.addEventListener('keydown', function(e){
    if(e.target && (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA')) return;
    if(e.code === 'Space'){
      e.preventDefault();
      if(running) pause(); else start();
    } else if(e.key === 'r' || e.key === 'R'){
      reset();
    } else if(e.key === 's' || e.key === 'S'){
      skip();
    }
  });

  resetPhaseDuration();
  updateUI();
  applyLanguage(currentLang);
})();
</script>
</body>
</html>
