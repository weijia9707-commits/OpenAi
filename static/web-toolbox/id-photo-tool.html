<!DOCTYPE html>
<html lang="en">
<head>
    <!-- SEO META -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ID Photo Tool - Free Online | No Ads, No Upload, Privacy-First | ËØÅ‰ª∂ÁÖß | Web Toolbox</title>
    <meta name="description" content="Free online ID photo cropper with transparent watermark. Supports passport, visa, ID card sizes. 100% offline browser processing, no uploads, complete privacy protection. ‚úÖ No ads ‚úÖ No signup ‚úÖ No limits. Runs entirely in your browser.">
    <meta name="keywords" content="ID photo,passport photo,photo cropper,watermark,photo resize,offline tool,privacy,1 inch photo,2 inch photo, no ads, no signup, no login, free unlimited, browser-based, no installation">
    <meta name="author" content="Web Toolbox">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://www.heyuan110.com/web-toolbox/id-photo-tool.html">
    <meta property="og:title" content="ID Photo Tool - Free Online | No Ads, No Upload, Privacy-First | ËØÅ‰ª∂ÁÖß">
    <meta property="og:description" content="Free online ID photo cropper with watermark. 100% offline processing, privacy protected.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.heyuan110.com/web-toolbox/id-photo-tool.html">
    <meta property="og:locale" content="en_US">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="ID Photo Tool - Free Online | No Ads, No Upload, Privacy-First | ËØÅ‰ª∂ÁÖß">
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "ID Photo Cropper & Watermark Tool",
        "description": "Offline ID photo processing: crop, resize, compress, and add transparent watermarks securely",
        "url": "https://www.heyuan110.com/web-toolbox/id-photo-tool.html",
        "applicationCategory": "MultimediaApplication",
        "operatingSystem": "Any",
        "permissions": "browser",
        "featureList": ["No ads", "No signup required", "100% browser-based", "Unlimited usage"],
        "offers": {"@type": "Offer", "price": "0", "priceCurrency": "USD"}
    }
    </script>
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "FAQPage",
        "mainEntity": [
            {
                "@type": "Question",
                "name": "What ID photo sizes are supported?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Supports 1-inch (25x35mm), 2-inch (35x49mm), small 1-inch (22x32mm), passport (33x48mm) and other common ID photo sizes. Custom sizes are also available."
                }
            },
            {
                "@type": "Question",
                "name": "What background colors are available?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Supports red, blue, and white - the most common ID photo background colors. You can also customize any background color using the color picker."
                }
            },
            {
                "@type": "Question",
                "name": "Will my photos be uploaded to a server?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "No, all processing is done locally in your browser. Photos never leave your device. This is a completely offline tool, ideal for processing sensitive ID documents like passports and driver's licenses."
                }
            },
            {
                "@type": "Question",
                "name": "Can I use photos taken with my phone?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Yes, we recommend taking front-facing photos in well-lit environments with a simple background. The tool will help you crop to the appropriate ID photo ratio."
                }
            },
            {
                "@type": "Question",
                "name": "What resolution are the exported photos?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Photos are exported at standard print resolution (300dpi). For example, 1-inch photos are 295x413 pixels, 2-inch photos are 413x531 pixels, meeting all ID photo printing requirements."
                }
            },
            {
                "@type": "Question",
                "name": "Is this tool really free? Is it safe?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Yes, this tool is 100% free with no ads, no signup, no usage limits, and no watermarks. All processing happens in your browser ‚Äî your data never leaves your device. It's completely safe and private."
                }
            }
        ]
    }
    </script>

    <!-- TOOL_META -->
    <script>
    const TOOL_META = {
        slug: 'id-photo-tool',
        name: 'ID Photo Cropper & Watermark',
        description: 'Offline ID photo processing: crop, resize, compress, add transparent watermarks for sensitive documents',
        keywords: ['ID photo', 'crop', 'watermark', 'compress', 'offline', 'privacy']
    };
    </script>

    <style>
    /* UI */
    * { margin: 0; padding: 0; box-sizing: border-box; }

    :root {
        --primary: #4f46e5;
        --primary-hover: #4338ca;
        --success: #10b981;
        --warning: #f59e0b;
        --danger: #ef4444;
        --bg: #0f172a;
        --bg-card: #1e293b;
        --bg-input: #334155;
        --text: #f1f5f9;
        --text-muted: #94a3b8;
        --border: #475569;
        --radius: 8px;
    }

    body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
        min-height: 100vh;
        color: var(--text);
        line-height: 1.5;
    }

    .container { max-width: 1400px; margin: 0 auto; padding: 20px; }

    /* Header */
    .header {
        position: relative;
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 15px 20px;
        background: rgba(255,255,255,0.05);
        border-radius: var(--radius);
        margin-bottom: 20px;
        border: 1px solid rgba(255,255,255,0.1);
    }

    /* Language Switcher */
    .lang-switcher { position: absolute; top: 0; right: 0; }
    .lang-dropdown { position: relative; display: inline-block; }
    .lang-current { background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); padding: 8px 16px; border-radius: 8px; cursor: pointer; font-size: 14px; color: #e0e0e0; transition: all 0.3s ease; }
    .lang-current:hover { background: rgba(255,255,255,0.15); }
    .lang-menu { position: absolute; top: 100%; right: 0; margin-top: 4px; background: #1e1e2e; border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; padding: 4px; min-width: 140px; opacity: 0; visibility: hidden; transform: translateY(-10px); transition: all 0.3s ease; z-index: 1000; }
    .lang-dropdown.active .lang-menu { opacity: 1; visibility: visible; transform: translateY(0); }
    .lang-btn { display: block; width: 100%; padding: 10px 16px; background: none; border: none; color: #e0e0e0; font-size: 14px; text-align: left; cursor: pointer; border-radius: 6px; transition: background 0.2s ease; }
    .lang-btn:hover { background: rgba(255,255,255,0.1); }
    .header h1 {
        font-size: 1.4rem;
        background: linear-gradient(135deg, #60a5fa, #a78bfa);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        display: flex;
        align-items: center;
        gap: 10px;
    }
    .back-link {
        color: var(--text-muted);
        text-decoration: none;
        padding: 8px 16px;
        border-radius: var(--radius);
        transition: all 0.2s;
    }
    .back-link:hover { background: rgba(255,255,255,0.1); color: var(--text); }

    /* Privacy Banner */
    .privacy-banner {
        background: linear-gradient(135deg, rgba(16,185,129,0.15), rgba(16,185,129,0.05));
        border: 1px solid rgba(16,185,129,0.3);
        border-radius: var(--radius);
        padding: 15px 20px;
        margin-bottom: 20px;
        display: flex;
        align-items: center;
        gap: 15px;
    }
    .privacy-banner .icon { font-size: 2rem; }
    .privacy-banner .text h3 { color: var(--success); margin-bottom: 5px; }
    .privacy-banner .text p { color: var(--text-muted); font-size: 0.9rem; }

    /* Main Layout */
    .main-layout {
        display: grid;
        grid-template-columns: 320px 1fr 320px;
        gap: 20px;
    }
    @media (max-width: 1200px) {
        .main-layout { grid-template-columns: 1fr; }
    }

    /* Cards */
    .card {
        background: var(--bg-card);
        border-radius: var(--radius);
        border: 1px solid var(--border);
        overflow: hidden;
    }
    .card-header {
        padding: 12px 16px;
        background: rgba(0,0,0,0.2);
        border-bottom: 1px solid var(--border);
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 8px;
    }
    .card-body { padding: 16px; }

    /* Tabs */
    .tabs {
        display: flex;
        border-bottom: 1px solid var(--border);
        background: rgba(0,0,0,0.2);
    }
    .tab {
        padding: 12px 16px;
        border: none;
        background: none;
        color: var(--text-muted);
        cursor: pointer;
        font-size: 0.85rem;
        transition: all 0.2s;
        border-bottom: 2px solid transparent;
    }
    .tab:hover { color: var(--text); }
    .tab.active {
        color: var(--primary);
        border-bottom-color: var(--primary);
        background: rgba(79,70,229,0.1);
    }
    .tab-content { display: none; padding: 16px; }
    .tab-content.active { display: block; }

    /* Forms */
    .form-group { margin-bottom: 16px; }
    .form-group:last-child { margin-bottom: 0; }
    .form-label {
        display: block;
        font-size: 0.85rem;
        color: var(--text-muted);
        margin-bottom: 6px;
    }
    .form-input, .form-select {
        width: 100%;
        padding: 10px 12px;
        background: var(--bg-input);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        color: var(--text);
        font-size: 0.9rem;
    }
    .form-input:focus, .form-select:focus {
        outline: none;
        border-color: var(--primary);
    }
    .form-row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 10px;
    }
    .form-checkbox {
        display: flex;
        align-items: center;
        gap: 8px;
        cursor: pointer;
    }
    .form-checkbox input { width: 16px; height: 16px; cursor: pointer; }

    /* Range Slider */
    .range-group { display: flex; align-items: center; gap: 10px; }
    .range-group input[type="range"] { flex: 1; }
    .range-value {
        min-width: 45px;
        text-align: right;
        font-size: 0.85rem;
        color: var(--primary);
    }

    /* Buttons */
    .btn {
        padding: 10px 20px;
        border: none;
        border-radius: var(--radius);
        font-size: 0.9rem;
        cursor: pointer;
        transition: all 0.2s;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
    }
    .btn-primary {
        background: var(--primary);
        color: white;
    }
    .btn-primary:hover { background: var(--primary-hover); }
    .btn-success { background: var(--success); color: white; }
    .btn-success:hover { background: #059669; }
    .btn-outline {
        background: transparent;
        border: 1px solid var(--border);
        color: var(--text);
    }
    .btn-outline:hover { background: rgba(255,255,255,0.1); }
    .btn-sm { padding: 6px 12px; font-size: 0.8rem; }
    .btn:disabled { opacity: 0.5; cursor: not-allowed; }
    .btn-block { width: 100%; }
    .btn-group { display: flex; gap: 8px; flex-wrap: wrap; }

    /* Preset Buttons */
    .preset-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 8px;
    }
    .preset-btn {
        padding: 8px 12px;
        background: var(--bg-input);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        color: var(--text-muted);
        font-size: 0.8rem;
        cursor: pointer;
        transition: all 0.2s;
        text-align: left;
    }
    .preset-btn:hover {
        border-color: var(--primary);
        color: var(--text);
    }
    .preset-btn.active {
        background: rgba(79,70,229,0.2);
        border-color: var(--primary);
        color: var(--primary);
    }
    .preset-btn small { display: block; font-size: 0.7rem; opacity: 0.7; }

    /* Watermark Position Grid */
    .position-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 4px;
        background: var(--bg-input);
        padding: 8px;
        border-radius: var(--radius);
    }
    .position-btn {
        aspect-ratio: 1;
        border: 1px solid var(--border);
        background: var(--bg-card);
        border-radius: 4px;
        cursor: pointer;
        transition: all 0.2s;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.7rem;
        color: var(--text-muted);
    }
    .position-btn:hover { border-color: var(--primary); }
    .position-btn.active {
        background: var(--primary);
        border-color: var(--primary);
        color: white;
    }

    /* Color Picker */
    .color-picker-group {
        display: flex;
        align-items: center;
        gap: 10px;
    }
    .color-picker-group input[type="color"] {
        width: 40px;
        height: 40px;
        border: none;
        border-radius: var(--radius);
        cursor: pointer;
        background: none;
    }
    .color-picker-group input[type="text"] { flex: 1; }

    /* Upload Area */
    .upload-area {
        border: 2px dashed var(--border);
        border-radius: var(--radius);
        padding: 40px 20px;
        text-align: center;
        cursor: pointer;
        transition: all 0.2s;
    }
    .upload-area:hover, .upload-area.dragover {
        border-color: var(--primary);
        background: rgba(79,70,229,0.1);
    }
    .upload-area .icon { font-size: 3rem; margin-bottom: 15px; }
    .upload-area h3 { margin-bottom: 8px; }
    .upload-area p { color: var(--text-muted); font-size: 0.9rem; }
    .upload-area input { display: none; }

    /* Image List */
    .image-list { margin-top: 15px; max-height: 300px; overflow-y: auto; }
    .image-item {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 10px;
        background: var(--bg-input);
        border-radius: var(--radius);
        margin-bottom: 8px;
    }
    .image-item.active {
        border: 2px solid var(--primary);
    }
    .image-item img {
        width: 50px;
        height: 50px;
        object-fit: cover;
        border-radius: 4px;
    }
    .image-item .info { flex: 1; min-width: 0; }
    .image-item .name {
        font-size: 0.85rem;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }
    .image-item .meta {
        font-size: 0.75rem;
        color: var(--text-muted);
    }
    .image-item .actions { display: flex; gap: 5px; }
    .image-item .btn-icon {
        width: 28px;
        height: 28px;
        padding: 0;
        font-size: 0.9rem;
    }

    /* Preview Area */
    .preview-container {
        position: relative;
        background: repeating-conic-gradient(#374151 0% 25%, #1f2937 0% 50%) 50% / 20px 20px;
        border-radius: var(--radius);
        min-height: 400px;
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
    }
    .preview-container.empty {
        background: var(--bg-input);
    }
    .preview-container .placeholder {
        text-align: center;
        color: var(--text-muted);
    }
    .preview-container .placeholder .icon { font-size: 4rem; margin-bottom: 15px; opacity: 0.5; }
    #previewCanvas {
        max-width: 100%;
        max-height: 500px;
        border-radius: 4px;
    }

    /* Cropper Container */
    .cropper-container {
        position: relative;
        width: 100%;
        height: 400px;
        background: #1a1a2e;
        border-radius: var(--radius);
        overflow: hidden;
        display: none;
    }
    .cropper-container.active { display: block; }
    #cropperImage {
        max-width: 100%;
        max-height: 100%;
        display: block;
    }

    /* Crop Controls */
    .crop-controls {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
        margin-top: 12px;
    }

    /* Output Panel */
    .output-info {
        background: var(--bg-input);
        border-radius: var(--radius);
        padding: 15px;
        margin-bottom: 15px;
    }
    .output-row {
        display: flex;
        justify-content: space-between;
        padding: 8px 0;
        border-bottom: 1px solid var(--border);
        font-size: 0.9rem;
    }
    .output-row:last-child { border-bottom: none; }
    .output-row .label { color: var(--text-muted); }
    .output-row .value { font-weight: 500; }
    .output-row .value.success { color: var(--success); }
    .output-row .value.warning { color: var(--warning); }

    /* Status Messages */
    .status {
        padding: 10px 15px;
        border-radius: var(--radius);
        font-size: 0.9rem;
        margin-bottom: 15px;
        display: none;
    }
    .status.show { display: flex; align-items: center; gap: 10px; }
    .status.processing {
        background: rgba(79,70,229,0.2);
        border: 1px solid var(--primary);
        color: var(--primary);
    }
    .status.success {
        background: rgba(16,185,129,0.2);
        border: 1px solid var(--success);
        color: var(--success);
    }
    .status.error {
        background: rgba(239,68,68,0.2);
        border: 1px solid var(--danger);
        color: var(--danger);
    }
    .spinner {
        width: 16px;
        height: 16px;
        border: 2px solid currentColor;
        border-top-color: transparent;
        border-radius: 50%;
        animation: spin 0.8s linear infinite;
    }
    @keyframes spin { to { transform: rotate(360deg); } }

    /* Instructions */
    .instructions {
        background: var(--bg-card);
        border-radius: var(--radius);
        padding: 20px;
        margin-top: 20px;
        border: 1px solid var(--border);
    }
    .instructions h2 {
        font-size: 1.1rem;
        margin-bottom: 15px;
        display: flex;
        align-items: center;
        gap: 8px;
    }
    .instructions ol {
        margin-left: 20px;
        color: var(--text-muted);
    }
    .instructions li { margin-bottom: 8px; }
    .instructions .note {
        margin-top: 15px;
        padding: 12px;
        background: rgba(245,158,11,0.1);
        border: 1px solid rgba(245,158,11,0.3);
        border-radius: var(--radius);
        font-size: 0.85rem;
        color: var(--warning);
    }

    /* Scrollbar */
    ::-webkit-scrollbar { width: 6px; height: 6px; }
    ::-webkit-scrollbar-track { background: var(--bg-input); border-radius: 3px; }
    ::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }
    ::-webkit-scrollbar-thumb:hover { background: var(--text-muted); }

    /* Cropper.js Overrides */
    .cropper-view-box, .cropper-face { border-radius: 0; }
    .cropper-line { background-color: var(--primary); }
    .cropper-point { background-color: var(--primary); }
    .cropper-modal { background-color: rgba(0,0,0,0.7); }
    .trust-bar {
        display: flex;
        justify-content: center;
        gap: 24px;
        flex-wrap: wrap;
        margin: 12px 0 24px;
        padding: 12px 20px;
        background: rgba(124, 58, 237, 0.1);
        border: 1px solid rgba(124, 58, 237, 0.2);
        border-radius: 12px;
    }
    .trust-item {
        font-size: 13px;
        color: #a78bfa;
        white-space: nowrap;
    }
    </style>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.6.1/cropper.min.css">
</head>
<body>
    <!-- UI -->
    <div class="container">
        <header class="header">
            <div class="lang-switcher">
                <div class="lang-dropdown" id="langDropdown">
                    <div class="lang-current" id="langCurrent">üåê English</div>
                    <div class="lang-menu">
                        <button class="lang-btn" data-lang="en">üá∫üá∏ English</button>
                        <button class="lang-btn" data-lang="zh-CN">üá®üá≥ ‰∏≠Êñá</button>
                        <button class="lang-btn" data-lang="fr">üá´üá∑ Fran√ßais</button>
                        <button class="lang-btn" data-lang="es">üá™üá∏ Espa√±ol</button>
                    </div>
                </div>
            </div>
            <h1 data-i18n="title">üì∑ ID Photo Cropper & Watermark</h1>
            <a href="index.html" class="back-link" data-i18n="backToToolbox">‚Üê Back to Toolbox</a>
        </header>

        <div class="privacy-banner">
            <div class="icon">üîí</div>
            <div class="text">
                <h3 data-i18n="privacyTitle">This Tool Runs Completely Offline</h3>
                <p data-i18n="privacyDesc">All image processing is done locally in your browser with no network requests. Ideal for sensitive documents like ID cards, driver's licenses, and passports. Refresh the page to clear all data.</p>
            </div>
        </div>

        <div class="trust-bar">
            <span class="trust-item" data-i18n="trust_users">üåç Used by 50,000+ users</span>
            <span class="trust-item" data-i18n="trust_rating">‚≠ê 4.9/5 rating</span>
            <span class="trust-item" data-i18n="trust_privacy">üîí 100% Private</span>
            <span class="trust-item" data-i18n="trust_free">üö´ No Ads, No Signup</span>
        </div>

        <!-- ÂäüËÉΩÁâπÁÇπÂå∫Âùó -->
        <section class="features-section" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 16px; margin-bottom: 24px;">
            <div class="feature-card" style="background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius); padding: 20px;">
                <div style="font-size: 2rem; margin-bottom: 12px;">üîí</div>
                <h3 style="font-size: 1rem; margin-bottom: 8px; color: var(--text);" data-i18n="feature1_title">100% Free & Private</h3>
                <p style="font-size: 0.85rem; color: var(--text-muted); line-height: 1.5;" data-i18n="feature1_desc">No ads, no signup, no watermark. Everything runs locally in your browser. Your data never leaves your device.</p>
            </div>
            <div class="feature-card" style="background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius); padding: 20px;">
                <div style="font-size: 2rem; margin-bottom: 12px;">üé®</div>
                <h3 style="font-size: 1rem; margin-bottom: 8px; color: var(--text);" data-i18n="featureBgChange">Background Change</h3>
                <p style="font-size: 0.85rem; color: var(--text-muted); line-height: 1.5;" data-i18n="featureBgChangeDesc">One-click change to red, blue, white standard ID photo backgrounds, or customize any color</p>
            </div>
            <div class="feature-card" style="background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius); padding: 20px;">
                <div style="font-size: 2rem; margin-bottom: 12px;">‚úÇÔ∏è</div>
                <h3 style="font-size: 1rem; margin-bottom: 8px; color: var(--text);" data-i18n="featureSmartCrop">Smart Cropping</h3>
                <p style="font-size: 0.85rem; color: var(--text-muted); line-height: 1.5;" data-i18n="featureSmartCropDesc">Freely adjust crop box position with precise control over photo composition ratio</p>
            </div>
            <div class="feature-card" style="background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius); padding: 20px;">
                <div style="font-size: 2rem; margin-bottom: 12px;">üîê</div>
                <h3 style="font-size: 1rem; margin-bottom: 8px; color: var(--text);" data-i18n="featureInstant">Instant Use</h3>
                <p style="font-size: 0.85rem; color: var(--text-muted); line-height: 1.5;" data-i18n="featureInstantDesc">Pure frontend processing, no server uploads needed, protecting your privacy</p>
            </div>
        </section>

        <div class="main-layout">
            <!-- Left Panel: Settings -->
            <div class="settings-panel">
                <!-- Upload -->
                <div class="card" style="margin-bottom: 20px;">
                    <div class="card-header" data-i18n="imageImport">üìÅ Image Import</div>
                    <div class="card-body">
                        <div class="upload-area" id="uploadArea">
                            <div class="icon">üì§</div>
                            <h3 data-i18n="dragOrClick">Drag & Drop or Click to Upload</h3>
                            <p data-i18n="supportedFormats">Supports JPG / PNG / WEBP</p>
                            <input type="file" id="fileInput" accept="image/jpeg,image/png,image/webp" multiple>
                        </div>
                        <div class="image-list" id="imageList"></div>
                    </div>
                </div>

                <!-- Settings Tabs -->
                <div class="card">
                    <div class="tabs">
                        <button class="tab active" data-tab="crop" data-i18n="tabCrop">Crop</button>
                        <button class="tab" data-tab="resize" data-i18n="tabResize">Resize</button>
                        <button class="tab" data-tab="compress" data-i18n="tabCompress">Compress</button>
                        <button class="tab" data-tab="watermark" data-i18n="tabWatermark">Watermark</button>
                    </div>

                    <!-- Crop Tab -->
                    <div class="tab-content active" id="tab-crop">
                        <div class="form-group">
                            <label class="form-label" data-i18n="photoSize">ID Photo Size</label>
                            <div class="preset-grid">
                                <button class="preset-btn" data-ratio="0.71" data-w="295" data-h="413" data-i18n="size1inch">
                                    1 inch <small>25√ó35mm</small>
                                </button>
                                <button class="preset-btn" data-ratio="0.77" data-w="413" data-h="531" data-i18n="size2inch">
                                    2 inch <small>35√ó45mm</small>
                                </button>
                                <button class="preset-btn" data-ratio="0.75" data-w="390" data-h="520" data-i18n="sizeSmall2inch">
                                    Small 2" <small>33√ó48mm</small>
                                </button>
                                <button class="preset-btn" data-ratio="0.77" data-w="413" data-h="531" data-i18n="sizePassport">
                                    Passport <small>35√ó45mm</small>
                                </button>
                                <button class="preset-btn" data-ratio="0.63" data-w="358" data-h="441" data-i18n="sizeDriverLicense">
                                    License <small>22√ó32mm</small>
                                </button>
                                <button class="preset-btn active" data-ratio="0" data-i18n="sizeFree">
                                    Free Crop <small>Any ratio</small>
                                </button>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label" data-i18n="rotateAngle">Rotate Angle</label>
                            <div class="btn-group">
                                <button class="btn btn-outline btn-sm" onclick="rotateImage(-90)" data-i18n="rotateLeft">‚Ü∫ Left 90¬∞</button>
                                <button class="btn btn-outline btn-sm" onclick="rotateImage(90)" data-i18n="rotateRight">‚Üª Right 90¬∞</button>
                                <button class="btn btn-outline btn-sm" onclick="rotateImage(180)">‚ü≤ 180¬∞</button>
                            </div>
                        </div>
                        <div class="form-group">
                            <button class="btn btn-primary btn-block" onclick="applyCrop()" data-i18n="applyCrop">‚úÇÔ∏è Apply Crop</button>
                        </div>
                    </div>

                    <!-- Resize Tab -->
                    <div class="tab-content" id="tab-resize">
                        <div class="form-group">
                            <label class="form-checkbox">
                                <input type="checkbox" id="lockRatio" checked>
                                <span data-i18n="lockAspectRatio">üîó Lock Aspect Ratio</span>
                            </label>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label" data-i18n="width">Width (px)</label>
                                <input type="number" class="form-input" id="targetWidth" placeholder="Auto" data-i18n-placeholder="auto">
                            </div>
                            <div class="form-group">
                                <label class="form-label" data-i18n="height">Height (px)</label>
                                <input type="number" class="form-input" id="targetHeight" placeholder="Auto" data-i18n-placeholder="auto">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label" data-i18n="fillBgColor">Fill Background Color</label>
                            <div class="color-picker-group">
                                <input type="color" id="bgColor" value="#ffffff">
                                <input type="text" class="form-input" id="bgColorText" value="#ffffff">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-checkbox">
                                <input type="checkbox" id="transparentBg">
                                <span data-i18n="transparentBg">Transparent Background (PNG only)</span>
                            </label>
                        </div>
                    </div>

                    <!-- Compress Tab -->
                    <div class="tab-content" id="tab-compress">
                        <div class="form-group">
                            <label class="form-label" data-i18n="outputFormat">Output Format</label>
                            <select class="form-select" id="outputFormat">
                                <option value="image/jpeg">JPEG</option>
                                <option value="image/png">PNG</option>
                                <option value="image/webp">WEBP</option>
                            </select>
                        </div>
                        <div class="form-group" id="qualityGroup">
                            <label class="form-label" data-i18n="imageQuality">Image Quality</label>
                            <div class="range-group">
                                <input type="range" id="quality" min="10" max="100" value="85">
                                <span class="range-value" id="qualityValue">85%</span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-checkbox">
                                <input type="checkbox" id="targetSizeMode">
                                <span data-i18n="targetSizeMode">Target File Size Mode</span>
                            </label>
                        </div>
                        <div class="form-group" id="targetSizeGroup" style="display: none;">
                            <label class="form-label" data-i18n="targetSize">Target Size (KB)</label>
                            <input type="number" class="form-input" id="targetSize" value="100" min="10">
                            <small style="color: var(--text-muted); font-size: 0.75rem;" data-i18n="allowError">Allows ¬±10% margin</small>
                        </div>
                    </div>

                    <!-- Watermark Tab -->
                    <div class="tab-content" id="tab-watermark">
                        <div class="form-group">
                            <label class="form-checkbox">
                                <input type="checkbox" id="enableWatermark">
                                <span data-i18n="enableWatermark">Enable Watermark</span>
                            </label>
                        </div>
                        <div id="watermarkSettings" style="display: none;">
                            <div class="form-group">
                                <label class="form-label" data-i18n="watermarkText">Watermark Text</label>
                                <input type="text" class="form-input" id="watermarkText" placeholder="Enter watermark text" data-i18n-placeholder="enterWatermark" value="For xxx use only">
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label" data-i18n="fontSize">Font Size</label>
                                    <input type="number" class="form-input" id="watermarkSize" value="24" min="10" max="200">
                                </div>
                                <div class="form-group">
                                    <label class="form-label" data-i18n="rotateAngle">Rotate Angle</label>
                                    <input type="number" class="form-input" id="watermarkRotate" value="-30" min="-180" max="180">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="form-label" data-i18n="watermarkColor">Watermark Color</label>
                                <div class="color-picker-group">
                                    <input type="color" id="watermarkColor" value="#ff0000">
                                    <input type="text" class="form-input" id="watermarkColorText" value="#ff0000">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="form-label" data-i18n="opacity">Opacity</label>
                                <div class="range-group">
                                    <input type="range" id="watermarkOpacity" min="5" max="100" value="30">
                                    <span class="range-value" id="opacityValue">30%</span>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="form-label" data-i18n="watermarkMode">Watermark Mode</label>
                                <select class="form-select" id="watermarkMode">
                                    <option value="single" data-i18n="singleWatermark">Single Watermark</option>
                                    <option value="tile" selected data-i18n="tileWatermark">Tiled Watermark</option>
                                </select>
                            </div>
                            <div id="singleWatermarkPos" style="display: none;">
                                <div class="form-group">
                                    <label class="form-label" data-i18n="watermarkPosition">Watermark Position</label>
                                    <div class="position-grid">
                                        <button class="position-btn" data-pos="tl" data-i18n="posTopLeft">TL</button>
                                        <button class="position-btn" data-pos="tc" data-i18n="posTopCenter">TC</button>
                                        <button class="position-btn" data-pos="tr" data-i18n="posTopRight">TR</button>
                                        <button class="position-btn" data-pos="ml" data-i18n="posMiddleLeft">ML</button>
                                        <button class="position-btn active" data-pos="mc" data-i18n="posCenter">C</button>
                                        <button class="position-btn" data-pos="mr" data-i18n="posMiddleRight">MR</button>
                                        <button class="position-btn" data-pos="bl" data-i18n="posBottomLeft">BL</button>
                                        <button class="position-btn" data-pos="bc" data-i18n="posBottomCenter">BC</button>
                                        <button class="position-btn" data-pos="br" data-i18n="posBottomRight">BR</button>
                                    </div>
                                </div>
                            </div>
                            <div id="tileWatermarkSettings">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label" data-i18n="horizontalSpacing">Horizontal Spacing</label>
                                        <input type="number" class="form-input" id="tileSpacingX" value="100" min="20">
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label" data-i18n="verticalSpacing">Vertical Spacing</label>
                                        <input type="number" class="form-input" id="tileSpacingY" value="80" min="20">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Center: Preview -->
            <div class="preview-panel">
                <div class="card">
                    <div class="card-header">
                        <span data-i18n="preview">üëÅÔ∏è Preview</span>
                        <div style="margin-left: auto; display: flex; gap: 8px;">
                            <button class="btn btn-sm btn-outline" onclick="resetCropper()" data-i18n="reset">Reset</button>
                        </div>
                    </div>
                    <div class="card-body">
                        <div id="statusMessage" class="status"></div>

                        <div class="cropper-container" id="cropperContainer">
                            <img id="cropperImage" src="">
                        </div>

                        <div class="preview-container" id="previewContainer">
                            <div class="placeholder">
                                <div class="icon">üñºÔ∏è</div>
                                <p data-i18n="uploadFirst">Please upload an image first</p>
                            </div>
                        </div>

                        <div class="crop-controls" id="cropControls" style="display: none;">
                            <button class="btn btn-sm btn-outline" onclick="zoomCropper(0.1)">üîç+</button>
                            <button class="btn btn-sm btn-outline" onclick="zoomCropper(-0.1)">üîç-</button>
                            <button class="btn btn-sm btn-outline" onclick="resetCropper()" data-i18n="resetBtn">‚Ü∫ Reset</button>
                        </div>
                    </div>
                </div>

                <div class="instructions">
                    <h2 data-i18n="instructionsTitle">üìñ Instructions</h2>
                    <ol>
                        <li data-i18n="instruction1"><strong>Upload Image</strong>: Click or drag to upload ID photos (batch supported)</li>
                        <li data-i18n="instruction2"><strong>Crop Settings</strong>: Choose ID photo size or free crop, adjust crop box</li>
                        <li data-i18n="instruction3"><strong>Resize</strong>: Set target pixel dimensions, lock aspect ratio if needed</li>
                        <li data-i18n="instruction4"><strong>Compress</strong>: Choose output format and quality, or set target file size</li>
                        <li data-i18n="instruction5"><strong>Add Watermark</strong>: Set watermark text, color, opacity and position</li>
                        <li data-i18n="instruction6"><strong>Export</strong>: Click "Generate Preview" to confirm, then download</li>
                    </ol>
                    <div class="note">
                        <span data-i18n="noteWarning"><strong>‚ö†Ô∏è Note:</strong> Large images (>4000px) will be automatically scaled to protect browser performance.</span>
                    </div>
                </div>
            </div>

            <!-- Right Panel: Output -->
            <div class="output-panel">
                <div class="card">
                    <div class="card-header" data-i18n="outputSettings">üì§ Output Settings</div>
                    <div class="card-body">
                        <div class="output-info">
                            <div class="output-row">
                                <span class="label" data-i18n="originalDimensions">Original Dimensions</span>
                                <span class="value" id="originalSize">-</span>
                            </div>
                            <div class="output-row">
                                <span class="label" data-i18n="originalFileSize">Original File Size</span>
                                <span class="value" id="originalFileSize">-</span>
                            </div>
                            <div class="output-row">
                                <span class="label" data-i18n="outputDimensions">Output Dimensions</span>
                                <span class="value" id="outputSize">-</span>
                            </div>
                            <div class="output-row">
                                <span class="label" data-i18n="outputFileSize">Output File Size</span>
                                <span class="value" id="outputFileSize">-</span>
                            </div>
                            <div class="output-row">
                                <span class="label" data-i18n="compressionRatio">Compression Ratio</span>
                                <span class="value" id="compressionRatio">-</span>
                            </div>
                        </div>

                        <div class="btn-group" style="flex-direction: column;">
                            <button class="btn btn-primary btn-block" id="previewBtn" onclick="generatePreview()" disabled data-i18n="generatePreview">
                                üëÅÔ∏è Generate Preview
                            </button>
                            <button class="btn btn-success btn-block" id="downloadBtn" onclick="downloadImage()" disabled data-i18n="downloadImage">
                                üíæ Download Image
                            </button>
                            <button class="btn btn-outline btn-block" id="batchDownloadBtn" onclick="batchDownload()" style="display: none;" data-i18n="batchDownload">
                                üì¶ Batch Download (ZIP)
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.6.1/cropper.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>

    <!-- LOGIC -->
    <script>
    (function() {
        'use strict';

        // State
        let images = [];
        let currentIndex = -1;
        let cropper = null;
        let processedBlob = null;
        let originalRatio = 1;

        // DOM Elements
        const uploadArea = document.getElementById('uploadArea');
        const fileInput = document.getElementById('fileInput');
        const imageList = document.getElementById('imageList');
        const cropperContainer = document.getElementById('cropperContainer');
        const cropperImage = document.getElementById('cropperImage');
        const previewContainer = document.getElementById('previewContainer');
        const cropControls = document.getElementById('cropControls');
        const statusMessage = document.getElementById('statusMessage');
        const previewBtn = document.getElementById('previewBtn');
        const downloadBtn = document.getElementById('downloadBtn');
        const batchDownloadBtn = document.getElementById('batchDownloadBtn');

        // Tab Switching
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                tab.classList.add('active');
                document.getElementById('tab-' + tab.dataset.tab).classList.add('active');
            });
        });

        // Preset Buttons
        document.querySelectorAll('.preset-btn[data-ratio]').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.preset-btn[data-ratio]').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                const ratio = parseFloat(btn.dataset.ratio);
                if (cropper) {
                    if (ratio === 0) {
                        cropper.setAspectRatio(NaN);
                    } else {
                        cropper.setAspectRatio(ratio);
                    }
                }
                // Set target dimensions if specified
                if (btn.dataset.w && btn.dataset.h) {
                    document.getElementById('targetWidth').value = btn.dataset.w;
                    document.getElementById('targetHeight').value = btn.dataset.h;
                }
            });
        });

        // Position Buttons
        document.querySelectorAll('.position-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.position-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
            });
        });

        // File Upload
        uploadArea.addEventListener('click', () => fileInput.click());
        uploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadArea.classList.add('dragover');
        });
        uploadArea.addEventListener('dragleave', () => uploadArea.classList.remove('dragover'));
        uploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadArea.classList.remove('dragover');
            handleFiles(e.dataTransfer.files);
        });
        fileInput.addEventListener('change', (e) => handleFiles(e.target.files));

        function handleFiles(files) {
            const validTypes = ['image/jpeg', 'image/png', 'image/webp'];
            Array.from(files).forEach(file => {
                if (!validTypes.includes(file.type)) {
                    showStatus('‰∏çÊîØÊåÅÁöÑÊñá‰ª∂Ê†ºÂºè: ' + file.name, 'error');
                    return;
                }
                const reader = new FileReader();
                reader.onload = (e) => {
                    const img = new Image();
                    img.onload = () => {
                        // Check for oversized images
                        let width = img.width;
                        let height = img.height;
                        let scaled = false;
                        const maxDim = 4000;
                        if (width > maxDim || height > maxDim) {
                            const scale = maxDim / Math.max(width, height);
                            width = Math.round(width * scale);
                            height = Math.round(height * scale);
                            scaled = true;
                            showStatus('Â§ßÂõæÂ∑≤Ëá™Âä®Áº©Êîæ‰ª•‰øùÊä§ÊÄßËÉΩ', 'warning');
                        }

                        images.push({
                            name: file.name,
                            type: file.type,
                            size: file.size,
                            width: img.width,
                            height: img.height,
                            scaledWidth: width,
                            scaledHeight: height,
                            scaled: scaled,
                            dataUrl: e.target.result,
                            processed: false
                        });

                        renderImageList();
                        if (images.length === 1) {
                            selectImage(0);
                        }
                        updateBatchButton();
                    };
                    img.src = e.target.result;
                };
                reader.readAsDataURL(file);
            });
        }

        function renderImageList() {
            imageList.innerHTML = images.map((img, i) => `
                <div class="image-item ${i === currentIndex ? 'active' : ''}" onclick="selectImage(${i})">
                    <img src="${img.dataUrl}" alt="${img.name}">
                    <div class="info">
                        <div class="name">${img.name}</div>
                        <div class="meta">${img.width}√ó${img.height} ¬∑ ${formatSize(img.size)}</div>
                    </div>
                    <div class="actions">
                        <button class="btn btn-outline btn-icon" onclick="event.stopPropagation(); removeImage(${i})">‚úï</button>
                    </div>
                </div>
            `).join('');
        }

        window.selectImage = function(index) {
            currentIndex = index;
            renderImageList();
            loadImageToCropper(images[index]);
            previewBtn.disabled = false;
            downloadBtn.disabled = true;
            processedBlob = null;

            // Update original info
            const img = images[index];
            document.getElementById('originalSize').textContent = `${img.width}√ó${img.height}`;
            document.getElementById('originalFileSize').textContent = formatSize(img.size);
            document.getElementById('outputSize').textContent = '-';
            document.getElementById('outputFileSize').textContent = '-';
            document.getElementById('compressionRatio').textContent = '-';
        };

        window.removeImage = function(index) {
            images.splice(index, 1);
            if (currentIndex >= images.length) currentIndex = images.length - 1;
            renderImageList();
            if (images.length === 0) {
                resetUI();
            } else if (currentIndex >= 0) {
                selectImage(currentIndex);
            }
            updateBatchButton();
        };

        function loadImageToCropper(imgData) {
            cropperContainer.classList.add('active');
            previewContainer.style.display = 'none';
            cropControls.style.display = 'flex';

            if (cropper) {
                cropper.destroy();
            }

            cropperImage.src = imgData.dataUrl;
            originalRatio = imgData.width / imgData.height;

            cropperImage.onload = () => {
                const activePreset = document.querySelector('.preset-btn[data-ratio].active');
                const ratio = activePreset ? parseFloat(activePreset.dataset.ratio) : 0;

                cropper = new Cropper(cropperImage, {
                    aspectRatio: ratio === 0 ? NaN : ratio,
                    viewMode: 1,
                    dragMode: 'move',
                    autoCropArea: 0.8,
                    restore: false,
                    guides: true,
                    center: true,
                    highlight: true,
                    cropBoxMovable: true,
                    cropBoxResizable: true,
                    toggleDragModeOnDblclick: true,
                    background: true,
                });
            };
        }

        window.rotateImage = function(deg) {
            if (cropper) {
                cropper.rotate(deg);
            }
        };

        window.zoomCropper = function(ratio) {
            if (cropper) {
                cropper.zoom(ratio);
            }
        };

        window.resetCropper = function() {
            if (cropper) {
                cropper.reset();
            }
        };

        window.applyCrop = function() {
            if (!cropper) return;
            showStatus('Ê≠£Âú®Â∫îÁî®Ë£ÅÂâ™...', 'processing');

            setTimeout(() => {
                const canvas = cropper.getCroppedCanvas();
                if (canvas) {
                    images[currentIndex].croppedDataUrl = canvas.toDataURL();
                    images[currentIndex].croppedWidth = canvas.width;
                    images[currentIndex].croppedHeight = canvas.height;
                    showStatus('Ë£ÅÂâ™Â∑≤Â∫îÁî®', 'success');
                }
            }, 100);
        };

        // Form Bindings
        document.getElementById('quality').addEventListener('input', (e) => {
            document.getElementById('qualityValue').textContent = e.target.value + '%';
        });

        document.getElementById('watermarkOpacity').addEventListener('input', (e) => {
            document.getElementById('opacityValue').textContent = e.target.value + '%';
        });

        document.getElementById('bgColor').addEventListener('input', (e) => {
            document.getElementById('bgColorText').value = e.target.value;
        });
        document.getElementById('bgColorText').addEventListener('input', (e) => {
            document.getElementById('bgColor').value = e.target.value;
        });

        document.getElementById('watermarkColor').addEventListener('input', (e) => {
            document.getElementById('watermarkColorText').value = e.target.value;
        });
        document.getElementById('watermarkColorText').addEventListener('input', (e) => {
            document.getElementById('watermarkColor').value = e.target.value;
        });

        document.getElementById('outputFormat').addEventListener('change', (e) => {
            const qualityGroup = document.getElementById('qualityGroup');
            qualityGroup.style.display = e.target.value === 'image/png' ? 'none' : 'block';
        });

        document.getElementById('targetSizeMode').addEventListener('change', (e) => {
            document.getElementById('targetSizeGroup').style.display = e.target.checked ? 'block' : 'none';
            document.getElementById('qualityGroup').style.display = e.target.checked ? 'none' : 'block';
        });

        document.getElementById('enableWatermark').addEventListener('change', (e) => {
            document.getElementById('watermarkSettings').style.display = e.target.checked ? 'block' : 'none';
        });

        document.getElementById('watermarkMode').addEventListener('change', (e) => {
            document.getElementById('singleWatermarkPos').style.display = e.target.value === 'single' ? 'block' : 'none';
            document.getElementById('tileWatermarkSettings').style.display = e.target.value === 'tile' ? 'block' : 'none';
        });

        document.getElementById('lockRatio').addEventListener('change', updateRatioLock);
        document.getElementById('targetWidth').addEventListener('input', () => {
            if (document.getElementById('lockRatio').checked && originalRatio) {
                const w = parseInt(document.getElementById('targetWidth').value) || 0;
                document.getElementById('targetHeight').value = Math.round(w / originalRatio);
            }
        });
        document.getElementById('targetHeight').addEventListener('input', () => {
            if (document.getElementById('lockRatio').checked && originalRatio) {
                const h = parseInt(document.getElementById('targetHeight').value) || 0;
                document.getElementById('targetWidth').value = Math.round(h * originalRatio);
            }
        });

        function updateRatioLock() {
            if (currentIndex >= 0) {
                const img = images[currentIndex];
                if (img.croppedWidth && img.croppedHeight) {
                    originalRatio = img.croppedWidth / img.croppedHeight;
                } else {
                    originalRatio = img.width / img.height;
                }
            }
        }

        // Generate Preview
        window.generatePreview = async function() {
            if (currentIndex < 0) return;

            showStatus('Ê≠£Âú®Â§ÑÁêÜÂõæÁâá...', 'processing');
            previewBtn.disabled = true;

            try {
                const result = await processImage(images[currentIndex]);
                processedBlob = result.blob;

                // Show preview
                cropperContainer.classList.remove('active');
                previewContainer.style.display = 'flex';
                cropControls.style.display = 'none';

                const url = URL.createObjectURL(processedBlob);
                previewContainer.innerHTML = `<canvas id="previewCanvas"></canvas>`;
                const previewCanvas = document.getElementById('previewCanvas');
                const ctx = previewCanvas.getContext('2d');

                const img = new Image();
                img.onload = () => {
                    previewCanvas.width = img.width;
                    previewCanvas.height = img.height;
                    ctx.drawImage(img, 0, 0);
                    URL.revokeObjectURL(url);
                };
                img.src = url;

                // Update output info
                document.getElementById('outputSize').textContent = `${result.width}√ó${result.height}`;
                document.getElementById('outputFileSize').textContent = formatSize(processedBlob.size);
                const ratio = ((1 - processedBlob.size / images[currentIndex].size) * 100).toFixed(1);
                const ratioEl = document.getElementById('compressionRatio');
                ratioEl.textContent = (ratio > 0 ? '-' : '+') + Math.abs(ratio) + '%';
                ratioEl.className = 'value ' + (ratio > 0 ? 'success' : 'warning');

                downloadBtn.disabled = false;
                showStatus('Â§ÑÁêÜÂÆåÊàê', 'success');

            } catch (err) {
                showStatus('Â§ÑÁêÜÂ§±Ë¥•: ' + err.message, 'error');
            }

            previewBtn.disabled = false;
        };

        async function processImage(imgData) {
            return new Promise((resolve, reject) => {
                const img = new Image();
                img.onload = () => {
                    // Create canvas
                    const canvas = document.createElement('canvas');
                    const ctx = canvas.getContext('2d');

                    // Determine source dimensions
                    let srcCanvas;
                    if (cropper && imgData === images[currentIndex]) {
                        srcCanvas = cropper.getCroppedCanvas();
                    } else {
                        srcCanvas = document.createElement('canvas');
                        srcCanvas.width = img.width;
                        srcCanvas.height = img.height;
                        srcCanvas.getContext('2d').drawImage(img, 0, 0);
                    }

                    // Target dimensions
                    let targetW = parseInt(document.getElementById('targetWidth').value) || srcCanvas.width;
                    let targetH = parseInt(document.getElementById('targetHeight').value) || srcCanvas.height;

                    // Apply size limits
                    const maxDim = 4000;
                    if (targetW > maxDim || targetH > maxDim) {
                        const scale = maxDim / Math.max(targetW, targetH);
                        targetW = Math.round(targetW * scale);
                        targetH = Math.round(targetH * scale);
                    }

                    canvas.width = targetW;
                    canvas.height = targetH;

                    // Background
                    const format = document.getElementById('outputFormat').value;
                    const transparentBg = document.getElementById('transparentBg').checked;
                    if (!transparentBg || format === 'image/jpeg') {
                        ctx.fillStyle = document.getElementById('bgColor').value;
                        ctx.fillRect(0, 0, targetW, targetH);
                    }

                    // Draw image (centered if aspect ratio differs)
                    const srcRatio = srcCanvas.width / srcCanvas.height;
                    const targetRatio = targetW / targetH;
                    let drawW, drawH, drawX, drawY;

                    if (Math.abs(srcRatio - targetRatio) < 0.01) {
                        drawW = targetW;
                        drawH = targetH;
                        drawX = 0;
                        drawY = 0;
                    } else if (srcRatio > targetRatio) {
                        drawW = targetW;
                        drawH = targetW / srcRatio;
                        drawX = 0;
                        drawY = (targetH - drawH) / 2;
                    } else {
                        drawH = targetH;
                        drawW = targetH * srcRatio;
                        drawX = (targetW - drawW) / 2;
                        drawY = 0;
                    }

                    ctx.drawImage(srcCanvas, drawX, drawY, drawW, drawH);

                    // Watermark
                    if (document.getElementById('enableWatermark').checked) {
                        const text = document.getElementById('watermarkText').value || 'Ê∞¥Âç∞';
                        const size = parseInt(document.getElementById('watermarkSize').value) || 24;
                        const color = document.getElementById('watermarkColor').value;
                        const opacity = parseInt(document.getElementById('watermarkOpacity').value) / 100;
                        const rotate = parseInt(document.getElementById('watermarkRotate').value) || 0;
                        const mode = document.getElementById('watermarkMode').value;

                        ctx.font = `${size}px sans-serif`;
                        ctx.fillStyle = color;
                        ctx.globalAlpha = opacity;
                        ctx.textAlign = 'center';
                        ctx.textBaseline = 'middle';

                        if (mode === 'tile') {
                            const spacingX = parseInt(document.getElementById('tileSpacingX').value) || 100;
                            const spacingY = parseInt(document.getElementById('tileSpacingY').value) || 80;
                            const textWidth = ctx.measureText(text).width;
                            const stepX = textWidth + spacingX;
                            const stepY = size + spacingY;

                            for (let y = -targetH; y < targetH * 2; y += stepY) {
                                for (let x = -targetW; x < targetW * 2; x += stepX) {
                                    ctx.save();
                                    ctx.translate(x, y);
                                    ctx.rotate(rotate * Math.PI / 180);
                                    ctx.fillText(text, 0, 0);
                                    ctx.restore();
                                }
                            }
                        } else {
                            const pos = document.querySelector('.position-btn.active')?.dataset.pos || 'mc';
                            let x, y;
                            switch(pos) {
                                case 'tl': x = size * 2; y = size * 2; break;
                                case 'tc': x = targetW / 2; y = size * 2; break;
                                case 'tr': x = targetW - size * 2; y = size * 2; break;
                                case 'ml': x = size * 2; y = targetH / 2; break;
                                case 'mc': x = targetW / 2; y = targetH / 2; break;
                                case 'mr': x = targetW - size * 2; y = targetH / 2; break;
                                case 'bl': x = size * 2; y = targetH - size * 2; break;
                                case 'bc': x = targetW / 2; y = targetH - size * 2; break;
                                case 'br': x = targetW - size * 2; y = targetH - size * 2; break;
                                default: x = targetW / 2; y = targetH / 2;
                            }
                            ctx.save();
                            ctx.translate(x, y);
                            ctx.rotate(rotate * Math.PI / 180);
                            ctx.fillText(text, 0, 0);
                            ctx.restore();
                        }

                        ctx.globalAlpha = 1;
                    }

                    // Export
                    let quality = parseInt(document.getElementById('quality').value) / 100;
                    const targetSizeMode = document.getElementById('targetSizeMode').checked;
                    const targetSizeKB = parseInt(document.getElementById('targetSize').value) || 100;

                    if (targetSizeMode && format !== 'image/png') {
                        // Binary search for target size
                        let minQ = 0.1, maxQ = 1.0;
                        let blob;
                        for (let i = 0; i < 10; i++) {
                            quality = (minQ + maxQ) / 2;
                            canvas.toBlob((b) => { blob = b; }, format, quality);
                            // Sync workaround
                            const dataUrl = canvas.toDataURL(format, quality);
                            const size = Math.round(dataUrl.length * 0.75 / 1024);
                            if (size > targetSizeKB * 1.1) {
                                maxQ = quality;
                            } else if (size < targetSizeKB * 0.9) {
                                minQ = quality;
                            } else {
                                break;
                            }
                        }
                    }

                    canvas.toBlob((blob) => {
                        resolve({
                            blob,
                            width: targetW,
                            height: targetH
                        });
                    }, format, format === 'image/png' ? undefined : quality);
                };
                img.onerror = () => reject(new Error('ÂõæÁâáÂä†ËΩΩÂ§±Ë¥•'));
                img.src = imgData.croppedDataUrl || imgData.dataUrl;
            });
        }

        // Download
        window.downloadImage = function() {
            if (!processedBlob) return;

            const format = document.getElementById('outputFormat').value;
            const ext = format.split('/')[1];
            const name = images[currentIndex].name.replace(/\.[^.]+$/, '') + '_processed.' + ext;

            const url = URL.createObjectURL(processedBlob);
            const a = document.createElement('a');
            a.href = url;
            a.download = name;
            a.click();
            URL.revokeObjectURL(url);

            showStatus('‰∏ãËΩΩÂ∑≤ÂºÄÂßã', 'success');
        };

        // Batch Download
        window.batchDownload = async function() {
            if (images.length < 2) return;

            showStatus('Ê≠£Âú®ÊâπÈáèÂ§ÑÁêÜ...', 'processing');
            batchDownloadBtn.disabled = true;

            try {
                const zip = new JSZip();
                const format = document.getElementById('outputFormat').value;
                const ext = format.split('/')[1];

                for (let i = 0; i < images.length; i++) {
                    showStatus(`Ê≠£Âú®Â§ÑÁêÜ ${i + 1}/${images.length}...`, 'processing');
                    const result = await processImage(images[i]);
                    const name = images[i].name.replace(/\.[^.]+$/, '') + '_processed.' + ext;
                    zip.file(name, result.blob);
                }

                showStatus('Ê≠£Âú®ÊâìÂåÖZIP...', 'processing');
                const zipBlob = await zip.generateAsync({ type: 'blob' });

                const url = URL.createObjectURL(zipBlob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'processed_photos.zip';
                a.click();
                URL.revokeObjectURL(url);

                showStatus('ÊâπÈáè‰∏ãËΩΩÂÆåÊàê', 'success');

            } catch (err) {
                showStatus('ÊâπÈáèÂ§ÑÁêÜÂ§±Ë¥•: ' + err.message, 'error');
            }

            batchDownloadBtn.disabled = false;
        };

        function updateBatchButton() {
            batchDownloadBtn.style.display = images.length > 1 ? 'flex' : 'none';
        }

        function resetUI() {
            currentIndex = -1;
            processedBlob = null;
            if (cropper) {
                cropper.destroy();
                cropper = null;
            }
            cropperContainer.classList.remove('active');
            previewContainer.style.display = 'flex';
            previewContainer.innerHTML = `
                <div class="placeholder">
                    <div class="icon">üñºÔ∏è</div>
                    <p>ËØ∑ÂÖà‰∏ä‰º†ÂõæÁâá</p>
                </div>
            `;
            cropControls.style.display = 'none';
            previewBtn.disabled = true;
            downloadBtn.disabled = true;
            document.getElementById('originalSize').textContent = '-';
            document.getElementById('originalFileSize').textContent = '-';
            document.getElementById('outputSize').textContent = '-';
            document.getElementById('outputFileSize').textContent = '-';
            document.getElementById('compressionRatio').textContent = '-';
        }

        function showStatus(message, type) {
            statusMessage.className = 'status show ' + type;
            statusMessage.innerHTML = type === 'processing'
                ? `<div class="spinner"></div><span>${message}</span>`
                : `<span>${message}</span>`;

            if (type !== 'processing') {
                setTimeout(() => {
                    statusMessage.classList.remove('show');
                }, 3000);
            }
        }

        function formatSize(bytes) {
            if (bytes < 1024) return bytes + ' B';
            if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(1) + ' KB';
            return (bytes / 1024 / 1024).toFixed(2) + ' MB';
        }

    })();
    </script>

    <!-- FAQ ÈóÆÁ≠îÂå∫Âùó -->
    <section class="faq-section" style="max-width: 900px; margin: 40px auto; padding: 0 20px;">
        <h2 style="color: #e6edf3; font-size: 20px; margin-bottom: 24px; padding-bottom: 12px; border-bottom: 1px solid #30363d;" data-i18n="faqTitle">‚ùì FAQ</h2>
        <div class="faq-list" style="display: flex; flex-direction: column; gap: 16px;">
            <details style="background: #161b22; border: 1px solid #30363d; border-radius: 8px; overflow: hidden;">
                <summary style="padding: 16px 20px; cursor: pointer; font-weight: 500; color: #e6edf3; list-style: none; display: flex; justify-content: space-between; align-items: center;" data-i18n="faq1Question">
                    What ID photo sizes are supported?
                    <span style="color: #8b949e; font-size: 18px;">+</span>
                </summary>
                <div style="padding: 0 20px 16px; color: #8b949e; line-height: 1.7;" data-i18n="faq1Answer">
                    Supports 1-inch (25x35mm), 2-inch (35x49mm), small 1-inch (22x32mm), passport (33x48mm) and other common sizes. You can also choose "Free Crop" mode to customize any size.
                </div>
            </details>
            <details style="background: #161b22; border: 1px solid #30363d; border-radius: 8px; overflow: hidden;">
                <summary style="padding: 16px 20px; cursor: pointer; font-weight: 500; color: #e6edf3; list-style: none; display: flex; justify-content: space-between; align-items: center;" data-i18n="faq2Question">
                    What background colors are available?
                    <span style="color: #8b949e; font-size: 18px;">+</span>
                </summary>
                <div style="padding: 0 20px 16px; color: #8b949e; line-height: 1.7;" data-i18n="faq2Answer">
                    Supports red, blue, and white - the most common ID photo background colors. In the "Resize" settings, you can use the color picker to customize any background color.
                </div>
            </details>
            <details style="background: #161b22; border: 1px solid #30363d; border-radius: 8px; overflow: hidden;">
                <summary style="padding: 16px 20px; cursor: pointer; font-weight: 500; color: #e6edf3; list-style: none; display: flex; justify-content: space-between; align-items: center;" data-i18n="faq3Question">
                    Will my photos be uploaded to a server?
                    <span style="color: #8b949e; font-size: 18px;">+</span>
                </summary>
                <div style="padding: 0 20px 16px; color: #8b949e; line-height: 1.7;" data-i18n="faq3Answer">
                    No, all processing is done locally in your browser. Photos never leave your device. This is a completely offline tool, ideal for processing sensitive ID documents. All data is cleared when you refresh the page.
                </div>
            </details>
            <details style="background: #161b22; border: 1px solid #30363d; border-radius: 8px; overflow: hidden;">
                <summary style="padding: 16px 20px; cursor: pointer; font-weight: 500; color: #e6edf3; list-style: none; display: flex; justify-content: space-between; align-items: center;" data-i18n="faq4Question">
                    Can I use photos taken with my phone?
                    <span style="color: #8b949e; font-size: 18px;">+</span>
                </summary>
                <div style="padding: 0 20px 16px; color: #8b949e; line-height: 1.7;" data-i18n="faq4Answer">
                    Yes, we recommend taking front-facing photos in well-lit environments with a simple background. After uploading, use the crop function to adjust to the appropriate ID photo ratio.
                </div>
            </details>
            <details style="background: #161b22; border: 1px solid #30363d; border-radius: 8px; overflow: hidden;">
                <summary style="padding: 16px 20px; cursor: pointer; font-weight: 500; color: #e6edf3; list-style: none; display: flex; justify-content: space-between; align-items: center;" data-i18n="faq5Question">
                    What resolution are the exported photos?
                    <span style="color: #8b949e; font-size: 18px;">+</span>
                </summary>
                <div style="padding: 0 20px 16px; color: #8b949e; line-height: 1.7;" data-i18n="faq5Answer">
                    Photos are exported at standard print resolution (300dpi). For example, 1-inch photos are 295x413 pixels, 2-inch photos are 413x531 pixels, meeting all ID photo printing requirements.
                </div>
            </details>
            <details style="background: #161b22; border: 1px solid #30363d; border-radius: 8px; overflow: hidden;">
                <summary style="padding: 16px 20px; cursor: pointer; font-weight: 500; color: #e6edf3; list-style: none; display: flex; justify-content: space-between; align-items: center;" data-i18n="faq_free_q">
                    Is this tool really free? Is it safe?
                    <span style="color: #8b949e; font-size: 18px;">+</span>
                </summary>
                <div style="padding: 0 20px 16px; color: #8b949e; line-height: 1.7;" data-i18n="faq_free_a">
                    Yes, this tool is 100% free with no ads, no signup, no usage limits, and no watermarks. All processing happens in your browser ‚Äî your data never leaves your device. It's completely safe and private.
                </div>
            </details>
        </div>
    </section>

    <!-- Áõ∏ÂÖ≥Â∑•ÂÖ∑Êé®Ëçê -->
    <section class="related-tools" style="max-width: 900px; margin: 40px auto; padding: 0 20px;">
        <h3 style="color: #e6edf3; font-size: 18px; margin-bottom: 20px; padding-bottom: 10px; border-bottom: 1px solid #30363d;" data-i18n="relatedTools">üîó Related Tools</h3>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px;">
            <a href="image-compressor.html" style="display: block; padding: 16px; background: #161b22; border: 1px solid #30363d; border-radius: 8px; text-decoration: none; transition: all 0.2s;">
                <div style="font-size: 24px; margin-bottom: 8px;">üóúÔ∏è</div>
                <div style="color: #e6edf3; font-weight: 500;" data-i18n="toolCompressor">Image Compressor</div>
                <div style="color: #8b949e; font-size: 12px; margin-top: 4px;" data-i18n="toolCompressorDesc">Compress image file size</div>
            </a>
            <a href="image-editor.html" style="display: block; padding: 16px; background: #161b22; border: 1px solid #30363d; border-radius: 8px; text-decoration: none; transition: all 0.2s;">
                <div style="font-size: 24px; margin-bottom: 8px;">‚úèÔ∏è</div>
                <div style="color: #e6edf3; font-weight: 500;" data-i18n="toolEditor">Image Editor</div>
                <div style="color: #8b949e; font-size: 12px; margin-top: 4px;" data-i18n="toolEditorDesc">Crop, rotate, filters</div>
            </a>
            <a href="image-converter.html" style="display: block; padding: 16px; background: #161b22; border: 1px solid #30363d; border-radius: 8px; text-decoration: none; transition: all 0.2s;">
                <div style="font-size: 24px; margin-bottom: 8px;">üîÑ</div>
                <div style="color: #e6edf3; font-weight: 500;" data-i18n="toolConverter">Image Converter</div>
                <div style="color: #8b949e; font-size: 12px; margin-top: 4px;" data-i18n="toolConverterDesc">PNG/JPG/WebP conversion</div>
            </a>
            <a href="ico-maker.html" style="display: block; padding: 16px; background: #161b22; border: 1px solid #30363d; border-radius: 8px; text-decoration: none; transition: all 0.2s;">
                <div style="font-size: 24px; margin-bottom: 8px;">üéØ</div>
                <div style="color: #e6edf3; font-weight: 500;" data-i18n="toolIco">ICO Maker</div>
                <div style="color: #8b949e; font-size: 12px; margin-top: 4px;" data-i18n="toolIcoDesc">Generate website icons</div>
            </a>
        </div>
    </section>

    <footer style="text-align: center; padding: 30px 20px; border-top: 1px solid #30363d; color: #8b949e; font-size: 14px;">
        <p data-i18n="footerPrivacy">Pure frontend processing, data is never uploaded to servers</p>
        <p style="margin-top: 12px;">
            <a href="index.html" style="color: #58a6ff; text-decoration: none;" data-i18n="footerBack">‚Üê Back to Web Toolbox</a>
            <span style="margin: 0 12px;">|</span>
            <a href="https://github.com/heyuan110" target="_blank" rel="noopener" style="color: #58a6ff; text-decoration: none;">GitHub</a>
        </p>
    </footer>

    <!-- i18n Script -->
    <script>
    (function() {
        'use strict';

        const translations = {
            'en': {
                title: 'üì∑ ID Photo Cropper & Watermark',
                backToToolbox: '‚Üê Back to Toolbox',
                privacyTitle: 'This Tool Runs Completely Offline',
                privacyDesc: 'All image processing is done locally in your browser with no network requests. Ideal for sensitive documents like ID cards, driver\'s licenses, and passports. Refresh the page to clear all data.',
                feature1_title: '100% Free & Private',
                feature1_desc: 'No ads, no signup, no watermark. Everything runs locally in your browser. Your data never leaves your device.',
                featureMultiSize: 'Multiple Sizes',
                featureMultiSizeDesc: 'Supports 1-inch, 2-inch, passport and other common ID photo sizes to meet all document requirements',
                featureBgChange: 'Background Change',
                featureBgChangeDesc: 'One-click change to red, blue, white standard ID photo backgrounds, or customize any color',
                featureSmartCrop: 'Smart Cropping',
                featureSmartCropDesc: 'Freely adjust crop box position with precise control over photo composition ratio',
                featureInstant: 'Instant Use',
                featureInstantDesc: 'Pure frontend processing, no server uploads needed, protecting your privacy',
                imageImport: 'üìÅ Image Import',
                dragOrClick: 'Drag & Drop or Click to Upload',
                supportedFormats: 'Supports JPG / PNG / WEBP',
                tabCrop: 'Crop',
                tabResize: 'Resize',
                tabCompress: 'Compress',
                tabWatermark: 'Watermark',
                photoSize: 'ID Photo Size',
                size1inch: '1 inch <small>25√ó35mm</small>',
                size2inch: '2 inch <small>35√ó45mm</small>',
                sizeSmall2inch: 'Small 2" <small>33√ó48mm</small>',
                sizePassport: 'Passport <small>35√ó45mm</small>',
                sizeDriverLicense: 'License <small>22√ó32mm</small>',
                sizeFree: 'Free Crop <small>Any ratio</small>',
                rotateAngle: 'Rotate Angle',
                rotateLeft: '‚Ü∫ Left 90¬∞',
                rotateRight: '‚Üª Right 90¬∞',
                applyCrop: '‚úÇÔ∏è Apply Crop',
                lockAspectRatio: 'üîó Lock Aspect Ratio',
                width: 'Width (px)',
                height: 'Height (px)',
                auto: 'Auto',
                fillBgColor: 'Fill Background Color',
                transparentBg: 'Transparent Background (PNG only)',
                outputFormat: 'Output Format',
                imageQuality: 'Image Quality',
                targetSizeMode: 'Target File Size Mode',
                targetSize: 'Target Size (KB)',
                allowError: 'Allows ¬±10% margin',
                enableWatermark: 'Enable Watermark',
                watermarkText: 'Watermark Text',
                enterWatermark: 'Enter watermark text',
                fontSize: 'Font Size',
                watermarkColor: 'Watermark Color',
                opacity: 'Opacity',
                watermarkMode: 'Watermark Mode',
                singleWatermark: 'Single Watermark',
                tileWatermark: 'Tiled Watermark',
                watermarkPosition: 'Watermark Position',
                posTopLeft: 'TL',
                posTopCenter: 'TC',
                posTopRight: 'TR',
                posMiddleLeft: 'ML',
                posCenter: 'C',
                posMiddleRight: 'MR',
                posBottomLeft: 'BL',
                posBottomCenter: 'BC',
                posBottomRight: 'BR',
                horizontalSpacing: 'Horizontal Spacing',
                verticalSpacing: 'Vertical Spacing',
                preview: 'üëÅÔ∏è Preview',
                reset: 'Reset',
                resetBtn: '‚Ü∫ Reset',
                uploadFirst: 'Please upload an image first',
                instructionsTitle: 'üìñ Instructions',
                instruction1: '<strong>Upload Image</strong>: Click or drag to upload ID photos (batch supported)',
                instruction2: '<strong>Crop Settings</strong>: Choose ID photo size or free crop, adjust crop box',
                instruction3: '<strong>Resize</strong>: Set target pixel dimensions, lock aspect ratio if needed',
                instruction4: '<strong>Compress</strong>: Choose output format and quality, or set target file size',
                instruction5: '<strong>Add Watermark</strong>: Set watermark text, color, opacity and position',
                instruction6: '<strong>Export</strong>: Click "Generate Preview" to confirm, then download',
                noteWarning: '<strong>‚ö†Ô∏è Note:</strong> Large images (>4000px) will be automatically scaled to protect browser performance.',
                outputSettings: 'üì§ Output Settings',
                originalDimensions: 'Original Dimensions',
                originalFileSize: 'Original File Size',
                outputDimensions: 'Output Dimensions',
                outputFileSize: 'Output File Size',
                compressionRatio: 'Compression Ratio',
                generatePreview: 'üëÅÔ∏è Generate Preview',
                downloadImage: 'üíæ Download Image',
                batchDownload: 'üì¶ Batch Download (ZIP)',
                faqTitle: '‚ùì FAQ',
                faq1Question: 'What ID photo sizes are supported?',
                faq1Answer: 'Supports 1-inch (25x35mm), 2-inch (35x49mm), small 1-inch (22x32mm), passport (33x48mm) and other common sizes. You can also choose "Free Crop" mode to customize any size.',
                faq2Question: 'What background colors are available?',
                faq2Answer: 'Supports red, blue, and white - the most common ID photo background colors. In the "Resize" settings, you can use the color picker to customize any background color.',
                faq3Question: 'Will my photos be uploaded to a server?',
                faq3Answer: 'No, all processing is done locally in your browser. Photos never leave your device. This is a completely offline tool, ideal for processing sensitive ID documents. All data is cleared when you refresh the page.',
                faq4Question: 'Can I use photos taken with my phone?',
                faq4Answer: 'Yes, we recommend taking front-facing photos in well-lit environments with a simple background. After uploading, use the crop function to adjust to the appropriate ID photo ratio.',
                faq5Question: 'What resolution are the exported photos?',
                faq5Answer: 'Photos are exported at standard print resolution (300dpi). For example, 1-inch photos are 295x413 pixels, 2-inch photos are 413x531 pixels, meeting all ID photo printing requirements.',
                faq_free_q: 'Is this tool really free? Is it safe?',
                faq_free_a: 'Yes, this tool is 100% free with no ads, no signup, no usage limits, and no watermarks. All processing happens in your browser ‚Äî your data never leaves your device. It\'s completely safe and private.',
                relatedTools: 'üîó Related Tools',
                toolCompressor: 'Image Compressor',
                toolCompressorDesc: 'Compress image file size',
                toolEditor: 'Image Editor',
                toolEditorDesc: 'Crop, rotate, filters',
                toolConverter: 'Image Converter',
                toolConverterDesc: 'PNG/JPG/WebP conversion',
                toolIco: 'ICO Maker',
                toolIcoDesc: 'Generate website icons',
                footerPrivacy: 'Pure frontend processing, data is never uploaded to servers',
                footerBack: '‚Üê Back to Web Toolbox',
                trust_users: 'üåç Used by 50,000+ users',
                trust_rating: '‚≠ê 4.9/5 rating',
                trust_privacy: 'üîí 100% Private',
                trust_free: 'üö´ No Ads, No Signup'
            },
            'zh-CN': {
                title: 'üì∑ ËØÅ‰ª∂ÁÖßË£ÅÂâ™ & ÈÄèÊòéÊñáÂ≠óÊ∞¥Âç∞',
                backToToolbox: '‚Üê ËøîÂõûÂ∑•ÂÖ∑ÁÆ±',
                privacyTitle: 'Êú¨Â∑•ÂÖ∑ÂÆåÂÖ®Á¶ªÁ∫øËøêË°å',
                privacyDesc: 'ÊâÄÊúâÂõæÁâáÂ§ÑÁêÜÂùáÂú®Êú¨Âú∞ÊµèËßàÂô®ÂÆåÊàêÔºåÊó†‰ªª‰ΩïÁΩëÁªúËØ∑Ê±ÇÔºåÈÄÇÂêàË∫´‰ªΩËØÅ„ÄÅÈ©æÁÖß„ÄÅÊä§ÁÖßÁ≠âÊïèÊÑüËØÅ‰ª∂Â§ÑÁêÜ„ÄÇÂà∑Êñ∞È°µÈù¢Âç≥Ê∏ÖÁ©∫ÊâÄÊúâÊï∞ÊçÆ„ÄÇ',
                feature1_title: '100% ÂÖçË¥π‰∏îÂÆâÂÖ®',
                feature1_desc: 'Êó†ÂπøÂëä„ÄÅÊó†ÈúÄÊ≥®ÂÜå„ÄÅÊó†Ê∞¥Âç∞„ÄÇÊâÄÊúâÂ§ÑÁêÜÈÉΩÂú®ÊµèËßàÂô®Êú¨Âú∞ÂÆåÊàêÔºåÊï∞ÊçÆ‰∏ç‰ºö‰∏ä‰º†Âà∞‰ªª‰ΩïÊúçÂä°Âô®„ÄÇ',
                featureMultiSize: 'Â§öÁßçËßÑÊ†º',
                featureMultiSizeDesc: 'ÊîØÊåÅ‰∏ÄÂØ∏„ÄÅ‰∫åÂØ∏„ÄÅÂ∞è‰∏ÄÂØ∏„ÄÅÊä§ÁÖßÁ≠âÂ∏∏Áî®ËØÅ‰ª∂ÁÖßÂ∞∫ÂØ∏ÔºåÊª°Ë∂≥ÂêÑÁ±ªËØÅ‰ª∂ÈúÄÊ±Ç',
                featureBgChange: 'ËÉåÊôØÊõ¥Êç¢',
                featureBgChangeDesc: '‰∏ÄÈîÆÊõ¥Êç¢Á∫¢„ÄÅËìù„ÄÅÁôΩÁ≠âÊ†áÂáÜËØÅ‰ª∂ÁÖßËÉåÊôØËâ≤Ôºå‰πüÂèØËá™ÂÆö‰πâÈ¢úËâ≤',
                featureSmartCrop: 'Êô∫ËÉΩË£ÅÂâ™',
                featureSmartCropDesc: 'Ëá™Áî±Ë∞ÉÊï¥Ë£ÅÂâ™Ê°Ü‰ΩçÁΩÆÔºåÁ≤æÁ°ÆÊéßÂà∂ÁÖßÁâáÊûÑÂõæÊØî‰æã',
                featureInstant: 'Âç≥ÊãçÂç≥Áî®',
                featureInstantDesc: 'Á∫ØÂâçÁ´ØÂ§ÑÁêÜÔºåÊó†ÈúÄ‰∏ä‰º†ÊúçÂä°Âô®Ôºå‰øùÊä§ÊÇ®ÁöÑÈöêÁßÅÂÆâÂÖ®',
                imageImport: 'üìÅ ÂõæÁâáÂØºÂÖ•',
                dragOrClick: 'ÊãñÊãΩÊàñÁÇπÂáª‰∏ä‰º†',
                supportedFormats: 'ÊîØÊåÅ JPG / PNG / WEBP',
                tabCrop: 'Ë£ÅÂâ™',
                tabResize: 'Â∞∫ÂØ∏',
                tabCompress: 'ÂéãÁº©',
                tabWatermark: 'Ê∞¥Âç∞',
                photoSize: 'ËØÅ‰ª∂ÁÖßËßÑÊ†º',
                size1inch: '1ÂØ∏ <small>25√ó35mm</small>',
                size2inch: '2ÂØ∏ <small>35√ó45mm</small>',
                sizeSmall2inch: 'Â∞è2ÂØ∏ <small>33√ó48mm</small>',
                sizePassport: 'Êä§ÁÖßÁÖß <small>35√ó45mm</small>',
                sizeDriverLicense: 'È©æÁÖßÁÖß <small>22√ó32mm</small>',
                sizeFree: 'Ëá™Áî±Ë£ÅÂâ™ <small>‰ªªÊÑèÊØî‰æã</small>',
                rotateAngle: 'ÊóãËΩ¨ËßíÂ∫¶',
                rotateLeft: '‚Ü∫ Â∑¶ËΩ¨90¬∞',
                rotateRight: '‚Üª Âè≥ËΩ¨90¬∞',
                applyCrop: '‚úÇÔ∏è Â∫îÁî®Ë£ÅÂâ™',
                lockAspectRatio: 'üîó ÈîÅÂÆöÁ≠âÊØîÁº©Êîæ',
                width: 'ÂÆΩÂ∫¶ (px)',
                height: 'È´òÂ∫¶ (px)',
                auto: 'Ëá™Âä®',
                fillBgColor: 'Â°´ÂÖÖËÉåÊôØËâ≤',
                transparentBg: 'ÈÄèÊòéËÉåÊôØ (‰ªÖPNG)',
                outputFormat: 'ËæìÂá∫Ê†ºÂºè',
                imageQuality: 'ÂõæÁâáË¥®Èáè',
                targetSizeMode: 'ÁõÆÊ†áÊñá‰ª∂Â§ßÂ∞èÊ®°Âºè',
                targetSize: 'ÁõÆÊ†áÂ§ßÂ∞è (KB)',
                allowError: 'ÂÖÅËÆ∏ ¬±10% ËØØÂ∑Æ',
                enableWatermark: 'ÂêØÁî®Ê∞¥Âç∞',
                watermarkText: 'Ê∞¥Âç∞ÊñáÂ≠ó',
                enterWatermark: 'ËæìÂÖ•Ê∞¥Âç∞ÊñáÂ≠ó',
                fontSize: 'Â≠ó‰ΩìÂ§ßÂ∞è',
                watermarkColor: 'Ê∞¥Âç∞È¢úËâ≤',
                opacity: 'ÈÄèÊòéÂ∫¶',
                watermarkMode: 'Ê∞¥Âç∞Ê®°Âºè',
                singleWatermark: 'ÂçïÁÇπÊ∞¥Âç∞',
                tileWatermark: 'Âπ≥Èì∫Ê∞¥Âç∞',
                watermarkPosition: 'Ê∞¥Âç∞‰ΩçÁΩÆ',
                posTopLeft: 'Â∑¶‰∏ä',
                posTopCenter: '‰∏≠‰∏ä',
                posTopRight: 'Âè≥‰∏ä',
                posMiddleLeft: 'Â∑¶‰∏≠',
                posCenter: '‰∏≠ÂøÉ',
                posMiddleRight: 'Âè≥‰∏≠',
                posBottomLeft: 'Â∑¶‰∏ã',
                posBottomCenter: '‰∏≠‰∏ã',
                posBottomRight: 'Âè≥‰∏ã',
                horizontalSpacing: 'Ê∞¥Âπ≥Èó¥Ë∑ù',
                verticalSpacing: 'ÂûÇÁõ¥Èó¥Ë∑ù',
                preview: 'üëÅÔ∏è È¢ÑËßà',
                reset: 'ÈáçÁΩÆ',
                resetBtn: '‚Ü∫ ÈáçÁΩÆ',
                uploadFirst: 'ËØ∑ÂÖà‰∏ä‰º†ÂõæÁâá',
                instructionsTitle: 'üìñ ‰ΩøÁî®ËØ¥Êòé',
                instruction1: '<strong>‰∏ä‰º†ÂõæÁâá</strong>ÔºöÁÇπÂáªÊàñÊãñÊãΩ‰∏ä‰º†ÈúÄË¶ÅÂ§ÑÁêÜÁöÑËØÅ‰ª∂ÁÖßÔºàÊîØÊåÅÊâπÈáèÔºâ',
                instruction2: '<strong>Ë£ÅÂâ™ËÆæÁΩÆ</strong>ÔºöÈÄâÊã©ËØÅ‰ª∂ÁÖßËßÑÊ†ºÊàñËá™Áî±Ë£ÅÂâ™ÔºåË∞ÉÊï¥Ë£ÅÂâ™Ê°Ü',
                instruction3: '<strong>Â∞∫ÂØ∏Ë∞ÉÊï¥</strong>ÔºöËÆæÁΩÆÁõÆÊ†áÂÉèÁ¥†Â∞∫ÂØ∏ÔºåÂèØÈîÅÂÆöÁ≠âÊØîÁº©Êîæ',
                instruction4: '<strong>ÂéãÁº©ËÆæÁΩÆ</strong>ÔºöÈÄâÊã©ËæìÂá∫Ê†ºÂºèÂíåË¥®ÈáèÔºåÊàñËÆæÁΩÆÁõÆÊ†áÊñá‰ª∂Â§ßÂ∞è',
                instruction5: '<strong>Ê∑ªÂä†Ê∞¥Âç∞</strong>ÔºöËÆæÁΩÆÊ∞¥Âç∞ÊñáÂ≠ó„ÄÅÈ¢úËâ≤„ÄÅÈÄèÊòéÂ∫¶Âíå‰ΩçÁΩÆ',
                instruction6: '<strong>ÂØºÂá∫‰∏ãËΩΩ</strong>ÔºöÁÇπÂáª"ÁîüÊàêÈ¢ÑËßà"Á°ÆËÆ§ÊïàÊûúÔºåÁÑ∂Âêé‰∏ãËΩΩ',
                noteWarning: '<strong>‚ö†Ô∏è Ê≥®ÊÑèÔºö</strong>Ë∂ÖÂ§ßÂõæÁâáÔºà>4000pxÔºâ‰ºöËá™Âä®Áº©Êîæ‰ª•‰øùÊä§ÊµèËßàÂô®ÊÄßËÉΩ„ÄÇ',
                outputSettings: 'üì§ ËæìÂá∫ËÆæÁΩÆ',
                originalDimensions: 'ÂéüÂßãÂ∞∫ÂØ∏',
                originalFileSize: 'ÂéüÂßãÂ§ßÂ∞è',
                outputDimensions: 'ËæìÂá∫Â∞∫ÂØ∏',
                outputFileSize: 'ËæìÂá∫Â§ßÂ∞è',
                compressionRatio: 'ÂéãÁº©ÊØî‰æã',
                generatePreview: 'üëÅÔ∏è ÁîüÊàêÈ¢ÑËßà',
                downloadImage: 'üíæ ‰∏ãËΩΩÂõæÁâá',
                batchDownload: 'üì¶ ÊâπÈáè‰∏ãËΩΩ (ZIP)',
                faqTitle: '‚ùì Â∏∏ËßÅÈóÆÈ¢ò',
                faq1Question: 'ÊîØÊåÅÂì™‰∫õËØÅ‰ª∂ÁÖßÂ∞∫ÂØ∏Ôºü',
                faq1Answer: 'ÊîØÊåÅ‰∏ÄÂØ∏(25x35mm)„ÄÅ‰∫åÂØ∏(35x49mm)„ÄÅÂ∞è‰∏ÄÂØ∏(22x32mm)„ÄÅÊä§ÁÖß(33x48mm)Á≠âÂ∏∏Áî®ËØÅ‰ª∂ÁÖßÂ∞∫ÂØ∏„ÄÇÊÇ®‰πüÂèØ‰ª•ÈÄâÊã©"Ëá™Áî±Ë£ÅÂâ™"Ê®°ÂºèÔºåËá™ÂÆö‰πâ‰ªªÊÑèÂ∞∫ÂØ∏„ÄÇ',
                faq2Question: 'ËÉåÊôØËâ≤ÊúâÂì™‰∫õÈÄâÊã©Ôºü',
                faq2Answer: 'ÊîØÊåÅÁ∫¢Ëâ≤„ÄÅËìùËâ≤„ÄÅÁôΩËâ≤ÔºåËøôÊòØÊúÄÂ∏∏Áî®ÁöÑËØÅ‰ª∂ÁÖßËÉåÊôØËâ≤„ÄÇÂú®"Â∞∫ÂØ∏"ËÆæÁΩÆ‰∏≠ÔºåÊÇ®ÂèØ‰ª•ÈÄöËøáÈ¢úËâ≤ÈÄâÊã©Âô®Ëá™ÂÆö‰πâ‰ªªÊÑèËÉåÊôØÈ¢úËâ≤„ÄÇ',
                faq3Question: 'ÁÖßÁâá‰ºö‰∏ä‰º†Âà∞ÊúçÂä°Âô®ÂêóÔºü',
                faq3Answer: '‰∏ç‰ºöÔºåÊâÄÊúâÂ§ÑÁêÜÂú®Êú¨Âú∞ÊµèËßàÂô®ÂÆåÊàêÔºåÁÖßÁâá‰∏ç‰ºöÁ¶ªÂºÄÊÇ®ÁöÑËÆæÂ§á„ÄÇËøôÊòØ‰∏ÄÊ¨æÂÆåÂÖ®Á¶ªÁ∫øËøêË°åÁöÑÂ∑•ÂÖ∑ÔºåÁâπÂà´ÈÄÇÂêàÂ§ÑÁêÜË∫´‰ªΩËØÅ„ÄÅÊä§ÁÖßÁ≠âÊïèÊÑüËØÅ‰ª∂ÁÖßÁâá„ÄÇÂà∑Êñ∞È°µÈù¢ÂêéÊâÄÊúâÊï∞ÊçÆ‰ºöËá™Âä®Ê∏ÖÈô§„ÄÇ',
                faq4Question: 'ÂèØ‰ª•Áî®ÊâãÊú∫ÊãçÊëÑÁöÑÁÖßÁâáÂêóÔºü',
                faq4Answer: 'ÂèØ‰ª•ÔºåÂª∫ËÆÆÂú®ÂÖâÁ∫øÂÖÖË∂≥ÁöÑÁéØÂ¢É‰∏ãÊãçÊëÑÊ≠£Èù¢ÁÖßÔºå‰øùÊåÅËÉåÊôØÁÆÄÊ¥Å„ÄÇ‰∏ä‰º†Âêé‰ΩøÁî®Ë£ÅÂâ™ÂäüËÉΩË∞ÉÊï¥Âà∞ÂêàÈÄÇÁöÑËØÅ‰ª∂ÁÖßÊØî‰æãÂç≥ÂèØ„ÄÇ',
                faq5Question: 'ÂØºÂá∫ÁöÑÁÖßÁâáÂàÜËæ®ÁéáÊòØÂ§öÂ∞ëÔºü',
                faq5Answer: 'Ê†πÊçÆÈÄâÊã©ÁöÑËßÑÊ†ºÂØºÂá∫Ê†áÂáÜÊâìÂç∞ÂàÜËæ®Áéá(300dpi)„ÄÇ‰æãÂ¶Ç‰∏ÄÂØ∏ÁÖßÁâá‰∏∫295x413ÂÉèÁ¥†Ôºå‰∫åÂØ∏ÁÖßÁâá‰∏∫413x531ÂÉèÁ¥†ÔºåÊª°Ë∂≥ÂêÑÁ±ªËØÅ‰ª∂ÁÖßÊâìÂç∞ÈúÄÊ±Ç„ÄÇ',
                faq_free_q: 'Ëøô‰∏™Â∑•ÂÖ∑ÁúüÁöÑÂÖçË¥πÂêóÔºüÂÆâÂÖ®ÂêóÔºü',
                faq_free_a: 'ÊòØÁöÑÔºåÊú¨Â∑•ÂÖ∑ 100% ÂÖçË¥πÔºåÊó†ÂπøÂëä„ÄÅÊó†ÈúÄÊ≥®ÂÜå„ÄÅÊó†‰ΩøÁî®ÈôêÂà∂„ÄÅÊó†Ê∞¥Âç∞„ÄÇÊâÄÊúâÂ§ÑÁêÜÈÉΩÂú®ÊµèËßàÂô®‰∏≠ÂÆåÊàêÔºåÊï∞ÊçÆ‰∏ç‰ºöÁ¶ªÂºÄ‰Ω†ÁöÑËÆæÂ§áÔºåÂÆåÂÖ®ÂÆâÂÖ®‰∏îÈöêÁßÅ„ÄÇ',
                relatedTools: 'üîó Áõ∏ÂÖ≥Â∑•ÂÖ∑Êé®Ëçê',
                toolCompressor: 'ÂõæÁâáÂéãÁº©',
                toolCompressorDesc: 'Âú®Á∫øÂéãÁº©ÂõæÁâáÂ§ßÂ∞è',
                toolEditor: 'ÂõæÁâáÁºñËæëÂô®',
                toolEditorDesc: 'Ë£ÅÂâ™„ÄÅÊóãËΩ¨„ÄÅÊª§Èïú',
                toolConverter: 'ÂõæÁâáÊ†ºÂºèËΩ¨Êç¢',
                toolConverterDesc: 'PNG/JPG/WebP ‰∫íËΩ¨',
                toolIco: 'ICO ÂõæÊ†áÂà∂‰Ωú',
                toolIcoDesc: 'ÁîüÊàêÁΩëÁ´ôÂõæÊ†á',
                footerPrivacy: 'Á∫ØÂâçÁ´ØÂ§ÑÁêÜÔºåÊï∞ÊçÆ‰∏ç‰ºö‰∏ä‰º†Âà∞ÊúçÂä°Âô®',
                footerBack: '‚Üê ËøîÂõû Web Toolbox È¶ñÈ°µ',
                trust_users: 'üåç Ë∂ÖËøá 50,000 Áî®Êà∑‰ΩøÁî®',
                trust_rating: '‚≠ê 4.9/5 Â•ΩËØÑ',
                trust_privacy: 'üîí 100% ÈöêÁßÅÂÆâÂÖ®',
                trust_free: 'üö´ Êó†ÂπøÂëä„ÄÅÊó†ÈúÄÊ≥®ÂÜå'
            },
            'fr': {
                title: 'üì∑ Recadrage Photo ID & Filigrane',
                backToToolbox: '‚Üê Retour √† la Bo√Æte √† Outils',
                privacyTitle: 'Cet Outil Fonctionne Enti√®rement Hors Ligne',
                privacyDesc: 'Tout le traitement d\'image est effectu√© localement dans votre navigateur sans requ√™tes r√©seau. Id√©al pour les documents sensibles comme les cartes d\'identit√©, permis de conduire et passeports. Actualisez la page pour effacer toutes les donn√©es.',
                feature1_title: '100% Gratuit et Priv√©',
                feature1_desc: 'Sans publicit√©, sans inscription, sans filigrane. Tout est trait√© localement dans votre navigateur.',
                featureMultiSize: 'Tailles Multiples',
                featureMultiSizeDesc: 'Prend en charge les formats 1 pouce, 2 pouces, passeport et autres tailles courantes de photos d\'identit√©',
                featureBgChange: 'Changement de Fond',
                featureBgChangeDesc: 'Changement en un clic vers les fonds rouge, bleu, blanc standard ou personnalisez n\'importe quelle couleur',
                featureSmartCrop: 'Recadrage Intelligent',
                featureSmartCropDesc: 'Ajustez librement la position du cadre de recadrage avec un contr√¥le pr√©cis du ratio de composition',
                featureInstant: 'Utilisation Instantan√©e',
                featureInstantDesc: 'Traitement enti√®rement frontend, aucun t√©l√©versement serveur n√©cessaire, protection de votre vie priv√©e',
                imageImport: 'üìÅ Importer Image',
                dragOrClick: 'Glisser-D√©poser ou Cliquer pour T√©l√©verser',
                supportedFormats: 'Supporte JPG / PNG / WEBP',
                tabCrop: 'Recadrer',
                tabResize: 'Redimensionner',
                tabCompress: 'Compresser',
                tabWatermark: 'Filigrane',
                photoSize: 'Taille Photo ID',
                size1inch: '1 pouce <small>25√ó35mm</small>',
                size2inch: '2 pouces <small>35√ó45mm</small>',
                sizeSmall2inch: 'Petit 2" <small>33√ó48mm</small>',
                sizePassport: 'Passeport <small>35√ó45mm</small>',
                sizeDriverLicense: 'Permis <small>22√ó32mm</small>',
                sizeFree: 'Libre <small>Tout ratio</small>',
                rotateAngle: 'Angle de Rotation',
                rotateLeft: '‚Ü∫ Gauche 90¬∞',
                rotateRight: '‚Üª Droite 90¬∞',
                applyCrop: '‚úÇÔ∏è Appliquer le Recadrage',
                lockAspectRatio: 'üîó Verrouiller le Ratio',
                width: 'Largeur (px)',
                height: 'Hauteur (px)',
                auto: 'Auto',
                fillBgColor: 'Couleur de Fond',
                transparentBg: 'Fond Transparent (PNG uniquement)',
                outputFormat: 'Format de Sortie',
                imageQuality: 'Qualit√© d\'Image',
                targetSizeMode: 'Mode Taille Cible',
                targetSize: 'Taille Cible (Ko)',
                allowError: 'Marge de ¬±10% autoris√©e',
                enableWatermark: 'Activer le Filigrane',
                watermarkText: 'Texte du Filigrane',
                enterWatermark: 'Entrez le texte du filigrane',
                fontSize: 'Taille de Police',
                watermarkColor: 'Couleur du Filigrane',
                opacity: 'Opacit√©',
                watermarkMode: 'Mode Filigrane',
                singleWatermark: 'Filigrane Unique',
                tileWatermark: 'Filigrane en Mosa√Øque',
                watermarkPosition: 'Position du Filigrane',
                posTopLeft: 'HG',
                posTopCenter: 'HC',
                posTopRight: 'HD',
                posMiddleLeft: 'MG',
                posCenter: 'C',
                posMiddleRight: 'MD',
                posBottomLeft: 'BG',
                posBottomCenter: 'BC',
                posBottomRight: 'BD',
                horizontalSpacing: 'Espacement Horizontal',
                verticalSpacing: 'Espacement Vertical',
                preview: 'üëÅÔ∏è Aper√ßu',
                reset: 'R√©initialiser',
                resetBtn: '‚Ü∫ R√©initialiser',
                uploadFirst: 'Veuillez d\'abord t√©l√©verser une image',
                instructionsTitle: 'üìñ Instructions',
                instruction1: '<strong>T√©l√©verser</strong>: Cliquez ou glissez pour t√©l√©verser des photos ID (lot support√©)',
                instruction2: '<strong>Recadrage</strong>: Choisissez la taille ou recadrage libre, ajustez le cadre',
                instruction3: '<strong>Redimensionner</strong>: D√©finir les dimensions cibles en pixels',
                instruction4: '<strong>Compresser</strong>: Choisir le format et la qualit√© de sortie',
                instruction5: '<strong>Filigrane</strong>: D√©finir le texte, la couleur et la position',
                instruction6: '<strong>Exporter</strong>: Cliquez sur "G√©n√©rer l\'aper√ßu" puis t√©l√©chargez',
                noteWarning: '<strong>‚ö†Ô∏è Note:</strong> Les grandes images (>4000px) seront automatiquement redimensionn√©es.',
                outputSettings: 'üì§ Param√®tres de Sortie',
                originalDimensions: 'Dimensions Originales',
                originalFileSize: 'Taille Originale',
                outputDimensions: 'Dimensions de Sortie',
                outputFileSize: 'Taille de Sortie',
                compressionRatio: 'Taux de Compression',
                generatePreview: 'üëÅÔ∏è G√©n√©rer l\'Aper√ßu',
                downloadImage: 'üíæ T√©l√©charger l\'Image',
                batchDownload: 'üì¶ T√©l√©chargement Group√© (ZIP)',
                faqTitle: '‚ùì FAQ',
                faq1Question: 'Quelles tailles de photos ID sont support√©es?',
                faq1Answer: 'Supporte 1 pouce (25x35mm), 2 pouces (35x49mm), petit 1 pouce (22x32mm), passeport (33x48mm) et autres tailles courantes. Vous pouvez aussi choisir le mode "Recadrage Libre".',
                faq2Question: 'Quelles couleurs de fond sont disponibles?',
                faq2Answer: 'Supporte rouge, bleu et blanc - les couleurs de fond les plus courantes. Dans les param√®tres "Redimensionner", vous pouvez personnaliser n\'importe quelle couleur.',
                faq3Question: 'Mes photos seront-elles t√©l√©vers√©es sur un serveur?',
                faq3Answer: 'Non, tout le traitement est effectu√© localement dans votre navigateur. Les photos ne quittent jamais votre appareil. C\'est un outil compl√®tement hors ligne.',
                faq4Question: 'Puis-je utiliser des photos prises avec mon t√©l√©phone?',
                faq4Answer: 'Oui, nous recommandons de prendre des photos de face dans des environnements bien √©clair√©s avec un fond simple.',
                faq5Question: 'Quelle r√©solution ont les photos export√©es?',
                faq5Answer: 'Les photos sont export√©es √† la r√©solution d\'impression standard (300dpi). Par exemple, les photos 1 pouce font 295x413 pixels.',
                faq_free_q: 'Cet outil est-il vraiment gratuit ? Est-il s√ªr ?',
                faq_free_a: 'Oui, cet outil est 100% gratuit, sans publicit√©, sans inscription, sans limites d\'utilisation et sans filigrane. Tout le traitement se fait dans votre navigateur ‚Äî vos donn√©es ne quittent jamais votre appareil.',
                relatedTools: 'üîó Outils Connexes',
                toolCompressor: 'Compresseur d\'Image',
                toolCompressorDesc: 'Compresser la taille du fichier',
                toolEditor: '√âditeur d\'Image',
                toolEditorDesc: 'Recadrer, pivoter, filtres',
                toolConverter: 'Convertisseur d\'Image',
                toolConverterDesc: 'Conversion PNG/JPG/WebP',
                toolIco: 'Cr√©ateur ICO',
                toolIcoDesc: 'G√©n√©rer des ic√¥nes de site',
                footerPrivacy: 'Traitement frontend pur, les donn√©es ne sont jamais t√©l√©vers√©es',
                footerBack: '‚Üê Retour √† Web Toolbox',
                trust_users: 'üåç Utilis√© par 50 000+ utilisateurs',
                trust_rating: '‚≠ê Note 4.9/5',
                trust_privacy: 'üîí 100% Priv√©',
                trust_free: 'üö´ Sans pub, sans inscription'
            },
            'es': {
                title: 'üì∑ Recorte de Foto ID y Marca de Agua',
                backToToolbox: '‚Üê Volver a la Caja de Herramientas',
                privacyTitle: 'Esta Herramienta Funciona Completamente Sin Conexi√≥n',
                privacyDesc: 'Todo el procesamiento de im√°genes se realiza localmente en su navegador sin solicitudes de red. Ideal para documentos sensibles como tarjetas de identificaci√≥n, licencias de conducir y pasaportes. Actualice la p√°gina para borrar todos los datos.',
                feature1_title: '100% Gratis y Privado',
                feature1_desc: 'Sin anuncios, sin registro, sin marca de agua. Todo se procesa localmente en tu navegador.',
                featureMultiSize: 'M√∫ltiples Tama√±os',
                featureMultiSizeDesc: 'Soporta tama√±os de 1 pulgada, 2 pulgadas, pasaporte y otros tama√±os comunes de fotos de identificaci√≥n',
                featureBgChange: 'Cambio de Fondo',
                featureBgChangeDesc: 'Cambio con un clic a fondos est√°ndar rojo, azul, blanco o personalice cualquier color',
                featureSmartCrop: 'Recorte Inteligente',
                featureSmartCropDesc: 'Ajuste libremente la posici√≥n del cuadro de recorte con control preciso del ratio de composici√≥n',
                featureInstant: 'Uso Instant√°neo',
                featureInstantDesc: 'Procesamiento frontend puro, sin necesidad de subir al servidor, protegiendo su privacidad',
                imageImport: 'üìÅ Importar Imagen',
                dragOrClick: 'Arrastrar y Soltar o Clic para Subir',
                supportedFormats: 'Soporta JPG / PNG / WEBP',
                tabCrop: 'Recortar',
                tabResize: 'Redimensionar',
                tabCompress: 'Comprimir',
                tabWatermark: 'Marca de Agua',
                photoSize: 'Tama√±o de Foto ID',
                size1inch: '1 pulgada <small>25√ó35mm</small>',
                size2inch: '2 pulgadas <small>35√ó45mm</small>',
                sizeSmall2inch: '2" peque√±o <small>33√ó48mm</small>',
                sizePassport: 'Pasaporte <small>35√ó45mm</small>',
                sizeDriverLicense: 'Licencia <small>22√ó32mm</small>',
                sizeFree: 'Libre <small>Cualquier ratio</small>',
                rotateAngle: '√Ångulo de Rotaci√≥n',
                rotateLeft: '‚Ü∫ Izquierda 90¬∞',
                rotateRight: '‚Üª Derecha 90¬∞',
                applyCrop: '‚úÇÔ∏è Aplicar Recorte',
                lockAspectRatio: 'üîó Bloquear Relaci√≥n de Aspecto',
                width: 'Ancho (px)',
                height: 'Alto (px)',
                auto: 'Auto',
                fillBgColor: 'Color de Fondo de Relleno',
                transparentBg: 'Fondo Transparente (solo PNG)',
                outputFormat: 'Formato de Salida',
                imageQuality: 'Calidad de Imagen',
                targetSizeMode: 'Modo Tama√±o Objetivo',
                targetSize: 'Tama√±o Objetivo (KB)',
                allowError: 'Permite margen de ¬±10%',
                enableWatermark: 'Habilitar Marca de Agua',
                watermarkText: 'Texto de Marca de Agua',
                enterWatermark: 'Ingrese texto de marca de agua',
                fontSize: 'Tama√±o de Fuente',
                watermarkColor: 'Color de Marca de Agua',
                opacity: 'Opacidad',
                watermarkMode: 'Modo de Marca de Agua',
                singleWatermark: 'Marca de Agua √önica',
                tileWatermark: 'Marca de Agua en Mosaico',
                watermarkPosition: 'Posici√≥n de Marca de Agua',
                posTopLeft: 'SI',
                posTopCenter: 'SC',
                posTopRight: 'SD',
                posMiddleLeft: 'MI',
                posCenter: 'C',
                posMiddleRight: 'MD',
                posBottomLeft: 'II',
                posBottomCenter: 'IC',
                posBottomRight: 'ID',
                horizontalSpacing: 'Espaciado Horizontal',
                verticalSpacing: 'Espaciado Vertical',
                preview: 'üëÅÔ∏è Vista Previa',
                reset: 'Restablecer',
                resetBtn: '‚Ü∫ Restablecer',
                uploadFirst: 'Por favor suba una imagen primero',
                instructionsTitle: 'üìñ Instrucciones',
                instruction1: '<strong>Subir Imagen</strong>: Clic o arrastre para subir fotos ID (lote soportado)',
                instruction2: '<strong>Configuraci√≥n de Recorte</strong>: Elija tama√±o de foto ID o recorte libre',
                instruction3: '<strong>Redimensionar</strong>: Establezca dimensiones objetivo en p√≠xeles',
                instruction4: '<strong>Comprimir</strong>: Elija formato y calidad de salida',
                instruction5: '<strong>Marca de Agua</strong>: Configure texto, color y posici√≥n',
                instruction6: '<strong>Exportar</strong>: Clic en "Generar Vista Previa" luego descargue',
                noteWarning: '<strong>‚ö†Ô∏è Nota:</strong> Las im√°genes grandes (>4000px) se escalar√°n autom√°ticamente.',
                outputSettings: 'üì§ Configuraci√≥n de Salida',
                originalDimensions: 'Dimensiones Originales',
                originalFileSize: 'Tama√±o Original',
                outputDimensions: 'Dimensiones de Salida',
                outputFileSize: 'Tama√±o de Salida',
                compressionRatio: 'Ratio de Compresi√≥n',
                generatePreview: 'üëÅÔ∏è Generar Vista Previa',
                downloadImage: 'üíæ Descargar Imagen',
                batchDownload: 'üì¶ Descarga por Lotes (ZIP)',
                faqTitle: '‚ùì Preguntas Frecuentes',
                faq1Question: '¬øQu√© tama√±os de foto ID son compatibles?',
                faq1Answer: 'Soporta 1 pulgada (25x35mm), 2 pulgadas (35x49mm), 1 pulgada peque√±a (22x32mm), pasaporte (33x48mm) y otros tama√±os comunes. Tambi√©n puede elegir el modo "Recorte Libre".',
                faq2Question: '¬øQu√© colores de fondo est√°n disponibles?',
                faq2Answer: 'Soporta rojo, azul y blanco - los colores de fondo m√°s comunes. En la configuraci√≥n "Redimensionar", puede personalizar cualquier color.',
                faq3Question: '¬øSe subir√°n mis fotos a un servidor?',
                faq3Answer: 'No, todo el procesamiento se realiza localmente en su navegador. Las fotos nunca salen de su dispositivo. Es una herramienta completamente sin conexi√≥n.',
                faq4Question: '¬øPuedo usar fotos tomadas con mi tel√©fono?',
                faq4Answer: 'S√≠, recomendamos tomar fotos frontales en ambientes bien iluminados con un fondo simple.',
                faq5Question: '¬øQu√© resoluci√≥n tienen las fotos exportadas?',
                faq5Answer: 'Las fotos se exportan a resoluci√≥n de impresi√≥n est√°ndar (300dpi). Por ejemplo, las fotos de 1 pulgada son 295x413 p√≠xeles.',
                faq_free_q: '¬øEsta herramienta es realmente gratuita? ¬øEs segura?',
                faq_free_a: 'S√≠, esta herramienta es 100% gratuita, sin anuncios, sin registro, sin l√≠mites de uso y sin marcas de agua. Todo el procesamiento ocurre en tu navegador ‚Äî tus datos nunca salen de tu dispositivo.',
                relatedTools: 'üîó Herramientas Relacionadas',
                toolCompressor: 'Compresor de Im√°genes',
                toolCompressorDesc: 'Comprimir tama√±o de archivo',
                toolEditor: 'Editor de Im√°genes',
                toolEditorDesc: 'Recortar, rotar, filtros',
                toolConverter: 'Convertidor de Im√°genes',
                toolConverterDesc: 'Conversi√≥n PNG/JPG/WebP',
                toolIco: 'Creador de ICO',
                toolIcoDesc: 'Generar iconos de sitio web',
                footerPrivacy: 'Procesamiento frontend puro, los datos nunca se suben a servidores',
                footerBack: '‚Üê Volver a Web Toolbox',
                trust_users: 'üåç Usado por m√°s de 50,000 usuarios',
                trust_rating: '‚≠ê Calificaci√≥n 4.9/5',
                trust_privacy: 'üîí 100% Privado',
                trust_free: 'üö´ Sin anuncios, sin registro'
            }
        };

        const langNames = {
            'en': 'üá∫üá∏ English',
            'zh-CN': 'üá®üá≥ ‰∏≠Êñá',
            'fr': 'üá´üá∑ Fran√ßais',
            'es': 'üá™üá∏ Espa√±ol'
        };

        function getBrowserLanguage() {
            const lang = navigator.language || navigator.userLanguage;
            if (lang.startsWith('zh')) return 'zh-CN';
            if (lang.startsWith('fr')) return 'fr';
            if (lang.startsWith('es')) return 'es';
            return 'en';
        }

        function setLanguage(lang) {
            const t = translations[lang] || translations['en'];

            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (t[key]) {
                    el.innerHTML = t[key];
                }
            });

            document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
                const key = el.getAttribute('data-i18n-placeholder');
                if (t[key]) {
                    el.placeholder = t[key];
                }
            });

            document.getElementById('langCurrent').textContent = langNames[lang] || langNames['en'];
            localStorage.setItem('preferred-lang', lang);
        }

        // Language dropdown toggle
        const langDropdown = document.getElementById('langDropdown');
        const langCurrent = document.getElementById('langCurrent');

        langCurrent.addEventListener('click', (e) => {
            e.stopPropagation();
            langDropdown.classList.toggle('active');
        });

        document.querySelectorAll('.lang-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                e.stopPropagation();
                const lang = btn.getAttribute('data-lang');
                setLanguage(lang);
                langDropdown.classList.remove('active');
            });
        });

        document.addEventListener('click', () => {
            langDropdown.classList.remove('active');
        });

        // Initialize language
        const savedLang = localStorage.getItem('preferred-lang');
        const initialLang = savedLang || getBrowserLanguage();
        setLanguage(initialLang);
    })();
    </script>
</body>
</html>
