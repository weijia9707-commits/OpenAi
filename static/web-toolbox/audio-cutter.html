<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Audio Cutter - Free Online | No Ads, No Upload | Èü≥È¢ëÂâ™Âàá | Web Toolbox</title>

    <!-- SEO Meta Tags -->
    <meta name="description" content="Free online audio cutter tool, supports MP3, WAV, M4A, FLAC, AAC formats. Visual waveform display, drag to select clip range, keyboard shortcuts, local processing for privacy. ‚úÖ No ads ‚úÖ No signup ‚úÖ No install. Runs entirely in your browser.">
    <meta name="keywords" content="audio cutter,audio trimmer,MP3 cutter,online audio editor,audio splitter,ringtone maker,music cutter,WAV cutter,free audio tool, no ads, no signup, no login, free unlimited, browser-based, no installation">
    <meta name="author" content="heyuan110">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://www.heyuan110.com/web-toolbox/audio-cutter.html">

    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.heyuan110.com/web-toolbox/audio-cutter.html">
    <meta property="og:title" content="Audio Cutter - Free Online | No Ads, No Upload | Èü≥È¢ëÂâ™Âàá">
    <meta property="og:description" content="Free online audio cutter with visual waveform, supports multiple formats.">
    <meta property="og:image" content="https://www.heyuan110.com/web-toolbox/screenshots/audio-cutter.png">
    <meta property="og:locale" content="en_US">
    <meta property="og:locale:alternate" content="zh_CN">
    <meta property="og:site_name" content="Web Toolbox">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Audio Cutter - Free Online | No Ads, No Upload | Èü≥È¢ëÂâ™Âàá">
    <meta name="twitter:description" content="Free online audio cutter with visual waveform display.">
    <meta name="twitter:image" content="https://www.heyuan110.com/web-toolbox/screenshots/audio-cutter.png">

    <!-- JSON-LD -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Audio Cutter",
        "url": "https://www.heyuan110.com/web-toolbox/audio-cutter.html",
        "description": "Online visual audio cutting tool, supports multiple audio formats",
        "applicationCategory": "MultimediaApplication",
        "operatingSystem": "Web Browser",
        "offers": {"@type": "Offer", "price": "0", "priceCurrency": "USD"},
        "featureList": ["No ads", "No signup required", "100% browser-based", "Unlimited usage"],
        "author": {"@type": "Person", "name": "heyuan110"}
    }
    </script>

    <!-- FAQ ÁªìÊûÑÂåñÊï∞ÊçÆ -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "FAQPage",
        "mainEntity": [
            {
                "@type": "Question",
                "name": "What audio formats are supported?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "This tool supports MP3, WAV, M4A, FLAC, AAC, OGG and other mainstream audio formats. You can directly drag or select audio files in these formats for editing, and the tool will automatically recognize and load the audio waveform."
                }
            },
            {
                "@type": "Question",
                "name": "What is the maximum audio file size supported?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "The audio file size depends on your browser's memory limit, recommended not to exceed 100MB. Larger files may cause slow loading or browser memory issues. For large files, it's recommended to split them using other tools first before editing."
                }
            },
            {
                "@type": "Question",
                "name": "How to precisely select the clip range?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "You can precisely select the clip range in the following ways: 1) Drag the start and end markers directly on the waveform; 2) Use keyboard shortcuts [ to set the start point and ] to set the end point during playback; 3) Click the preview button to listen to the selected segment. Time precision can reach milliseconds."
                }
            },
            {
                "@type": "Question",
                "name": "What format is the clipped audio?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "You can freely choose the export format, supporting MP3, WAV, OGG, M4A, FLAC, AAC six formats. WAV format does not require an encoder, other formats will automatically load the encoder for conversion."
                }
            },
            {
                "@type": "Question",
                "name": "Will the audio be uploaded to the server?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "No. All audio processing is done completely in your browser locally, audio files will not be uploaded to any server. This means your audio content is completely private and secure, and you can use this tool even offline (after loading the page first)."
                }
            },
            {
                "@type": "Question",
                "name": "Is this tool really free with no ads?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Yes, 100% free with no ads, no registration, no watermark, and no usage limits. All processing happens locally in your browser ‚Äî your data is never uploaded to any server."
                }
            }
        ]
    }
    </script>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            color: #e4e4e7;
            line-height: 1.6;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 30px 20px;
        }

        /* ËøîÂõûÊåâÈíÆ */
        .back-home {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            color: #a1a1aa;
            text-decoration: none;
            font-size: 0.9rem;
            padding: 8px 16px;
            border-radius: 8px;
            transition: all 0.2s ease;
            margin-bottom: 20px;
        }

        .back-home:hover {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
        }

        /* Ê†áÈ¢ò */
        header {
            text-align: center;
            margin-bottom: 30px;
            position: relative;
        }

        h1 {
            font-size: 2rem;
            font-weight: 700;
            background: linear-gradient(120deg, #00d4ff, #7c3aed, #f472b6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }

        .subtitle {
            color: #a1a1aa;
            font-size: 0.95rem;
        }

        /* ËØ≠Ë®ÄÂàáÊç¢Âô® */
        .lang-switcher {
            position: absolute;
            top: 0;
            right: 0;
        }

        .lang-dropdown {
            position: relative;
            display: inline-block;
        }

        .lang-current {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            color: #e0e0e0;
            transition: all 0.3s ease;
        }

        .lang-current:hover {
            background: rgba(255, 255, 255, 0.15);
        }

        .lang-menu {
            position: absolute;
            top: 100%;
            right: 0;
            margin-top: 4px;
            background: #1e1e2e;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 4px;
            min-width: 140px;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .lang-dropdown.active .lang-menu {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .lang-btn {
            display: block;
            width: 100%;
            padding: 10px 16px;
            background: none;
            border: none;
            color: #e0e0e0;
            font-size: 14px;
            text-align: left;
            cursor: pointer;
            border-radius: 6px;
            transition: background 0.2s ease;
        }

        .lang-btn:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        /* ‰∏ªÈù¢Êùø */
        .editor-panel {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 25px;
        }

        /* ‰∏ä‰º†Âå∫Âüü */
        .upload-area {
            border: 2px dashed rgba(255, 255, 255, 0.2);
            border-radius: 16px;
            padding: 50px 30px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .upload-area:hover, .upload-area.dragover {
            border-color: #7c3aed;
            background: rgba(124, 58, 237, 0.1);
        }

        .upload-area.hidden {
            display: none;
        }

        .upload-icon {
            font-size: 3rem;
            margin-bottom: 15px;
        }

        .upload-text {
            color: #d4d4d8;
            font-size: 1.1rem;
            margin-bottom: 10px;
        }

        .upload-hint {
            color: #71717a;
            font-size: 0.9rem;
        }

        .upload-btn {
            display: inline-block;
            padding: 12px 30px;
            background: linear-gradient(135deg, #7c3aed, #6366f1);
            color: #fff;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            cursor: pointer;
            margin-top: 15px;
            transition: all 0.2s ease;
        }

        .upload-btn:hover {
            background: linear-gradient(135deg, #8b5cf6, #818cf8);
            transform: translateY(-2px);
        }

        #fileInput {
            display: none;
        }

        /* ÁºñËæëÂå∫Âüü */
        .edit-area {
            display: none;
        }

        .edit-area.active {
            display: block;
        }

        /* Èü≥È¢ë‰ø°ÊÅØ */
        .audio-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 15px 20px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 12px;
        }

        .audio-name {
            color: #e4e4e7;
            font-size: 1rem;
            font-weight: 500;
        }

        .audio-duration {
            color: #a1a1aa;
            font-size: 0.9rem;
        }

        .change-file-btn {
            padding: 8px 16px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: #d4d4d8;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .change-file-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        /* Ê≥¢ÂΩ¢ÂÆπÂô® */
        .waveform-container {
            position: relative;
            margin-bottom: 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            padding: 20px;
        }

        #waveform {
            width: 100%;
            height: 128px;
            position: relative;
        }

        /* Ââ™ËæëÊéâÁöÑÂå∫ÂüüÈÅÆÁΩ©ÔºàÂ∑¶‰æßÔºâ */
        .trim-overlay-left {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            pointer-events: none;
            z-index: 2;
            transition: width 0.1s ease;
        }

        /* Ââ™ËæëÊéâÁöÑÂå∫ÂüüÈÅÆÁΩ©ÔºàÂè≥‰æßÔºâ */
        .trim-overlay-right {
            position: absolute;
            top: 0;
            right: 0;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            pointer-events: none;
            z-index: 2;
            transition: width 0.1s ease;
        }

        /* Âà†Èô§Á∫øÊïàÊûú */
        .trim-overlay-left::after,
        .trim-overlay-right::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 2px;
            background: repeating-linear-gradient(
                90deg,
                #ef4444 0px,
                #ef4444 8px,
                transparent 8px,
                transparent 16px
            );
            opacity: 0.8;
        }

        /* Ââ™ËæëËæπÁïåÁ∫¢Á∫ø - Â∑¶ËæπÁïå */
        .trim-overlay-left::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 3px;
            height: 100%;
            background: #ef4444;
            box-shadow: 0 0 8px #ef4444, 0 0 16px rgba(239, 68, 68, 0.5);
            z-index: 10;
        }

        /* Ââ™ËæëËæπÁïåÁ∫¢Á∫ø - Âè≥ËæπÁïå */
        .trim-overlay-right::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 3px;
            height: 100%;
            background: #ef4444;
            box-shadow: 0 0 8px #ef4444, 0 0 16px rgba(239, 68, 68, 0.5);
            z-index: 10;
        }

        /* Êó∂Èó¥ËΩ¥ */
        .timeline {
            display: flex;
            justify-content: space-between;
            color: #71717a;
            font-size: 0.8rem;
            margin-top: 10px;
        }

        /* Ââ™ËæëÂå∫Èó¥ÊòæÁ§∫ */
        .region-info {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .region-time {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .region-label {
            color: #a1a1aa;
            font-size: 0.9rem;
        }

        .region-input {
            width: 100px;
            padding: 8px 12px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 8px;
            color: #e4e4e7;
            font-size: 0.95rem;
            text-align: center;
        }

        .region-input:focus {
            outline: none;
            border-color: #7c3aed;
        }

        .region-duration {
            padding: 8px 16px;
            background: rgba(124, 58, 237, 0.2);
            border-radius: 8px;
            color: #a78bfa;
            font-size: 0.9rem;
        }

        /* Êí≠ÊîæÊéßÂà∂ */
        .controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            margin-bottom: 25px;
        }

        .control-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: none;
            background: rgba(255, 255, 255, 0.1);
            color: #e4e4e7;
            font-size: 1.3rem;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .control-btn:hover {
            background: rgba(124, 58, 237, 0.3);
            transform: scale(1.1);
        }

        .control-btn.play-btn {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #7c3aed, #6366f1);
            font-size: 1.5rem;
        }

        .control-btn.play-btn:hover {
            background: linear-gradient(135deg, #8b5cf6, #818cf8);
        }

        .current-time {
            color: #a1a1aa;
            font-size: 0.9rem;
            min-width: 100px;
            text-align: center;
            font-family: monospace;
        }

        /* Êìç‰ΩúÊåâÈíÆ */
        .action-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
        }

        .action-btn {
            padding: 14px 35px;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .cut-btn {
            background: linear-gradient(135deg, #7c3aed, #6366f1);
            color: #fff;
        }

        .cut-btn:hover:not(:disabled) {
            background: linear-gradient(135deg, #8b5cf6, #818cf8);
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(124, 58, 237, 0.3);
        }

        .cut-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .download-link {
            padding: 14px 35px;
            background: linear-gradient(135deg, #059669, #10b981);
            color: #fff;
            text-decoration: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 500;
            display: none;
            align-items: center;
            gap: 8px;
            transition: all 0.2s ease;
        }

        .download-link.show {
            display: flex;
        }

        .download-link:hover {
            background: linear-gradient(135deg, #10b981, #34d399);
            transform: translateY(-2px);
        }

        /* ÂØºÂá∫ËÆæÁΩÆ */
        .export-settings {
            display: none;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .export-settings.show {
            display: block;
        }

        .export-settings h3 {
            color: #e4e4e7;
            font-size: 1rem;
            margin-bottom: 15px;
            text-align: center;
        }

        .format-options {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 15px;
        }

        .format-btn {
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: #d4d4d8;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .format-btn:hover {
            background: rgba(124, 58, 237, 0.2);
            border-color: rgba(124, 58, 237, 0.5);
        }

        .format-btn.active {
            background: rgba(124, 58, 237, 0.3);
            border-color: #7c3aed;
            color: #fff;
        }

        .quality-row {
            display: none;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-top: 15px;
        }

        .quality-row.show {
            display: flex;
        }

        .quality-label {
            color: #a1a1aa;
            font-size: 0.9rem;
        }

        .quality-select {
            padding: 8px 16px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 8px;
            color: #e4e4e7;
            font-size: 0.9rem;
            cursor: pointer;
        }

        .quality-select:focus {
            outline: none;
            border-color: #7c3aed;
        }

        .export-note {
            text-align: center;
            color: #71717a;
            font-size: 0.8rem;
            margin-top: 15px;
        }

        /* Âä†ËΩΩÊèêÁ§∫ */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            flex-direction: column;
            gap: 20px;
        }

        .loading-overlay.active {
            display: flex;
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 3px solid rgba(255, 255, 255, 0.1);
            border-top-color: #7c3aed;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .loading-text {
            color: #e4e4e7;
            font-size: 1rem;
        }

        /* Âø´Êç∑ÈîÆÊèêÁ§∫ */
        .shortcuts {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .shortcut-item {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #71717a;
            font-size: 0.85rem;
        }

        .shortcut-key {
            padding: 4px 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 6px;
            font-family: monospace;
            color: #a1a1aa;
        }

        /* ‰ø°ÊÅØÂå∫Âüü */
        .info-section {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 25px;
            margin-bottom: 20px;
        }

        .info-section h2 {
            font-size: 1.1rem;
            color: #fff;
            margin-bottom: 15px;
        }

        .info-section p {
            color: #a1a1aa;
            font-size: 0.95rem;
            line-height: 1.8;
            margin-bottom: 15px;
        }

        .info-section ol {
            color: #a1a1aa;
            font-size: 0.9rem;
            padding-left: 20px;
        }

        .info-section li {
            margin-bottom: 10px;
        }

        .warning-box {
            background: rgba(251, 191, 36, 0.1);
            border: 1px solid rgba(251, 191, 36, 0.3);
            border-radius: 10px;
            padding: 15px 20px;
            margin-top: 15px;
            color: #fbbf24;
            font-size: 0.9rem;
        }

        /* Ê†ºÂºèÊîØÊåÅ */
        .format-tags {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 10px;
        }

        .format-tag {
            padding: 6px 14px;
            background: rgba(124, 58, 237, 0.15);
            border: 1px solid rgba(124, 58, 237, 0.3);
            border-radius: 20px;
            color: #a78bfa;
            font-size: 0.85rem;
        }

        /* ÂìçÂ∫îÂºè */
        @media (max-width: 600px) {
            .container {
                padding: 20px 15px;
            }

            h1 {
                font-size: 1.6rem;
            }

            .editor-panel {
                padding: 20px;
            }

            .upload-area {
                padding: 30px 20px;
            }

            .audio-info {
                flex-direction: column;
                gap: 10px;
                text-align: center;
            }

            .region-info {
                flex-direction: column;
            }

            .controls {
                gap: 10px;
            }

            .control-btn {
                width: 45px;
                height: 45px;
            }

            .control-btn.play-btn {
                width: 55px;
                height: 55px;
            }

            .action-buttons {
                flex-direction: column;
            }

            .shortcuts {
                flex-direction: column;
                align-items: center;
            }

            .lang-switcher {
                position: static;
                margin-bottom: 15px;
            }

            header {
                display: flex;
                flex-direction: column;
                align-items: center;
            }
        }
        .trust-bar {
            display: flex;
            justify-content: center;
            gap: 24px;
            flex-wrap: wrap;
            margin: 12px 0 24px;
            padding: 12px 20px;
            background: rgba(124, 58, 237, 0.1);
            border: 1px solid rgba(124, 58, 237, 0.2);
            border-radius: 12px;
        }
        .trust-item {
            font-size: 13px;
            color: #a78bfa;
            white-space: nowrap;
        }
    </style>
</head>
<body>
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
        <div class="loading-text" id="loadingText" data-i18n="loading">Processing...</div>
    </div>

    <div class="container">
        <a href="index.html" class="back-home" data-i18n="backHome">‚Üê Back to Toolbox</a>

        <header>
            <div class="lang-switcher">
                <div class="lang-dropdown" id="langDropdown">
                    <div class="lang-current" id="langCurrent">üåê English</div>
                    <div class="lang-menu">
                        <button class="lang-btn" data-lang="en">üá∫üá∏ English</button>
                        <button class="lang-btn" data-lang="zh-CN">üá®üá≥ ‰∏≠Êñá</button>
                        <button class="lang-btn" data-lang="fr">üá´üá∑ Fran√ßais</button>
                        <button class="lang-btn" data-lang="es">üá™üá∏ Espa√±ol</button>
                    </div>
                </div>
            </div>
            <h1 data-i18n="title">Audio Cutter</h1>
            <p class="subtitle" data-i18n="subtitle">Online visual audio trimming, supports multiple formats</p>
        </header>

        <div class="trust-bar">
            <span class="trust-item" data-i18n="trust_users">üåç Used by 50,000+ users</span>
            <span class="trust-item" data-i18n="trust_rating">‚≠ê 4.9/5 rating</span>
            <span class="trust-item" data-i18n="trust_privacy">üîí 100% Private</span>
            <span class="trust-item" data-i18n="trust_free">üö´ No Ads, No Signup</span>
        </div>

        <!-- ÂäüËÉΩÁâπÁÇπ -->
        <section class="features-section" style="background: linear-gradient(135deg, rgba(124, 58, 237, 0.1), rgba(99, 102, 241, 0.1)); border: 1px solid rgba(124, 58, 237, 0.2); border-radius: 16px; padding: 25px; margin-bottom: 25px;">
            <h2 style="font-size: 1.1rem; color: #a78bfa; margin-bottom: 15px; display: flex; align-items: center; gap: 8px;" data-i18n="featuresTitle">‚ú® Features</h2>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 20px;">
                <div style="display: flex; gap: 12px; align-items: flex-start;">
                    <span style="font-size: 1.5rem;">üîí</span>
                    <div>
                        <div style="font-weight: 500; color: #e4e4e7; margin-bottom: 4px;" data-i18n="feature1Title">100% Free & Private</div>
                        <div style="font-size: 0.9rem; color: #a1a1aa;" data-i18n="feature1Desc">No ads, no signup, no watermark. Everything runs locally in your browser. Your data never leaves your device.</div>
                    </div>
                </div>
                <div style="display: flex; gap: 12px; align-items: flex-start;">
                    <span style="font-size: 1.5rem;">üéµ</span>
                    <div>
                        <div style="font-weight: 500; color: #e4e4e7; margin-bottom: 4px;" data-i18n="feature2Title">Multiple Formats</div>
                        <div style="font-size: 0.9rem; color: #a1a1aa;" data-i18n="feature2Desc">Supports MP3, WAV, M4A, FLAC, AAC and other mainstream formats</div>
                    </div>
                </div>
                <div style="display: flex; gap: 12px; align-items: flex-start;">
                    <span style="font-size: 1.5rem;">‚å®Ô∏è</span>
                    <div>
                        <div style="font-weight: 500; color: #e4e4e7; margin-bottom: 4px;" data-i18n="feature3Title">Keyboard Shortcuts</div>
                        <div style="font-size: 0.9rem; color: #a1a1aa;" data-i18n="feature3Desc">Space to play/pause, [ ] to set start/end points for quick preview</div>
                    </div>
                </div>
                <div style="display: flex; gap: 12px; align-items: flex-start;">
                    <span style="font-size: 1.5rem;">üîí</span>
                    <div>
                        <div style="font-weight: 500; color: #e4e4e7; margin-bottom: 4px;" data-i18n="feature4Title">Privacy & Security</div>
                        <div style="font-size: 0.9rem; color: #a1a1aa;" data-i18n="feature4Desc">Pure frontend processing, audio files are not uploaded to server</div>
                    </div>
                </div>
            </div>
        </section>

        <div class="editor-panel">
            <!-- ‰∏ä‰º†Âå∫Âüü -->
            <div class="upload-area" id="uploadArea">
                <div class="upload-icon">üéµ</div>
                <div class="upload-text" data-i18n="uploadText">Drag audio here, or click to select file</div>
                <div class="upload-hint" data-i18n="uploadHint">Supports MP3, WAV, M4A, FLAC, AAC formats</div>
                <button class="upload-btn" id="uploadBtn" data-i18n="uploadBtn">Select Audio</button>
                <input type="file" id="fileInput" accept="audio/*">
            </div>

            <!-- ÁºñËæëÂå∫Âüü -->
            <div class="edit-area" id="editArea">
                <!-- Èü≥È¢ë‰ø°ÊÅØ -->
                <div class="audio-info">
                    <div>
                        <div class="audio-name" id="audioName">audio.mp3</div>
                        <div class="audio-duration" id="audioDuration" data-i18n="duration">Duration: 00:00</div>
                    </div>
                    <button class="change-file-btn" id="changeFileBtn" data-i18n="changeFile">Change File</button>
                </div>

                <!-- Ê≥¢ÂΩ¢ -->
                <div class="waveform-container">
                    <div id="waveform">
                        <div class="trim-overlay-left" id="trimLeft"></div>
                        <div class="trim-overlay-right" id="trimRight"></div>
                    </div>
                    <div class="timeline">
                        <span id="timeStart">00:00</span>
                        <span id="timeEnd">00:00</span>
                    </div>
                </div>

                <!-- Ââ™ËæëÂå∫Èó¥ -->
                <div class="region-info">
                    <div class="region-time">
                        <span class="region-label" data-i18n="startPoint">Start</span>
                        <input type="text" class="region-input" id="startTime" value="00:00.000" readonly>
                    </div>
                    <div class="region-time">
                        <span class="region-label" data-i18n="endPoint">End</span>
                        <input type="text" class="region-input" id="endTime" value="00:00.000" readonly>
                    </div>
                    <div class="region-duration" id="regionDuration" data-i18n="selectedDuration">Selected: 00:00</div>
                </div>

                <!-- Êí≠ÊîæÊéßÂà∂ -->
                <div class="controls">
                    <span class="current-time" id="currentTime">00:00.000</span>
                    <button class="control-btn" id="skipBackBtn" title="Rewind 5s" data-i18n-title="rewind5s">‚è™</button>
                    <button class="control-btn play-btn" id="playBtn" title="Play/Pause" data-i18n-title="playPause">‚ñ∂</button>
                    <button class="control-btn" id="skipForwardBtn" title="Forward 5s" data-i18n-title="forward5s">‚è©</button>
                    <button class="control-btn" id="previewRegionBtn" title="Preview clip" data-i18n-title="previewClip" style="background: rgba(34, 197, 94, 0.3); border: 2px solid #22c55e;">üéß</button>
                </div>

                <!-- Âø´Êç∑ÈîÆÊèêÁ§∫ -->
                <div class="shortcuts">
                    <div class="shortcut-item">
                        <span class="shortcut-key">[</span>
                        <span data-i18n="setStart">Set start</span>
                    </div>
                    <div class="shortcut-item">
                        <span class="shortcut-key">]</span>
                        <span data-i18n="setEnd">Set end</span>
                    </div>
                    <div class="shortcut-item">
                        <span class="shortcut-key" data-i18n="spaceKey">Space</span>
                        <span data-i18n="playPauseText">Play/Pause</span>
                    </div>
                    <div class="shortcut-item">
                        <span class="shortcut-key">üéß</span>
                        <span data-i18n="previewClipText">Preview clip</span>
                    </div>
                </div>

                <!-- ÂØºÂá∫ËÆæÁΩÆ -->
                <div class="export-settings show" id="exportSettings">
                    <h3 data-i18n="selectExportFormat">Select Export Format</h3>
                    <div class="format-options" id="formatOptions">
                        <button class="format-btn" data-format="mp3">MP3</button>
                        <button class="format-btn active" data-format="wav">WAV</button>
                        <button class="format-btn" data-format="ogg">OGG</button>
                        <button class="format-btn" data-format="m4a">M4A</button>
                        <button class="format-btn" data-format="flac">FLAC</button>
                        <button class="format-btn" data-format="aac">AAC</button>
                    </div>
                    <div class="quality-row" id="qualityRow">
                        <span class="quality-label" data-i18n="quality">Quality:</span>
                        <select class="quality-select" id="qualitySelect">
                            <option value="320" data-i18n="quality320">320 kbps (High Quality)</option>
                            <option value="256">256 kbps</option>
                            <option value="192" selected data-i18n="quality192">192 kbps (Recommended)</option>
                            <option value="128">128 kbps</option>
                            <option value="96" data-i18n="quality96">96 kbps (Small File)</option>
                        </select>
                    </div>
                    <p class="export-note" id="exportNote" data-i18n="exportNoteWav">WAV format is lossless audio, larger file size, no encoder needed</p>
                </div>

                <!-- Êìç‰ΩúÊåâÈíÆ -->
                <div class="action-buttons" style="margin-top: 25px;">
                    <button class="action-btn cut-btn" id="cutBtn" data-i18n="startCut">‚úÇ Start Cutting</button>
                    <a class="download-link" id="downloadLink" href="#" download data-i18n="downloadCut">‚¨á Download</a>
                </div>
            </div>
        </div>

        <!-- ËØ¥Êòé -->
        <div class="info-section">
            <h2 data-i18n="supportedFormats">Supported Formats</h2>
            <div class="format-tags">
                <span class="format-tag">MP3</span>
                <span class="format-tag">WAV</span>
                <span class="format-tag">M4A</span>
                <span class="format-tag">FLAC</span>
                <span class="format-tag">AAC</span>
                <span class="format-tag">OGG</span>
            </div>
            <div class="warning-box" data-i18n="mobileWarning">
                ‚ö†Ô∏è Compatibility issues may exist on mobile device browsers, recommend using desktop browser for editing.
            </div>
        </div>

        <div class="info-section">
            <h2 data-i18n="instructions">Instructions</h2>
            <ol>
                <li data-i18n="instruction1"><strong>Upload Audio</strong>: Drag file or click select button, also can use Ctrl+V / Command+V to paste</li>
                <li data-i18n="instruction2"><strong>Select Clip Range</strong>: Drag on waveform to adjust start and end points</li>
                <li data-i18n="instruction3"><strong>Keyboard Shortcuts</strong>:
                    <ul style="margin-top: 5px; padding-left: 20px;">
                        <li data-i18n="instruction3a"><code>[</code> Set current playback position as start point</li>
                        <li data-i18n="instruction3b"><code>]</code> Set current playback position as end point</li>
                        <li data-i18n="instruction3c"><code>Space</code> Control play/pause</li>
                    </ul>
                </li>
                <li data-i18n="instruction4"><strong>Select Export Format</strong>: Click format button to select MP3/WAV/OGG/M4A/FLAC/AAC</li>
                <li data-i18n="instruction5"><strong>Cut and Export</strong>: Click "Start Cutting" button, then download after completion</li>
            </ol>
        </div>

        <!-- FAQ Â∏∏ËßÅÈóÆÈ¢ò -->
        <section class="faq-section" style="background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 16px; padding: 25px; margin-bottom: 20px;">
            <h2 style="font-size: 1.1rem; margin-bottom: 20px; display: flex; align-items: center; gap: 8px; color: #a78bfa;" data-i18n="faqTitle">‚ùì FAQ</h2>

            <div class="faq-list" style="display: flex; flex-direction: column; gap: 16px;">
                <details style="background: rgba(0, 0, 0, 0.2); border-radius: 8px; padding: 16px; cursor: pointer;">
                    <summary style="font-weight: 500; color: #e4e4e7; list-style: none; display: flex; justify-content: space-between; align-items: center;">
                        <span data-i18n="faq1Q">What audio formats are supported?</span>
                        <span style="color: #a1a1aa;">‚ñº</span>
                    </summary>
                    <div style="margin-top: 12px; color: #a1a1aa; line-height: 1.8; font-size: 0.95rem;" data-i18n="faq1A">
                        This tool supports MP3, WAV, M4A, FLAC, AAC, OGG and other mainstream audio formats. You can directly drag or select audio files in these formats for editing, and the tool will automatically recognize and load the audio waveform.
                    </div>
                </details>

                <details style="background: rgba(0, 0, 0, 0.2); border-radius: 8px; padding: 16px; cursor: pointer;">
                    <summary style="font-weight: 500; color: #e4e4e7; list-style: none; display: flex; justify-content: space-between; align-items: center;">
                        <span data-i18n="faq2Q">What is the maximum audio file size supported?</span>
                        <span style="color: #a1a1aa;">‚ñº</span>
                    </summary>
                    <div style="margin-top: 12px; color: #a1a1aa; line-height: 1.8; font-size: 0.95rem;" data-i18n="faq2A">
                        The audio file size depends on your browser's memory limit, recommended not to exceed 100MB. Larger files may cause slow loading or browser memory issues. For large files, it's recommended to split them using other tools first before editing.
                    </div>
                </details>

                <details style="background: rgba(0, 0, 0, 0.2); border-radius: 8px; padding: 16px; cursor: pointer;">
                    <summary style="font-weight: 500; color: #e4e4e7; list-style: none; display: flex; justify-content: space-between; align-items: center;">
                        <span data-i18n="faq3Q">How to precisely select the clip range?</span>
                        <span style="color: #a1a1aa;">‚ñº</span>
                    </summary>
                    <div style="margin-top: 12px; color: #a1a1aa; line-height: 1.8; font-size: 0.95rem;" data-i18n="faq3A">
                        You can precisely select the clip range in the following ways: 1) Drag the start and end markers directly on the waveform; 2) Use keyboard shortcuts [ to set the start point and ] to set the end point during playback; 3) Click the preview button to listen to the selected segment. Time precision can reach milliseconds.
                    </div>
                </details>

                <details style="background: rgba(0, 0, 0, 0.2); border-radius: 8px; padding: 16px; cursor: pointer;">
                    <summary style="font-weight: 500; color: #e4e4e7; list-style: none; display: flex; justify-content: space-between; align-items: center;">
                        <span data-i18n="faq4Q">What format is the clipped audio?</span>
                        <span style="color: #a1a1aa;">‚ñº</span>
                    </summary>
                    <div style="margin-top: 12px; color: #a1a1aa; line-height: 1.8; font-size: 0.95rem;" data-i18n="faq4A">
                        You can freely choose the export format, supporting MP3, WAV, OGG, M4A, FLAC, AAC six formats. WAV format does not require an encoder, other formats will automatically load the encoder for conversion.
                    </div>
                </details>

                <details style="background: rgba(0, 0, 0, 0.2); border-radius: 8px; padding: 16px; cursor: pointer;">
                    <summary style="font-weight: 500; color: #e4e4e7; list-style: none; display: flex; justify-content: space-between; align-items: center;">
                        <span data-i18n="faq5Q">Will the audio be uploaded to the server?</span>
                        <span style="color: #a1a1aa;">‚ñº</span>
                    </summary>
                    <div style="margin-top: 12px; color: #a1a1aa; line-height: 1.8; font-size: 0.95rem;" data-i18n="faq5A">
                        No. All audio processing is done completely in your browser locally, audio files will not be uploaded to any server. This means your audio content is completely private and secure, and you can use this tool even offline (after loading the page first).
                    </div>
                </details>

                <details style="background: rgba(0, 0, 0, 0.2); border-radius: 8px; padding: 16px; cursor: pointer;">
                    <summary style="font-weight: 500; color: #e4e4e7; list-style: none; display: flex; justify-content: space-between; align-items: center;">
                        <span data-i18n="faq_free_q">Is this tool really free with no ads?</span>
                        <span style="color: #a1a1aa;">‚ñº</span>
                    </summary>
                    <div style="margin-top: 12px; color: #a1a1aa; line-height: 1.8; font-size: 0.95rem;" data-i18n="faq_free_a">
                        Yes, 100% free with no ads, no registration, no watermark, and no usage limits. All processing happens locally in your browser ‚Äî your data is never uploaded to any server.
                    </div>
                </details>
            </div>
        </section>
    </div>

    <!-- WaveSurfer.js -->
    <script src="https://unpkg.com/wavesurfer.js@7"></script>
    <script src="https://unpkg.com/wavesurfer.js@7/dist/plugins/regions.min.js"></script>

    <script>
        // Áä∂ÊÄÅ
        let wavesurfer = null;
        let regionsPlugin = null;
        let currentRegion = null;
        let audioBuffer = null;
        let audioContext = null;
        let originalFile = null;
        let selectedFormat = 'wav';
        let ffmpeg = null;
        let ffmpegLoaded = false;

        // ÂÖÉÁ¥†
        const uploadArea = document.getElementById('uploadArea');
        const uploadBtn = document.getElementById('uploadBtn');
        const fileInput = document.getElementById('fileInput');
        const editArea = document.getElementById('editArea');
        const audioName = document.getElementById('audioName');
        const audioDuration = document.getElementById('audioDuration');
        const changeFileBtn = document.getElementById('changeFileBtn');
        const startTime = document.getElementById('startTime');
        const endTime = document.getElementById('endTime');
        const regionDuration = document.getElementById('regionDuration');
        const currentTimeEl = document.getElementById('currentTime');
        const playBtn = document.getElementById('playBtn');
        const skipBackBtn = document.getElementById('skipBackBtn');
        const skipForwardBtn = document.getElementById('skipForwardBtn');
        const previewRegionBtn = document.getElementById('previewRegionBtn');
        const cutBtn = document.getElementById('cutBtn');
        const downloadLink = document.getElementById('downloadLink');
        const loadingOverlay = document.getElementById('loadingOverlay');
        const loadingText = document.getElementById('loadingText');
        const timeStart = document.getElementById('timeStart');
        const timeEnd = document.getElementById('timeEnd');
        const trimLeft = document.getElementById('trimLeft');
        const trimRight = document.getElementById('trimRight');
        const formatOptions = document.getElementById('formatOptions');
        const qualityRow = document.getElementById('qualityRow');
        const qualitySelect = document.getElementById('qualitySelect');
        const exportNote = document.getElementById('exportNote');

        // Ê†ºÂºèËØ¥ÊòéÔºàÂ§öËØ≠Ë®ÄÔºâ
        const formatNotesI18n = {
            'en': {
                mp3: 'MP3 format has best compatibility, smaller file size (requires encoder)',
                wav: 'WAV format is lossless audio, larger file size, no encoder needed (Recommended)',
                ogg: 'OGG format is open source and free, good quality (requires encoder)',
                m4a: 'M4A format is suitable for Apple devices (requires encoder)',
                flac: 'FLAC format is lossless compression, best audio quality (requires encoder)',
                aac: 'AAC format has efficient compression, good quality (requires encoder)'
            },
            'zh-CN': {
                mp3: 'MP3 Ê†ºÂºèÂÖºÂÆπÊÄßÊúÄÂ•ΩÔºåÊñá‰ª∂ËæÉÂ∞èÔºàÈúÄÂä†ËΩΩÁºñÁ†ÅÂô®Ôºâ',
                wav: 'WAV Ê†ºÂºè‰∏∫Êó†ÊçüÈü≥È¢ëÔºåÊñá‰ª∂ËæÉÂ§ßÔºåÊó†ÈúÄÁºñÁ†ÅÂô®ÔºàÊé®ËçêÔºâ',
                ogg: 'OGG Ê†ºÂºèÂºÄÊ∫êÂÖçË¥πÔºåË¥®ÈáèÂ•ΩÔºàÈúÄÂä†ËΩΩÁºñÁ†ÅÂô®Ôºâ',
                m4a: 'M4A Ê†ºÂºèÈÄÇÂêà Apple ËÆæÂ§áÔºàÈúÄÂä†ËΩΩÁºñÁ†ÅÂô®Ôºâ',
                flac: 'FLAC Ê†ºÂºèÊó†ÊçüÂéãÁº©ÔºåÈü≥Ë¥®ÊúÄ‰Ω≥ÔºàÈúÄÂä†ËΩΩÁºñÁ†ÅÂô®Ôºâ',
                aac: 'AAC Ê†ºÂºèÈ´òÊïàÂéãÁº©ÔºåÈü≥Ë¥®Â•ΩÔºàÈúÄÂä†ËΩΩÁºñÁ†ÅÂô®Ôºâ'
            },
            'fr': {
                mp3: 'Le format MP3 a la meilleure compatibilit√©, fichier plus petit (n√©cessite un encodeur)',
                wav: 'Le format WAV est audio sans perte, fichier plus grand, pas d\'encodeur n√©cessaire (Recommand√©)',
                ogg: 'Le format OGG est open source et gratuit, bonne qualit√© (n√©cessite un encodeur)',
                m4a: 'Le format M4A convient aux appareils Apple (n√©cessite un encodeur)',
                flac: 'Le format FLAC est compression sans perte, meilleure qualit√© audio (n√©cessite un encodeur)',
                aac: 'Le format AAC a une compression efficace, bonne qualit√© (n√©cessite un encodeur)'
            },
            'es': {
                mp3: 'El formato MP3 tiene la mejor compatibilidad, archivo m√°s peque√±o (requiere codificador)',
                wav: 'El formato WAV es audio sin p√©rdida, archivo m√°s grande, no necesita codificador (Recomendado)',
                ogg: 'El formato OGG es de c√≥digo abierto y gratuito, buena calidad (requiere codificador)',
                m4a: 'El formato M4A es adecuado para dispositivos Apple (requiere codificador)',
                flac: 'El formato FLAC es compresi√≥n sin p√©rdida, mejor calidad de audio (requiere codificador)',
                aac: 'El formato AAC tiene compresi√≥n eficiente, buena calidad (requiere codificador)'
            }
        };

        // Ëé∑ÂèñÂΩìÂâçËØ≠Ë®ÄÁöÑÊ†ºÂºèËØ¥Êòé
        function getFormatNote(format) {
            const lang = localStorage.getItem('toolbox_lang') || 'en';
            const notes = formatNotesI18n[lang] || formatNotesI18n['en'];
            return notes[format] || notes['wav'];
        }

        // ÈúÄË¶ÅÊØîÁâπÁéáËÆæÁΩÆÁöÑÊ†ºÂºè
        const bitrateFormats = ['mp3', 'ogg', 'm4a', 'aac'];

        // ËÆ∞ÂΩï‰∏ä‰∏ÄÊ¨°Âå∫ÂüüËæπÁïåÔºåÁî®‰∫éÂà§Êñ≠ÊãñÂä®ÁöÑÊòØÂì™‰∏Ä‰æß
        let lastRegionStart = 0;
        let lastRegionEnd = 0;

        // ÂàùÂßãÂåñ WaveSurfer
        function initWaveSurfer() {
            if (wavesurfer) {
                wavesurfer.destroy();
            }

            regionsPlugin = WaveSurfer.Regions.create();

            wavesurfer = WaveSurfer.create({
                container: '#waveform',
                waveColor: '#8b5cf6',
                progressColor: '#c4b5fd',
                cursorColor: '#22c55e',
                cursorWidth: 2,
                barWidth: 2,
                barGap: 1,
                barRadius: 2,
                height: 128,
                normalize: true,
                plugins: [regionsPlugin]
            });

            // Âä†ËΩΩÂÆåÊàê
            wavesurfer.on('ready', () => {
                const duration = wavesurfer.getDuration();
                updateDurationDisplay(duration);
                timeEnd.textContent = formatTime(duration);

                // ÂàõÂª∫ÈªòËÆ§ÈÄâÂå∫ÔºàÂÖ®ÈÄâÔºâ
                createRegion(0, duration);

                // ÂàùÂßãÂåñÈÅÆÁΩ©
                updateTrimOverlays();
            });

            // Êí≠ÊîæËøõÂ∫¶Êõ¥Êñ∞ÔºàÊòæÁ§∫ÊØ´ÁßíÔºâ
            wavesurfer.on('timeupdate', (time) => {
                currentTimeEl.textContent = formatTimeMs(time);
            });

            // Êí≠ÊîæÁä∂ÊÄÅ
            wavesurfer.on('play', () => {
                playBtn.textContent = '‚è∏';
            });

            wavesurfer.on('pause', () => {
                playBtn.textContent = '‚ñ∂';
            });

            // ÁÇπÂáªÊ≥¢ÂΩ¢Ë∑≥ËΩ¨
            wavesurfer.on('click', (relativeX) => {
                wavesurfer.seekTo(relativeX);
            });
        }

        // Êõ¥Êñ∞Êó∂ÈïøÊòæÁ§∫
        function updateDurationDisplay(duration) {
            const lang = localStorage.getItem('toolbox_lang') || 'en';
            const labels = {
                'en': 'Duration',
                'zh-CN': 'Êó∂Èïø',
                'fr': 'Dur√©e',
                'es': 'Duraci√≥n'
            };
            audioDuration.textContent = `${labels[lang] || labels['en']}: ${formatTime(duration)}`;
        }

        // ÂàõÂª∫ÈÄâÂå∫
        function createRegion(start, end) {
            // Ê∏ÖÈô§ÊóßÈÄâÂå∫
            regionsPlugin.clearRegions();

            currentRegion = regionsPlugin.addRegion({
                start: start,
                end: end,
                color: 'rgba(34, 197, 94, 0.25)',
                drag: true,
                resize: true
            });

            // ËÆ∞ÂΩïÂàùÂßãËæπÁïå
            lastRegionStart = start;
            lastRegionEnd = end;

            updateRegionInfo();
            updateTrimOverlays();

            // ÈÄâÂå∫ÂèòÂåñ‰∫ã‰ª∂ - ÊãñÂä®Êó∂Ëá™Âä®‰ªéËØ•‰ΩçÁΩÆÊí≠Êîæ
            currentRegion.on('update', () => {
                const newStart = currentRegion.start;
                const newEnd = currentRegion.end;

                // Âà§Êñ≠ÊòØÊãñÂä®‰∫ÜËµ∑ÁÇπËøòÊòØÁªàÁÇπ
                if (Math.abs(newStart - lastRegionStart) > 0.01) {
                    // Ëµ∑ÁÇπÂèòÂåñÔºå‰ªéËµ∑ÁÇπÂºÄÂßãÊí≠ÊîæÔºàÊåÅÁª≠Êí≠ÊîæÔºå‰∏çÊöÇÂÅúÔºâ
                    wavesurfer.setTime(newStart);
                    wavesurfer.play();
                } else if (Math.abs(newEnd - lastRegionEnd) > 0.01) {
                    // ÁªàÁÇπÂèòÂåñÔºå‰ªéÁªàÁÇπ‰ΩçÁΩÆÂºÄÂßãÊí≠ÊîæÔºàÊåÅÁª≠Êí≠ÊîæÔºå‰∏çÊöÇÂÅúÔºâ
                    wavesurfer.setTime(newEnd);
                    wavesurfer.play();
                }

                // Êõ¥Êñ∞ËÆ∞ÂΩï
                lastRegionStart = newStart;
                lastRegionEnd = newEnd;

                updateRegionInfo();
                updateTrimOverlays();
            });
        }

        // Êõ¥Êñ∞Ë£ÅÂâ™ÈÅÆÁΩ©‰ΩçÁΩÆ
        function updateTrimOverlays() {
            if (!wavesurfer || !currentRegion) return;

            const duration = wavesurfer.getDuration();
            if (duration <= 0) return;

            const waveformEl = document.getElementById('waveform');
            const totalWidth = waveformEl.offsetWidth;

            // ËÆ°ÁÆóÂ∑¶‰æßÈÅÆÁΩ©ÂÆΩÂ∫¶ÔºàËµ∑ÁÇπ‰πãÂâçÁöÑÈÉ®ÂàÜÔºâ
            const leftWidth = (currentRegion.start / duration) * totalWidth;
            trimLeft.style.width = leftWidth + 'px';

            // ËÆ°ÁÆóÂè≥‰æßÈÅÆÁΩ©ÂÆΩÂ∫¶ÔºàÁªàÁÇπ‰πãÂêéÁöÑÈÉ®ÂàÜÔºâ
            const rightWidth = ((duration - currentRegion.end) / duration) * totalWidth;
            trimRight.style.width = rightWidth + 'px';
        }

        // Êõ¥Êñ∞ÈÄâÂå∫‰ø°ÊÅØ
        function updateRegionInfo() {
            if (!currentRegion) return;

            startTime.value = formatTimeMs(currentRegion.start);
            endTime.value = formatTimeMs(currentRegion.end);

            const duration = currentRegion.end - currentRegion.start;
            const lang = localStorage.getItem('toolbox_lang') || 'en';
            const labels = {
                'en': 'Selected',
                'zh-CN': 'ÈÄâ‰∏≠Êó∂Èïø',
                'fr': 'S√©lectionn√©',
                'es': 'Seleccionado'
            };
            regionDuration.textContent = `${labels[lang] || labels['en']}: ${formatTime(duration)}`;
        }

        // Ê†ºÂºèÂåñÊó∂Èó¥
        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }

        function formatTimeMs(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            const ms = Math.floor((seconds % 1) * 1000);
            return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}.${ms.toString().padStart(3, '0')}`;
        }

        // Âä†ËΩΩÈü≥È¢ë
        function loadAudio(file) {
            originalFile = file;
            const lang = localStorage.getItem('toolbox_lang') || 'en';
            const loadingTexts = {
                'en': 'Loading audio...',
                'zh-CN': 'Ê≠£Âú®Âä†ËΩΩÈü≥È¢ë...',
                'fr': 'Chargement audio...',
                'es': 'Cargando audio...'
            };
            showLoading(loadingTexts[lang] || loadingTexts['en']);

            initWaveSurfer();

            audioName.textContent = file.name;
            uploadArea.classList.add('hidden');
            editArea.classList.add('active');
            downloadLink.classList.remove('show');

            wavesurfer.loadBlob(file);

            // ÂêåÊó∂Âä†ËΩΩÂà∞ AudioContext
            const reader = new FileReader();
            reader.onload = async (e) => {
                try {
                    audioContext = new (window.AudioContext || window.webkitAudioContext)();
                    audioBuffer = await audioContext.decodeAudioData(e.target.result);
                    hideLoading();
                } catch (err) {
                    console.error('Audio decode failed:', err);
                    hideLoading();
                }
            };
            reader.readAsArrayBuffer(file);
        }

        // ‰∏ä‰º†‰∫ã‰ª∂
        uploadBtn.addEventListener('click', () => fileInput.click());
        uploadArea.addEventListener('click', (e) => {
            if (e.target === uploadArea || e.target.classList.contains('upload-icon') ||
                e.target.classList.contains('upload-text') || e.target.classList.contains('upload-hint')) {
                fileInput.click();
            }
        });

        fileInput.addEventListener('change', (e) => {
            if (e.target.files[0]) {
                loadAudio(e.target.files[0]);
            }
        });

        changeFileBtn.addEventListener('click', () => {
            fileInput.click();
        });

        // ÊãñÊãΩ
        uploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadArea.classList.add('dragover');
        });

        uploadArea.addEventListener('dragleave', () => {
            uploadArea.classList.remove('dragover');
        });

        uploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadArea.classList.remove('dragover');
            const file = e.dataTransfer.files[0];
            if (file && file.type.startsWith('audio/')) {
                loadAudio(file);
            }
        });

        // Á≤òË¥¥
        document.addEventListener('paste', (e) => {
            const items = e.clipboardData.items;
            for (let item of items) {
                if (item.type.startsWith('audio/')) {
                    const file = item.getAsFile();
                    if (file) {
                        loadAudio(file);
                    }
                    break;
                }
            }
        });

        // Êí≠ÊîæÊéßÂà∂
        playBtn.addEventListener('click', () => {
            wavesurfer.playPause();
        });

        skipBackBtn.addEventListener('click', () => {
            wavesurfer.skip(-5);
        });

        skipForwardBtn.addEventListener('click', () => {
            wavesurfer.skip(5);
        });

        // ËØïÂê¨Ââ™ËæëÁâáÊÆµÔºàÂè™Êí≠ÊîæÈÄâ‰∏≠Âå∫ÂüüÔºåÂà∞ÁªàÁÇπËá™Âä®ÂÅúÊ≠¢Ôºâ
        let previewEndHandler = null;
        previewRegionBtn.addEventListener('click', () => {
            if (!currentRegion || !wavesurfer) return;

            // ÁßªÈô§‰πãÂâçÁöÑÁõëÂê¨Âô®
            if (previewEndHandler) {
                wavesurfer.un('timeupdate', previewEndHandler);
            }

            // ‰ªéÈÄâÂå∫Ëµ∑ÁÇπÂºÄÂßãÊí≠Êîæ
            wavesurfer.setTime(currentRegion.start);
            wavesurfer.play();

            // ÁõëÂê¨Êí≠ÊîæËøõÂ∫¶ÔºåÂà∞ËææÁªàÁÇπÊó∂Ëá™Âä®ÊöÇÂÅú
            previewEndHandler = (time) => {
                if (time >= currentRegion.end) {
                    // ÈáçË¶ÅÔºöÂøÖÈ°ªÂÖàÂèñÊ∂àÁõëÂê¨ÂÜçË∞ÉÁî® setTimeÔºåÂê¶Âàô‰ºöÊó†ÈôêÈÄíÂΩí
                    wavesurfer.un('timeupdate', previewEndHandler);
                    previewEndHandler = null;
                    wavesurfer.pause();
                    wavesurfer.setTime(currentRegion.end);
                }
            };
            wavesurfer.on('timeupdate', previewEndHandler);
        });

        // Ê†ºÂºèÈÄâÊã©
        formatOptions.addEventListener('click', (e) => {
            const btn = e.target.closest('.format-btn');
            if (!btn) return;

            // Êõ¥Êñ∞ÈÄâ‰∏≠Áä∂ÊÄÅ
            document.querySelectorAll('.format-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');

            selectedFormat = btn.dataset.format;

            // Êõ¥Êñ∞ËØ¥ÊòéÊñáÂ≠ó
            exportNote.textContent = getFormatNote(selectedFormat);

            // ÊòæÁ§∫/ÈöêËóèÊØîÁâπÁéáËÆæÁΩÆ
            if (bitrateFormats.includes(selectedFormat)) {
                qualityRow.classList.add('show');
            } else {
                qualityRow.classList.remove('show');
            }

            // ÈöêËóè‰∏ãËΩΩÊåâÈíÆÔºàÈúÄË¶ÅÈáçÊñ∞Ââ™ËæëÔºâ
            downloadLink.classList.remove('show');
        });

        // ÂàùÂßãÂåñ FFmpegÔºà‰ΩøÁî® 0.11.x ÁâàÊú¨ + ÂçïÁ∫øÁ®ã coreÔºåÊó†ÈúÄ SharedArrayBufferÔºâ
        async function initFFmpeg() {
            if (ffmpegLoaded) return true;

            const lang = localStorage.getItem('toolbox_lang') || 'en';

            // Ê£ÄÊü•ÊòØÂê¶‰∏∫Êú¨Âú∞Êñá‰ª∂ÂçèËÆÆ
            if (window.location.protocol === 'file:') {
                const messages = {
                    'en': 'Local preview mode does not support MP3/OGG/M4A/AAC/FLAC format conversion.\n\nPlease select WAV format for export, or deploy the page to a server for full functionality.',
                    'zh-CN': 'Êú¨Âú∞È¢ÑËßàÊ®°Âºè‰∏çÊîØÊåÅ MP3/OGG/M4A/AAC/FLAC Ê†ºÂºèËΩ¨Êç¢„ÄÇ\n\nËØ∑ÈÄâÊã© WAV Ê†ºÂºèÂØºÂá∫ÔºåÊàñÂ∞ÜÁΩëÈ°µÈÉ®ÁΩ≤Âà∞ÊúçÂä°Âô®Âêé‰ΩøÁî®ÂÆåÊï¥ÂäüËÉΩ„ÄÇ',
                    'fr': 'Le mode aper√ßu local ne prend pas en charge la conversion MP3/OGG/M4A/AAC/FLAC.\n\nVeuillez s√©lectionner le format WAV pour l\'exportation, ou d√©ployer la page sur un serveur pour une fonctionnalit√© compl√®te.',
                    'es': 'El modo de vista previa local no admite la conversi√≥n de formato MP3/OGG/M4A/AAC/FLAC.\n\nSeleccione el formato WAV para exportar, o implemente la p√°gina en un servidor para obtener la funcionalidad completa.'
                };
                alert(messages[lang] || messages['en']);
                return false;
            }

            try {
                console.log('Starting FFmpeg load...');
                const loadStartTime = Date.now();

                const loadingTextsProgress = {
                    'en': { core: 'Downloading core module...', wasm: 'Downloading WASM engine...', init: 'Initializing encoder...' },
                    'zh-CN': { core: 'Ê≠£Âú®‰∏ãËΩΩÊ†∏ÂøÉÊ®°Âùó...', wasm: 'Ê≠£Âú®‰∏ãËΩΩ WASM ÂºïÊìé...', init: 'Ê≠£Âú®ÂàùÂßãÂåñÁºñÁ†ÅÂô®...' },
                    'fr': { core: 'T√©l√©chargement du module principal...', wasm: 'T√©l√©chargement du moteur WASM...', init: 'Initialisation de l\'encodeur...' },
                    'es': { core: 'Descargando m√≥dulo principal...', wasm: 'Descargando motor WASM...', init: 'Inicializando codificador...' }
                };
                const progressTexts = loadingTextsProgress[lang] || loadingTextsProgress['en'];

                // Â∏¶ËøõÂ∫¶ÁöÑÊñá‰ª∂‰∏ãËΩΩ
                async function fetchWithProgress(url, label) {
                    const response = await fetch(url);
                    if (!response.ok) throw new Error(`Download failed: ${url}`);

                    const contentLength = response.headers.get('content-length');
                    const total = contentLength ? parseInt(contentLength, 10) : 0;

                    if (!response.body || !total) {
                        return await response.arrayBuffer();
                    }

                    const reader = response.body.getReader();
                    const chunks = [];
                    let received = 0;

                    while (true) {
                        const { done, value } = await reader.read();
                        if (done) break;
                        chunks.push(value);
                        received += value.length;
                        const percent = Math.min(100, Math.round((received / total) * 100));
                        loadingText.textContent = `${label} ${percent}%`;
                    }

                    // ÂêàÂπ∂ chunks
                    const allChunks = new Uint8Array(received);
                    let position = 0;
                    for (const chunk of chunks) {
                        allChunks.set(chunk, position);
                        position += chunk.length;
                    }
                    return allChunks.buffer;
                }

                // ‰ΩøÁî® 0.11.x ÁâàÊú¨ + ÂçïÁ∫øÁ®ã coreÔºàÊó†ÈúÄ SharedArrayBufferÔºåÂÖºÂÆπÊÄßÊõ¥Â•ΩÔºâ
                const FFMPEG_VERSION = '0.11.6';
                const CORE_VERSION = '0.11.1';
                const ffmpegURL = `https://unpkg.com/@ffmpeg/ffmpeg@${FFMPEG_VERSION}/dist/ffmpeg.min.js`;
                const coreBaseURL = `https://unpkg.com/@ffmpeg/core-st@${CORE_VERSION}/dist`;

                // 1. Âä†ËΩΩ FFmpeg ‰∏ªÊ®°Âùó
                const loadingModuleTexts = {
                    'en': 'Loading encoder module...',
                    'zh-CN': 'Ê≠£Âú®Âä†ËΩΩÁºñÁ†ÅÂô®Ê®°Âùó...',
                    'fr': 'Chargement du module encodeur...',
                    'es': 'Cargando m√≥dulo codificador...'
                };
                loadingText.textContent = loadingModuleTexts[lang] || loadingModuleTexts['en'];

                if (!window.FFmpeg || !window.FFmpeg.createFFmpeg) {
                    await new Promise((resolve, reject) => {
                        const script = document.createElement('script');
                        script.src = ffmpegURL;
                        script.onload = () => {
                            console.log('FFmpeg 0.11.x module loaded');
                            resolve();
                        };
                        script.onerror = () => reject(new Error('FFmpeg module load failed'));
                        document.head.appendChild(script);
                    });
                }

                // 2. ÊâãÂä®‰∏ãËΩΩ core Êñá‰ª∂Âπ∂ÊòæÁ§∫ËøõÂ∫¶
                console.log('Downloading FFmpeg core files...');

                // ‰∏ãËΩΩ ffmpeg-core.js
                loadingText.textContent = `${progressTexts.core} 0%`;
                const coreJsData = await fetchWithProgress(`${coreBaseURL}/ffmpeg-core.js`, progressTexts.core);
                const coreJsBlob = new Blob([coreJsData], { type: 'text/javascript' });
                const coreJsURL = URL.createObjectURL(coreJsBlob);
                console.log('Core module downloaded');

                // ‰∏ãËΩΩ ffmpeg-core.wasmÔºàÊúÄÂ§ßÔºåÁ∫¶ 25MBÔºâ
                loadingText.textContent = `${progressTexts.wasm} 0%`;
                const wasmData = await fetchWithProgress(`${coreBaseURL}/ffmpeg-core.wasm`, progressTexts.wasm);
                const wasmBlob = new Blob([wasmData], { type: 'application/wasm' });
                const wasmURL = URL.createObjectURL(wasmBlob);
                console.log('WASM engine downloaded');

                // 3. ÂàõÂª∫ FFmpeg ÂÆû‰æã
                loadingText.textContent = progressTexts.init;
                console.log('Creating FFmpeg instance...');

                const convertingTexts = {
                    'en': 'Converting...',
                    'zh-CN': 'Ê≠£Âú®ËΩ¨Êç¢...',
                    'fr': 'Conversion...',
                    'es': 'Convirtiendo...'
                };

                const { createFFmpeg, fetchFile: ffmpegFetchFile } = FFmpeg;

                ffmpeg = createFFmpeg({
                    log: false,
                    corePath: coreJsURL,
                    wasmPath: wasmURL,
                    mainName: 'main',
                    // ËΩ¨Êç¢ËøõÂ∫¶ÂõûË∞É
                    progress: ({ ratio }) => {
                        if (ratio >= 0 && ratio <= 1) {
                            const percent = Math.round(ratio * 100);
                            loadingText.textContent = `${convertingTexts[lang] || convertingTexts['en']} ${percent}%`;
                        }
                    }
                });

                // ‰øùÂ≠ò fetchFile ‰æõÂêéÁª≠‰ΩøÁî®
                window.ffmpegFetchFile = ffmpegFetchFile;

                // 4. Âä†ËΩΩ FFmpeg
                console.log('Initializing FFmpeg...');
                await ffmpeg.load();

                const totalTime = ((Date.now() - loadStartTime) / 1000).toFixed(1);
                console.log(`FFmpeg loaded, total time: ${totalTime}s`);

                const loadedTexts = {
                    'en': 'Encoder loaded',
                    'zh-CN': 'ÁºñÁ†ÅÂô®Âä†ËΩΩÂÆåÊàê',
                    'fr': 'Encodeur charg√©',
                    'es': 'Codificador cargado'
                };
                loadingText.textContent = loadedTexts[lang] || loadedTexts['en'];

                ffmpegLoaded = true;
                return true;
            } catch (err) {
                console.error('FFmpeg load failed:', err);
                const errorMessages = {
                    'en': 'Encoder load failed: ' + err.message + '\n\nSuggestions:\n1. Use a modern browser (Chrome/Edge/Firefox)\n2. Ensure network connection is stable\n3. Select WAV format for direct export (no encoder needed)',
                    'zh-CN': 'ÁºñÁ†ÅÂô®Âä†ËΩΩÂ§±Ë¥•: ' + err.message + '\n\nÂª∫ËÆÆÔºö\n1. ËØ∑‰ΩøÁî®Áé∞‰ª£ÊµèËßàÂô®ÔºàChrome/Edge/FirefoxÔºâ\n2. Á°Æ‰øùÁΩëÁªúËøûÊé•Ê≠£Â∏∏\n3. ÈÄâÊã© WAV Ê†ºÂºèÂèØÁõ¥Êé•ÂØºÂá∫ÔºàÊó†ÈúÄÁºñÁ†ÅÂô®Ôºâ',
                    'fr': '√âchec du chargement de l\'encodeur: ' + err.message + '\n\nSuggestions:\n1. Utilisez un navigateur moderne (Chrome/Edge/Firefox)\n2. Assurez-vous que la connexion r√©seau est stable\n3. S√©lectionnez le format WAV pour l\'exportation directe (pas d\'encodeur n√©cessaire)',
                    'es': 'Error al cargar el codificador: ' + err.message + '\n\nSugerencias:\n1. Use un navegador moderno (Chrome/Edge/Firefox)\n2. Aseg√∫rese de que la conexi√≥n de red sea estable\n3. Seleccione el formato WAV para exportaci√≥n directa (no necesita codificador)'
                };
                alert(errorMessages[lang] || errorMessages['en']);
                return false;
            }
        }

        // Âø´Êç∑ÈîÆ
        document.addEventListener('keydown', (e) => {
            if (!wavesurfer || !editArea.classList.contains('active')) return;

            if (e.code === 'Space') {
                e.preventDefault();
                wavesurfer.playPause();
            } else if (e.key === '[') {
                e.preventDefault();
                const time = wavesurfer.getCurrentTime();
                if (currentRegion && time < currentRegion.end) {
                    currentRegion.setOptions({ start: time });
                    lastRegionStart = time;
                    updateRegionInfo();
                    updateTrimOverlays();
                }
            } else if (e.key === ']') {
                e.preventDefault();
                const time = wavesurfer.getCurrentTime();
                if (currentRegion && time > currentRegion.start) {
                    currentRegion.setOptions({ end: time });
                    lastRegionEnd = time;
                    updateRegionInfo();
                    updateTrimOverlays();
                }
            }
        });

        // Ââ™Ëæë
        cutBtn.addEventListener('click', async () => {
            if (!audioBuffer || !currentRegion) return;

            const lang = localStorage.getItem('toolbox_lang') || 'en';
            const cuttingTexts = {
                'en': 'Cutting audio...',
                'zh-CN': 'Ê≠£Âú®Ââ™ËæëÈü≥È¢ë...',
                'fr': 'D√©coupage audio...',
                'es': 'Cortando audio...'
            };
            showLoading(cuttingTexts[lang] || cuttingTexts['en']);

            try {
                const startSample = Math.floor(currentRegion.start * audioBuffer.sampleRate);
                const endSample = Math.floor(currentRegion.end * audioBuffer.sampleRate);
                const length = endSample - startSample;

                // ÂàõÂª∫Êñ∞ÁöÑ AudioBuffer
                const newBuffer = audioContext.createBuffer(
                    audioBuffer.numberOfChannels,
                    length,
                    audioBuffer.sampleRate
                );

                // Â§çÂà∂Êï∞ÊçÆ
                for (let channel = 0; channel < audioBuffer.numberOfChannels; channel++) {
                    const sourceData = audioBuffer.getChannelData(channel);
                    const targetData = newBuffer.getChannelData(channel);
                    for (let i = 0; i < length; i++) {
                        targetData[i] = sourceData[startSample + i];
                    }
                }

                // ËΩ¨Êç¢‰∏∫ WAV
                const wavBlob = audioBufferToWav(newBuffer);
                const baseName = originalFile.name.replace(/\.[^.]+$/, '');

                // Â¶ÇÊûúÈÄâÊã©ÁöÑÊòØ WAV Ê†ºÂºèÔºåÁõ¥Êé•‰ΩøÁî®
                if (selectedFormat === 'wav') {
                    const url = URL.createObjectURL(wavBlob);
                    downloadLink.href = url;
                    downloadLink.download = `${baseName}_cut.wav`;
                    downloadLink.classList.add('show');
                    hideLoading();
                    return;
                }

                // ÂÖ∂‰ªñÊ†ºÂºèÈúÄË¶Å‰ΩøÁî® FFmpeg ËΩ¨Êç¢
                const loadingEncoderTexts = {
                    'en': 'Loading encoder...',
                    'zh-CN': 'Ê≠£Âú®Âä†ËΩΩÁºñÁ†ÅÂô®...',
                    'fr': 'Chargement de l\'encodeur...',
                    'es': 'Cargando codificador...'
                };
                showLoading(loadingEncoderTexts[lang] || loadingEncoderTexts['en']);

                const loaded = await initFFmpeg();
                if (!loaded) {
                    throw new Error('Encoder load failed, please refresh and try again');
                }

                const convertingTexts = {
                    'en': 'Converting format...',
                    'zh-CN': 'Ê≠£Âú®ËΩ¨Êç¢Ê†ºÂºè...',
                    'fr': 'Conversion du format...',
                    'es': 'Convirtiendo formato...'
                };
                showLoading(convertingTexts[lang] || convertingTexts['en']);

                // ÂÜôÂÖ• WAV Êñá‰ª∂Ôºà0.11.x API ‰ΩøÁî® FSÔºâ
                const wavData = new Uint8Array(await wavBlob.arrayBuffer());
                ffmpeg.FS('writeFile', 'input.wav', wavData);

                // ÊûÑÂª∫ FFmpeg ÂëΩ‰ª§ÂèÇÊï∞
                const bitrate = qualitySelect.value;
                let outputFile = `output.${selectedFormat}`;
                let ffmpegArgs = ['-i', 'input.wav'];

                switch (selectedFormat) {
                    case 'mp3':
                        // ‰ΩøÁî® libmp3lame ÁºñÁ†ÅÂô®
                        ffmpegArgs.push('-c:a', 'libmp3lame', '-q:a', '2');
                        break;
                    case 'ogg':
                        // ‰ΩøÁî® libvorbis ÁºñÁ†ÅÂô®
                        ffmpegArgs.push('-c:a', 'libvorbis', '-q:a', '4');
                        break;
                    case 'm4a':
                        // AAC ÁºñÁ†Å
                        ffmpegArgs.push('-c:a', 'aac', '-b:a', `${bitrate}k`);
                        outputFile = 'output.m4a';
                        break;
                    case 'aac':
                        // AAC ÁºñÁ†Å
                        ffmpegArgs.push('-c:a', 'aac', '-b:a', `${bitrate}k`);
                        break;
                    case 'flac':
                        // FLAC Êó†ÊçüÁºñÁ†Å
                        ffmpegArgs.push('-c:a', 'flac');
                        break;
                }

                ffmpegArgs.push(outputFile);

                // ÊâßË°åËΩ¨Êç¢Ôºà0.11.x ‰ΩøÁî® run ÊñπÊ≥ïÔºåÂèÇÊï∞Â±ïÂºÄÔºâ
                await ffmpeg.run(...ffmpegArgs);

                // ËØªÂèñËæìÂá∫Êñá‰ª∂Ôºà0.11.x APIÔºâ
                const outputData = ffmpeg.FS('readFile', outputFile);

                // Á°ÆÂÆö MIME Á±ªÂûã
                const mimeTypes = {
                    mp3: 'audio/mpeg',
                    ogg: 'audio/ogg',
                    m4a: 'audio/mp4',
                    aac: 'audio/aac',
                    flac: 'audio/flac'
                };

                const outputBlob = new Blob([outputData.buffer], { type: mimeTypes[selectedFormat] });
                const url = URL.createObjectURL(outputBlob);

                downloadLink.href = url;
                downloadLink.download = `${baseName}_cut.${selectedFormat}`;
                downloadLink.classList.add('show');

                // Ê∏ÖÁêÜ‰∏¥Êó∂Êñá‰ª∂Ôºà0.11.x APIÔºâ
                try {
                    ffmpeg.FS('unlink', 'input.wav');
                    ffmpeg.FS('unlink', outputFile);
                } catch (e) {
                    console.warn('Failed to clean temp files:', e);
                }

                // ÈáçÁΩÆ FFmpeg Áä∂ÊÄÅÔºå‰ª•‰æø‰∏ãÊ¨°ÂèØ‰ª•ÈáçÊñ∞‰ΩøÁî®
                // ÂçïÁ∫øÁ®ãÁâàÊú¨ÊâßË°åÂÆåÂëΩ‰ª§ÂêéÈúÄË¶Å exit() ÊâçËÉΩÂÜçÊ¨°‰ΩøÁî®
                try {
                    ffmpeg.exit();
                } catch (e) {
                    console.warn('FFmpeg exit failed:', e);
                }
                ffmpegLoaded = false;
                ffmpeg = null;

                hideLoading();
            } catch (err) {
                console.error('Cut failed:', err);

                // Âá∫ÈîôÊó∂‰πüË¶ÅÈáçÁΩÆ FFmpeg Áä∂ÊÄÅ
                if (ffmpeg) {
                    try {
                        ffmpeg.exit();
                    } catch (e) {
                        console.warn('FFmpeg exit failed:', e);
                    }
                    ffmpegLoaded = false;
                    ffmpeg = null;
                }

                hideLoading();
                const failTexts = {
                    'en': 'Cut failed: ',
                    'zh-CN': 'Ââ™ËæëÂ§±Ë¥•: ',
                    'fr': '√âchec de la d√©coupe: ',
                    'es': 'Error al cortar: '
                };
                alert((failTexts[lang] || failTexts['en']) + err.message);
            }
        });

        // AudioBuffer ËΩ¨ WAV
        function audioBufferToWav(buffer) {
            const numChannels = buffer.numberOfChannels;
            const sampleRate = buffer.sampleRate;
            const format = 1; // PCM
            const bitDepth = 16;

            const bytesPerSample = bitDepth / 8;
            const blockAlign = numChannels * bytesPerSample;

            const dataLength = buffer.length * blockAlign;
            const bufferLength = 44 + dataLength;

            const arrayBuffer = new ArrayBuffer(bufferLength);
            const view = new DataView(arrayBuffer);

            // WAV Header
            writeString(view, 0, 'RIFF');
            view.setUint32(4, 36 + dataLength, true);
            writeString(view, 8, 'WAVE');
            writeString(view, 12, 'fmt ');
            view.setUint32(16, 16, true);
            view.setUint16(20, format, true);
            view.setUint16(22, numChannels, true);
            view.setUint32(24, sampleRate, true);
            view.setUint32(28, sampleRate * blockAlign, true);
            view.setUint16(32, blockAlign, true);
            view.setUint16(34, bitDepth, true);
            writeString(view, 36, 'data');
            view.setUint32(40, dataLength, true);

            // Èü≥È¢ëÊï∞ÊçÆ
            let offset = 44;
            for (let i = 0; i < buffer.length; i++) {
                for (let channel = 0; channel < numChannels; channel++) {
                    const sample = buffer.getChannelData(channel)[i];
                    const intSample = Math.max(-1, Math.min(1, sample)) * 0x7FFF;
                    view.setInt16(offset, intSample, true);
                    offset += 2;
                }
            }

            return new Blob([arrayBuffer], { type: 'audio/wav' });
        }

        function writeString(view, offset, string) {
            for (let i = 0; i < string.length; i++) {
                view.setUint8(offset + i, string.charCodeAt(i));
            }
        }

        // Âä†ËΩΩÊèêÁ§∫
        function showLoading(text) {
            loadingText.textContent = text;
            loadingOverlay.classList.add('active');
        }

        function hideLoading() {
            loadingOverlay.classList.remove('active');
        }

        // Á™óÂè£Â§ßÂ∞èÂèòÂåñÊó∂Êõ¥Êñ∞ÈÅÆÁΩ©
        window.addEventListener('resize', () => {
            updateTrimOverlays();
        });
    </script>

    <!-- Â§öËØ≠Ë®ÄÊîØÊåÅ -->
    <script>
    (function() {
        const translations = {
            'zh-CN': {
                'loading': 'Ê≠£Âú®Â§ÑÁêÜ...',
                'backHome': '‚Üê ËøîÂõûÂ∑•ÂÖ∑ÁÆ±',
                'title': 'Èü≥È¢ëÂâ™Ëæë',
                'subtitle': 'Âú®Á∫øÂèØËßÜÂåñÈü≥È¢ëË£ÅÂâ™ÔºåÊîØÊåÅÂ§öÁßçÊ†ºÂºè',
                'featuresTitle': '‚ú® ÂäüËÉΩÁâπÁÇπ',
                'feature1Title': '100% ÂÖçË¥π‰∏îÂÆâÂÖ®',
                'feature1Desc': 'Êó†ÂπøÂëä„ÄÅÊó†ÈúÄÊ≥®ÂÜå„ÄÅÊó†Ê∞¥Âç∞„ÄÇÊâÄÊúâÂ§ÑÁêÜÈÉΩÂú®ÊµèËßàÂô®Êú¨Âú∞ÂÆåÊàêÔºåÊï∞ÊçÆ‰∏ç‰ºö‰∏ä‰º†Âà∞‰ªª‰ΩïÊúçÂä°Âô®„ÄÇ',
                'feature2Title': 'Â§öÊ†ºÂºèÊîØÊåÅ',
                'feature2Desc': 'ÊîØÊåÅ MP3„ÄÅWAV„ÄÅM4A„ÄÅFLAC„ÄÅAAC Á≠â‰∏ªÊµÅÊ†ºÂºè',
                'feature3Title': 'Âø´Êç∑ÈîÆÊìç‰Ωú',
                'feature3Desc': 'Á©∫Ê†ºÊí≠Êîæ/ÊöÇÂÅúÔºå[ ] ËÆæÁΩÆËµ∑Ê≠¢ÁÇπÔºåÊñπ‰æøÂø´ÈÄüÈ¢ÑËßà',
                'feature4Title': 'ÈöêÁßÅÂÆâÂÖ®',
                'feature4Desc': 'Á∫ØÂâçÁ´ØÂ§ÑÁêÜÔºåÈü≥È¢ëÊñá‰ª∂‰∏ç‰∏ä‰º†ÊúçÂä°Âô®',
                'uploadText': 'ÊãñÊãΩÈü≥È¢ëÂà∞ËøôÈáåÔºåÊàñÁÇπÂáªÈÄâÊã©Êñá‰ª∂',
                'uploadHint': 'ÊîØÊåÅ MP3„ÄÅWAV„ÄÅM4A„ÄÅFLAC„ÄÅAAC Ê†ºÂºè',
                'uploadBtn': 'ÈÄâÊã©Èü≥È¢ë',
                'duration': 'Êó∂Èïø: 00:00',
                'changeFile': 'Êõ¥Êç¢Êñá‰ª∂',
                'startPoint': 'Ëµ∑ÁÇπ',
                'endPoint': 'ÁªàÁÇπ',
                'selectedDuration': 'ÈÄâ‰∏≠Êó∂Èïø: 00:00',
                'setStart': 'ËÆæÁΩÆËµ∑ÁÇπ',
                'setEnd': 'ËÆæÁΩÆÁªàÁÇπ',
                'spaceKey': 'Á©∫Ê†º',
                'playPauseText': 'Êí≠Êîæ/ÊöÇÂÅú',
                'previewClipText': 'ËØïÂê¨Ââ™ËæëÁâáÊÆµ',
                'selectExportFormat': 'ÈÄâÊã©ÂØºÂá∫Ê†ºÂºè',
                'quality': 'Èü≥Ë¥®Ôºö',
                'quality320': '320 kbps (È´òË¥®Èáè)',
                'quality192': '192 kbps (Êé®Ëçê)',
                'quality96': '96 kbps (Â∞èÊñá‰ª∂)',
                'exportNoteWav': 'WAV Ê†ºÂºè‰∏∫Êó†ÊçüÈü≥È¢ëÔºåÊñá‰ª∂ËæÉÂ§ßÔºåÊó†ÈúÄÁºñÁ†ÅÂô®',
                'startCut': '‚úÇ ÂºÄÂßãÂâ™Ëæë',
                'downloadCut': '‚¨á ‰∏ãËΩΩÂâ™Ëæë',
                'supportedFormats': 'ÊîØÊåÅÁöÑÊ†ºÂºè',
                'mobileWarning': '‚ö†Ô∏è ÁßªÂä®ËÆæÂ§áÊµèËßàÂô®‰∏äÂèØËÉΩÂ≠òÂú®ÂÖºÂÆπÊÄßÈóÆÈ¢òÔºåÂª∫ËÆÆ‰ΩøÁî®ÁîµËÑëÊµèËßàÂô®ËøõË°åÁºñËæë„ÄÇ',
                'instructions': '‰ΩøÁî®ËØ¥Êòé',
                'instruction1': '<strong>‰∏ä‰º†Èü≥È¢ë</strong>ÔºöÊãñÊãΩÊñá‰ª∂ÊàñÁÇπÂáªÈÄâÊã©ÊåâÈíÆÔºå‰πüÂèØ‰ª•‰ΩøÁî® Ctrl+V / Command+V Á≤òË¥¥',
                'instruction2': '<strong>ÈÄâÊã©Ââ™ËæëÂå∫Èó¥</strong>ÔºöÂú®Ê≥¢ÂΩ¢‰∏äÊãñÂä®Ë∞ÉÊï¥Ëµ∑ÁÇπÂíåÁªàÁÇπ',
                'instruction3': '<strong>Âø´Êç∑ÈîÆÊìç‰Ωú</strong>Ôºö',
                'instruction3a': '<code>[</code> ËÆæÁΩÆÂΩìÂâçÊí≠ÊîæËøõÂ∫¶‰∏∫Ââ™ËæëËµ∑ÁÇπ',
                'instruction3b': '<code>]</code> ËÆæÁΩÆÂΩìÂâçÊí≠ÊîæËøõÂ∫¶‰∏∫Ââ™ËæëÁªàÁÇπ',
                'instruction3c': '<code>Á©∫Ê†ºÈîÆ</code> ÊéßÂà∂Êí≠Êîæ/ÊöÇÂÅú',
                'instruction4': '<strong>ÈÄâÊã©ÂØºÂá∫Ê†ºÂºè</strong>ÔºöÁÇπÂáªÊ†ºÂºèÊåâÈíÆÈÄâÊã© MP3/WAV/OGG/M4A/FLAC/AAC',
                'instruction5': '<strong>Ââ™ËæëÂØºÂá∫</strong>ÔºöÁÇπÂáª"ÂºÄÂßãÂâ™Ëæë"ÊåâÈíÆÔºåÂÆåÊàêÂêéÁÇπÂáª‰∏ãËΩΩ',
                'faqTitle': '‚ùì Â∏∏ËßÅÈóÆÈ¢òÔºàFAQÔºâ',
                'faq1Q': 'ÊîØÊåÅÂì™‰∫õÈü≥È¢ëÊ†ºÂºèÔºü',
                'faq1A': 'Êú¨Â∑•ÂÖ∑ÊîØÊåÅ MP3„ÄÅWAV„ÄÅM4A„ÄÅFLAC„ÄÅAAC„ÄÅOGG Á≠â‰∏ªÊµÅÈü≥È¢ëÊ†ºÂºè„ÄÇÊÇ®ÂèØ‰ª•Áõ¥Êé•ÊãñÊãΩÊàñÈÄâÊã©Ëøô‰∫õÊ†ºÂºèÁöÑÈü≥È¢ëÊñá‰ª∂ËøõË°åÂâ™ËæëÔºåÂ∑•ÂÖ∑‰ºöËá™Âä®ËØÜÂà´Âπ∂Âä†ËΩΩÈü≥È¢ëÊ≥¢ÂΩ¢„ÄÇ',
                'faq2Q': 'ÊúÄÂ§ßÊîØÊåÅÂ§öÂ§ßÁöÑÈü≥È¢ëÊñá‰ª∂Ôºü',
                'faq2A': 'Èü≥È¢ëÊñá‰ª∂Â§ßÂ∞èÂèñÂÜ≥‰∫éÊÇ®ÁöÑÊµèËßàÂô®ÂÜÖÂ≠òÈôêÂà∂ÔºåÂª∫ËÆÆ‰∏çË∂ÖËøá 100MB„ÄÇËæÉÂ§ßÁöÑÊñá‰ª∂ÂèØËÉΩ‰ºöÂØºËá¥Âä†ËΩΩÁºìÊÖ¢ÊàñÊµèËßàÂô®ÂÜÖÂ≠ò‰∏çË∂≥„ÄÇÂ¶ÇÊûúÈúÄË¶ÅÂ§ÑÁêÜÂ§ßÊñá‰ª∂ÔºåÂª∫ËÆÆÂÖà‰ΩøÁî®ÂÖ∂‰ªñÂ∑•ÂÖ∑ÂàÜÂâ≤ÂêéÂÜçËøõË°åÂâ™Ëæë„ÄÇ',
                'faq3Q': 'Â¶Ç‰ΩïÁ≤æÁ°ÆÈÄâÊã©Ââ™ËæëÂå∫Èó¥Ôºü',
                'faq3A': 'ÊÇ®ÂèØ‰ª•ÈÄöËøá‰ª•‰∏ãÊñπÂºèÁ≤æÁ°ÆÈÄâÊã©Ââ™ËæëÂå∫Èó¥Ôºö1) Áõ¥Êé•Âú®Ê≥¢ÂΩ¢‰∏äÊãñÂä®Ëµ∑Ê≠¢Ê†áËÆ∞Ôºõ2) Êí≠ÊîæÊó∂‰ΩøÁî®Âø´Êç∑ÈîÆ [ ËÆæÁΩÆËµ∑ÁÇπ„ÄÅ] ËÆæÁΩÆÁªàÁÇπÔºõ3) ÁÇπÂáªËØïÂê¨ÊåâÈíÆÈ¢ÑËßàÈÄâ‰∏≠ÁâáÊÆµ„ÄÇÊó∂Èó¥Á≤æÂ∫¶ÂèØËææÊØ´ÁßíÁ∫ß„ÄÇ',
                'faq4Q': 'Ââ™ËæëÂêéÁöÑÈü≥È¢ëÊ†ºÂºèÊòØ‰ªÄ‰πàÔºü',
                'faq4A': 'ÊÇ®ÂèØ‰ª•Ëá™Áî±ÈÄâÊã©ÂØºÂá∫Ê†ºÂºèÔºåÊîØÊåÅ MP3„ÄÅWAV„ÄÅOGG„ÄÅM4A„ÄÅFLAC„ÄÅAAC ÂÖ≠ÁßçÊ†ºÂºè„ÄÇWAV Ê†ºÂºèÊó†ÈúÄÁºñÁ†ÅÂô®ÔºåÂÖ∂‰ªñÊ†ºÂºè‰ºöËá™Âä®Âä†ËΩΩÁºñÁ†ÅÂô®ËøõË°åËΩ¨Êç¢„ÄÇ',
                'faq5Q': 'Èü≥È¢ë‰ºö‰∏ä‰º†Âà∞ÊúçÂä°Âô®ÂêóÔºü',
                'faq5A': '‰∏ç‰ºö„ÄÇÊâÄÊúâÈü≥È¢ëÂ§ÑÁêÜÂÆåÂÖ®Âú®ÊÇ®ÁöÑÊµèËßàÂô®Êú¨Âú∞ÂÆåÊàêÔºåÈü≥È¢ëÊñá‰ª∂‰∏ç‰ºö‰∏ä‰º†Âà∞‰ªª‰ΩïÊúçÂä°Âô®„ÄÇËøôÊÑèÂë≥ÁùÄÊÇ®ÁöÑÈü≥È¢ëÂÜÖÂÆπÂÆåÂÖ®ÁßÅÂØÜÂÆâÂÖ®ÔºåÂç≥‰ΩøÂú®Á¶ªÁ∫øÁä∂ÊÄÅ‰∏ã‰πüÂèØ‰ª•‰ΩøÁî®Êú¨Â∑•ÂÖ∑ÔºàÈúÄË¶ÅÂÖàÂä†ËΩΩÈ°µÈù¢Ôºâ„ÄÇ',
                'faq_free_q': 'Ëøô‰∏™Â∑•ÂÖ∑ÁúüÁöÑÂÖçË¥π‰∏îÊó†ÂπøÂëäÂêóÔºü',
                'faq_free_a': 'ÊòØÁöÑÔºå100% ÂÖçË¥πÔºåÊó†ÂπøÂëä„ÄÅÊó†ÈúÄÊ≥®ÂÜå„ÄÅÊó†Ê∞¥Âç∞„ÄÅÊó†‰ΩøÁî®ÈôêÂà∂„ÄÇÊâÄÊúâÂ§ÑÁêÜÈÉΩÂú®ÊµèËßàÂô®Êú¨Âú∞ÂÆåÊàêÔºåÊï∞ÊçÆ‰∏ç‰ºö‰∏ä‰º†Âà∞‰ªª‰ΩïÊúçÂä°Âô®„ÄÇ',
                'relatedTools': 'üîó Áõ∏ÂÖ≥Â∑•ÂÖ∑Êé®Ëçê',
                'm3u8Title': 'M3U8 ËßÜÈ¢ë‰∏ãËΩΩ',
                'm3u8Desc': '‰∏ãËΩΩ M3U8 ÊµÅÂ™í‰ΩìËßÜÈ¢ë',
                'imageCompressorTitle': 'ÂõæÁâáÂéãÁº©',
                'imageCompressorDesc': 'ÊâπÈáèÂéãÁº©ÂõæÁâá‰ΩìÁßØ',
                'socialVideoTitle': 'X/TikTok ËßÜÈ¢ë‰∏ãËΩΩ',
                'socialVideoDesc': '‰∏ãËΩΩÁ§æ‰∫§Â™í‰ΩìËßÜÈ¢ë',
                'metronomeTitle': 'Âú®Á∫øËäÇÊãçÂô®',
                'metronomeDesc': 'Èü≥‰πêÁªÉ‰π†ËäÇÊãçÂô®',
                'footerPrivacy': 'Á∫ØÂâçÁ´ØÂ§ÑÁêÜÔºåÈü≥È¢ë‰∏ç‰ºö‰∏ä‰º†Âà∞ÊúçÂä°Âô®',
                'footerBack': '‚Üê ËøîÂõû Web Toolbox È¶ñÈ°µ',
                'trust_users': 'üåç Ë∂ÖËøá 50,000 Áî®Êà∑‰ΩøÁî®',
                'trust_rating': '‚≠ê 4.9/5 Â•ΩËØÑ',
                'trust_privacy': 'üîí 100% ÈöêÁßÅÂÆâÂÖ®',
                'trust_free': 'üö´ Êó†ÂπøÂëä„ÄÅÊó†ÈúÄÊ≥®ÂÜå'
            },
            'en': {
                'loading': 'Processing...',
                'backHome': '‚Üê Back to Toolbox',
                'title': 'Audio Cutter',
                'subtitle': 'Online visual audio trimming, supports multiple formats',
                'featuresTitle': '‚ú® Features',
                'feature1Title': '100% Free & Private',
                'feature1Desc': 'No ads, no signup, no watermark. Everything runs locally in your browser. Your data never leaves your device.',
                'feature2Title': 'Multiple Formats',
                'feature2Desc': 'Supports MP3, WAV, M4A, FLAC, AAC and other mainstream formats',
                'feature3Title': 'Keyboard Shortcuts',
                'feature3Desc': 'Space to play/pause, [ ] to set start/end points for quick preview',
                'feature4Title': 'Privacy & Security',
                'feature4Desc': 'Pure frontend processing, audio files are not uploaded to server',
                'uploadText': 'Drag audio here, or click to select file',
                'uploadHint': 'Supports MP3, WAV, M4A, FLAC, AAC formats',
                'uploadBtn': 'Select Audio',
                'duration': 'Duration: 00:00',
                'changeFile': 'Change File',
                'startPoint': 'Start',
                'endPoint': 'End',
                'selectedDuration': 'Selected: 00:00',
                'setStart': 'Set start',
                'setEnd': 'Set end',
                'spaceKey': 'Space',
                'playPauseText': 'Play/Pause',
                'previewClipText': 'Preview clip',
                'selectExportFormat': 'Select Export Format',
                'quality': 'Quality:',
                'quality320': '320 kbps (High Quality)',
                'quality192': '192 kbps (Recommended)',
                'quality96': '96 kbps (Small File)',
                'exportNoteWav': 'WAV format is lossless audio, larger file size, no encoder needed',
                'startCut': '‚úÇ Start Cutting',
                'downloadCut': '‚¨á Download',
                'supportedFormats': 'Supported Formats',
                'mobileWarning': '‚ö†Ô∏è Compatibility issues may exist on mobile device browsers, recommend using desktop browser for editing.',
                'instructions': 'Instructions',
                'instruction1': '<strong>Upload Audio</strong>: Drag file or click select button, also can use Ctrl+V / Command+V to paste',
                'instruction2': '<strong>Select Clip Range</strong>: Drag on waveform to adjust start and end points',
                'instruction3': '<strong>Keyboard Shortcuts</strong>:',
                'instruction3a': '<code>[</code> Set current playback position as start point',
                'instruction3b': '<code>]</code> Set current playback position as end point',
                'instruction3c': '<code>Space</code> Control play/pause',
                'instruction4': '<strong>Select Export Format</strong>: Click format button to select MP3/WAV/OGG/M4A/FLAC/AAC',
                'instruction5': '<strong>Cut and Export</strong>: Click "Start Cutting" button, then download after completion',
                'faqTitle': '‚ùì FAQ',
                'faq1Q': 'What audio formats are supported?',
                'faq1A': 'This tool supports MP3, WAV, M4A, FLAC, AAC, OGG and other mainstream audio formats. You can directly drag or select audio files in these formats for editing, and the tool will automatically recognize and load the audio waveform.',
                'faq2Q': 'What is the maximum audio file size supported?',
                'faq2A': 'The audio file size depends on your browser\'s memory limit, recommended not to exceed 100MB. Larger files may cause slow loading or browser memory issues. For large files, it\'s recommended to split them using other tools first before editing.',
                'faq3Q': 'How to precisely select the clip range?',
                'faq3A': 'You can precisely select the clip range in the following ways: 1) Drag the start and end markers directly on the waveform; 2) Use keyboard shortcuts [ to set the start point and ] to set the end point during playback; 3) Click the preview button to listen to the selected segment. Time precision can reach milliseconds.',
                'faq4Q': 'What format is the clipped audio?',
                'faq4A': 'You can freely choose the export format, supporting MP3, WAV, OGG, M4A, FLAC, AAC six formats. WAV format does not require an encoder, other formats will automatically load the encoder for conversion.',
                'faq5Q': 'Will the audio be uploaded to the server?',
                'faq5A': 'No. All audio processing is done completely in your browser locally, audio files will not be uploaded to any server. This means your audio content is completely private and secure, and you can use this tool even offline (after loading the page first).',
                'faq_free_q': 'Is this tool really free with no ads?',
                'faq_free_a': 'Yes, 100% free with no ads, no registration, no watermark, and no usage limits. All processing happens locally in your browser ‚Äî your data is never uploaded to any server.',
                'relatedTools': 'üîó Related Tools',
                'm3u8Title': 'M3U8 Video Download',
                'm3u8Desc': 'Download M3U8 streaming videos',
                'imageCompressorTitle': 'Image Compressor',
                'imageCompressorDesc': 'Batch compress image files',
                'socialVideoTitle': 'X/TikTok Video Download',
                'socialVideoDesc': 'Download social media videos',
                'metronomeTitle': 'Online Metronome',
                'metronomeDesc': 'Music practice metronome',
                'footerPrivacy': 'Pure frontend processing, audio will not be uploaded to server',
                'footerBack': '‚Üê Back to Web Toolbox Home',
                'trust_users': 'üåç Used by 50,000+ users',
                'trust_rating': '‚≠ê 4.9/5 rating',
                'trust_privacy': 'üîí 100% Private',
                'trust_free': 'üö´ No Ads, No Signup'
            },
            'fr': {
                'loading': 'Traitement...',
                'backHome': '‚Üê Retour √† la bo√Æte √† outils',
                'title': 'D√©coupeur Audio',
                'subtitle': 'D√©coupage audio visuel en ligne, supporte plusieurs formats',
                'featuresTitle': '‚ú® Fonctionnalit√©s',
                'feature1Title': '100% Gratuit et Priv√©',
                'feature1Desc': 'Sans publicit√©, sans inscription, sans filigrane. Tout est trait√© localement dans votre navigateur.',
                'feature2Title': 'Formats multiples',
                'feature2Desc': 'Supporte MP3, WAV, M4A, FLAC, AAC et autres formats populaires',
                'feature3Title': 'Raccourcis clavier',
                'feature3Desc': 'Espace pour lecture/pause, [ ] pour d√©finir les points de d√©but/fin',
                'feature4Title': 'Confidentialit√© et s√©curit√©',
                'feature4Desc': 'Traitement frontend pur, les fichiers audio ne sont pas t√©l√©charg√©s sur le serveur',
                'uploadText': 'Glissez l\'audio ici, ou cliquez pour s√©lectionner un fichier',
                'uploadHint': 'Supporte les formats MP3, WAV, M4A, FLAC, AAC',
                'uploadBtn': 'S√©lectionner Audio',
                'duration': 'Dur√©e: 00:00',
                'changeFile': 'Changer de fichier',
                'startPoint': 'D√©but',
                'endPoint': 'Fin',
                'selectedDuration': 'S√©lectionn√©: 00:00',
                'setStart': 'D√©finir le d√©but',
                'setEnd': 'D√©finir la fin',
                'spaceKey': 'Espace',
                'playPauseText': 'Lecture/Pause',
                'previewClipText': 'Aper√ßu du clip',
                'selectExportFormat': 'S√©lectionner le format d\'export',
                'quality': 'Qualit√©:',
                'quality320': '320 kbps (Haute qualit√©)',
                'quality192': '192 kbps (Recommand√©)',
                'quality96': '96 kbps (Petit fichier)',
                'exportNoteWav': 'Le format WAV est audio sans perte, fichier plus grand, pas d\'encodeur n√©cessaire',
                'startCut': '‚úÇ Commencer la d√©coupe',
                'downloadCut': '‚¨á T√©l√©charger',
                'supportedFormats': 'Formats support√©s',
                'mobileWarning': '‚ö†Ô∏è Des probl√®mes de compatibilit√© peuvent exister sur les navigateurs mobiles, il est recommand√© d\'utiliser un navigateur de bureau pour l\'√©dition.',
                'instructions': 'Instructions',
                'instruction1': '<strong>T√©l√©charger l\'audio</strong>: Glissez le fichier ou cliquez sur le bouton de s√©lection, vous pouvez aussi utiliser Ctrl+V / Command+V pour coller',
                'instruction2': '<strong>S√©lectionner la zone de d√©coupe</strong>: Glissez sur la forme d\'onde pour ajuster les points de d√©but et de fin',
                'instruction3': '<strong>Raccourcis clavier</strong>:',
                'instruction3a': '<code>[</code> D√©finir la position de lecture actuelle comme point de d√©but',
                'instruction3b': '<code>]</code> D√©finir la position de lecture actuelle comme point de fin',
                'instruction3c': '<code>Espace</code> Contr√¥ler lecture/pause',
                'instruction4': '<strong>S√©lectionner le format d\'export</strong>: Cliquez sur le bouton de format pour s√©lectionner MP3/WAV/OGG/M4A/FLAC/AAC',
                'instruction5': '<strong>D√©couper et exporter</strong>: Cliquez sur le bouton "Commencer la d√©coupe", puis t√©l√©chargez apr√®s la fin',
                'faqTitle': '‚ùì FAQ',
                'faq1Q': 'Quels formats audio sont support√©s?',
                'faq1A': 'Cet outil supporte MP3, WAV, M4A, FLAC, AAC, OGG et autres formats audio populaires. Vous pouvez directement glisser ou s√©lectionner des fichiers audio dans ces formats pour l\'√©dition, et l\'outil reconna√Ætra automatiquement et chargera la forme d\'onde audio.',
                'faq2Q': 'Quelle est la taille maximale de fichier audio support√©e?',
                'faq2A': 'La taille du fichier audio d√©pend de la limite de m√©moire de votre navigateur, il est recommand√© de ne pas d√©passer 100MB. Les fichiers plus grands peuvent causer un chargement lent ou des probl√®mes de m√©moire du navigateur. Pour les grands fichiers, il est recommand√© de les diviser d\'abord avec d\'autres outils avant l\'√©dition.',
                'faq3Q': 'Comment s√©lectionner pr√©cis√©ment la zone de d√©coupe?',
                'faq3A': 'Vous pouvez s√©lectionner pr√©cis√©ment la zone de d√©coupe des mani√®res suivantes: 1) Glissez les marqueurs de d√©but et de fin directement sur la forme d\'onde; 2) Utilisez les raccourcis clavier [ pour d√©finir le point de d√©but et ] pour d√©finir le point de fin pendant la lecture; 3) Cliquez sur le bouton d\'aper√ßu pour √©couter le segment s√©lectionn√©. La pr√©cision temporelle peut atteindre les millisecondes.',
                'faq4Q': 'Quel format est l\'audio d√©coup√©?',
                'faq4A': 'Vous pouvez librement choisir le format d\'export, supportant MP3, WAV, OGG, M4A, FLAC, AAC six formats. Le format WAV ne n√©cessite pas d\'encodeur, les autres formats chargeront automatiquement l\'encodeur pour la conversion.',
                'faq5Q': 'L\'audio sera-t-il t√©l√©charg√© sur le serveur?',
                'faq5A': 'Non. Tout le traitement audio est fait compl√®tement dans votre navigateur localement, les fichiers audio ne seront pas t√©l√©charg√©s sur aucun serveur. Cela signifie que votre contenu audio est compl√®tement priv√© et s√©curis√©, et vous pouvez utiliser cet outil m√™me hors ligne (apr√®s avoir charg√© la page d\'abord).',
                'faq_free_q': 'Cet outil est-il vraiment gratuit et sans publicit√© ?',
                'faq_free_a': 'Oui, 100% gratuit, sans publicit√©, sans inscription, sans filigrane et sans limite d\'utilisation. Tout le traitement se fait localement dans votre navigateur ‚Äî vos donn√©es ne sont jamais envoy√©es √† un serveur.',
                'relatedTools': 'üîó Outils connexes',
                'm3u8Title': 'T√©l√©chargement vid√©o M3U8',
                'm3u8Desc': 'T√©l√©charger des vid√©os streaming M3U8',
                'imageCompressorTitle': 'Compresseur d\'images',
                'imageCompressorDesc': 'Compresser des fichiers image par lots',
                'socialVideoTitle': 'T√©l√©chargement vid√©o X/TikTok',
                'socialVideoDesc': 'T√©l√©charger des vid√©os de r√©seaux sociaux',
                'metronomeTitle': 'M√©tronome en ligne',
                'metronomeDesc': 'M√©tronome pour pratique musicale',
                'footerPrivacy': 'Traitement frontend pur, l\'audio ne sera pas t√©l√©charg√© sur le serveur',
                'footerBack': '‚Üê Retour √† l\'accueil Web Toolbox'
            },
            'es': {
                'loading': 'Procesando...',
                'backHome': '‚Üê Volver a la caja de herramientas',
                'title': 'Cortador de Audio',
                'subtitle': 'Recorte de audio visual en l√≠nea, soporta m√∫ltiples formatos',
                'featuresTitle': '‚ú® Caracter√≠sticas',
                'feature1Title': '100% Gratis y Privado',
                'feature1Desc': 'Sin anuncios, sin registro, sin marca de agua. Todo se procesa localmente en tu navegador.',
                'feature2Title': 'M√∫ltiples formatos',
                'feature2Desc': 'Soporta MP3, WAV, M4A, FLAC, AAC y otros formatos populares',
                'feature3Title': 'Atajos de teclado',
                'feature3Desc': 'Espacio para reproducir/pausar, [ ] para establecer puntos de inicio/fin',
                'feature4Title': 'Privacidad y seguridad',
                'feature4Desc': 'Procesamiento frontend puro, los archivos de audio no se suben al servidor',
                'uploadText': 'Arrastra el audio aqu√≠, o haz clic para seleccionar archivo',
                'uploadHint': 'Soporta formatos MP3, WAV, M4A, FLAC, AAC',
                'uploadBtn': 'Seleccionar Audio',
                'duration': 'Duraci√≥n: 00:00',
                'changeFile': 'Cambiar archivo',
                'startPoint': 'Inicio',
                'endPoint': 'Fin',
                'selectedDuration': 'Seleccionado: 00:00',
                'setStart': 'Establecer inicio',
                'setEnd': 'Establecer fin',
                'spaceKey': 'Espacio',
                'playPauseText': 'Reproducir/Pausar',
                'previewClipText': 'Vista previa del clip',
                'selectExportFormat': 'Seleccionar formato de exportaci√≥n',
                'quality': 'Calidad:',
                'quality320': '320 kbps (Alta calidad)',
                'quality192': '192 kbps (Recomendado)',
                'quality96': '96 kbps (Archivo peque√±o)',
                'exportNoteWav': 'El formato WAV es audio sin p√©rdida, archivo m√°s grande, no necesita codificador',
                'startCut': '‚úÇ Empezar a cortar',
                'downloadCut': '‚¨á Descargar',
                'supportedFormats': 'Formatos soportados',
                'mobileWarning': '‚ö†Ô∏è Pueden existir problemas de compatibilidad en navegadores m√≥viles, se recomienda usar un navegador de escritorio para la edici√≥n.',
                'instructions': 'Instrucciones',
                'instruction1': '<strong>Subir audio</strong>: Arrastra el archivo o haz clic en el bot√≥n de selecci√≥n, tambi√©n puedes usar Ctrl+V / Command+V para pegar',
                'instruction2': '<strong>Seleccionar rango de recorte</strong>: Arrastra en la forma de onda para ajustar los puntos de inicio y fin',
                'instruction3': '<strong>Atajos de teclado</strong>:',
                'instruction3a': '<code>[</code> Establecer la posici√≥n de reproducci√≥n actual como punto de inicio',
                'instruction3b': '<code>]</code> Establecer la posici√≥n de reproducci√≥n actual como punto de fin',
                'instruction3c': '<code>Espacio</code> Controlar reproducir/pausar',
                'instruction4': '<strong>Seleccionar formato de exportaci√≥n</strong>: Haz clic en el bot√≥n de formato para seleccionar MP3/WAV/OGG/M4A/FLAC/AAC',
                'instruction5': '<strong>Cortar y exportar</strong>: Haz clic en el bot√≥n "Empezar a cortar", luego descarga despu√©s de completar',
                'faqTitle': '‚ùì Preguntas frecuentes',
                'faq1Q': '¬øQu√© formatos de audio son soportados?',
                'faq1A': 'Esta herramienta soporta MP3, WAV, M4A, FLAC, AAC, OGG y otros formatos de audio populares. Puedes arrastrar directamente o seleccionar archivos de audio en estos formatos para editar, y la herramienta reconocer√° autom√°ticamente y cargar√° la forma de onda de audio.',
                'faq2Q': '¬øCu√°l es el tama√±o m√°ximo de archivo de audio soportado?',
                'faq2A': 'El tama√±o del archivo de audio depende del l√≠mite de memoria de tu navegador, se recomienda no exceder 100MB. Los archivos m√°s grandes pueden causar carga lenta o problemas de memoria del navegador. Para archivos grandes, se recomienda dividirlos primero con otras herramientas antes de editar.',
                'faq3Q': '¬øC√≥mo seleccionar precisamente el rango de recorte?',
                'faq3A': 'Puedes seleccionar precisamente el rango de recorte de las siguientes maneras: 1) Arrastra los marcadores de inicio y fin directamente en la forma de onda; 2) Usa los atajos de teclado [ para establecer el punto de inicio y ] para establecer el punto de fin durante la reproducci√≥n; 3) Haz clic en el bot√≥n de vista previa para escuchar el segmento seleccionado. La precisi√≥n temporal puede alcanzar milisegundos.',
                'faq4Q': '¬øQu√© formato tiene el audio recortado?',
                'faq4A': 'Puedes elegir libremente el formato de exportaci√≥n, soportando MP3, WAV, OGG, M4A, FLAC, AAC seis formatos. El formato WAV no requiere codificador, otros formatos cargar√°n autom√°ticamente el codificador para la conversi√≥n.',
                'faq5Q': '¬øEl audio se subir√° al servidor?',
                'faq5A': 'No. Todo el procesamiento de audio se hace completamente en tu navegador localmente, los archivos de audio no se subir√°n a ning√∫n servidor. Esto significa que tu contenido de audio es completamente privado y seguro, y puedes usar esta herramienta incluso sin conexi√≥n (despu√©s de cargar la p√°gina primero).',
                'faq_free_q': '¬øEs esta herramienta realmente gratuita y sin anuncios?',
                'faq_free_a': 'S√≠, 100% gratuita, sin anuncios, sin registro, sin marca de agua y sin l√≠mites de uso. Todo el procesamiento se realiza localmente en tu navegador ‚Äî tus datos nunca se env√≠an a ning√∫n servidor.',
                'relatedTools': 'üîó Herramientas relacionadas',
                'm3u8Title': 'Descarga de video M3U8',
                'm3u8Desc': 'Descargar videos streaming M3U8',
                'imageCompressorTitle': 'Compresor de im√°genes',
                'imageCompressorDesc': 'Comprimir archivos de imagen por lotes',
                'socialVideoTitle': 'Descarga de video X/TikTok',
                'socialVideoDesc': 'Descargar videos de redes sociales',
                'metronomeTitle': 'Metr√≥nomo en l√≠nea',
                'metronomeDesc': 'Metr√≥nomo para pr√°ctica musical',
                'footerPrivacy': 'Procesamiento frontend puro, el audio no se subir√° al servidor',
                'footerBack': '‚Üê Volver a la p√°gina principal de Web Toolbox'
            }
        };

        const langNames = {
            'en': 'üá∫üá∏ English',
            'zh-CN': 'üá®üá≥ ‰∏≠Êñá',
            'fr': 'üá´üá∑ Fran√ßais',
            'es': 'üá™üá∏ Espa√±ol'
        };

        function detectLanguage() {
            const saved = localStorage.getItem('toolbox_lang');
            if (saved && translations[saved]) return saved;
            const browserLang = navigator.language || navigator.userLanguage;
            if (browserLang.startsWith('zh')) return 'zh-CN';
            if (browserLang.startsWith('fr')) return 'fr';
            if (browserLang.startsWith('es')) return 'es';
            return 'en';
        }

        let currentLang = detectLanguage();

        function applyTranslations(lang) {
            const t = translations[lang] || translations['en'];
            document.documentElement.lang = lang === 'zh-CN' ? 'zh-CN' : lang;

            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (t[key]) el.innerHTML = t[key];
            });

            document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
                const key = el.getAttribute('data-i18n-placeholder');
                if (t[key]) el.placeholder = t[key];
            });

            document.querySelectorAll('[data-i18n-title]').forEach(el => {
                const key = el.getAttribute('data-i18n-title');
                if (t[key]) el.title = t[key];
            });

            const langCurrent = document.getElementById('langCurrent');
            if (langCurrent) langCurrent.textContent = langNames[lang] || langNames['en'];

            // Êõ¥Êñ∞Ê†ºÂºèËØ¥Êòé
            if (typeof getFormatNote === 'function' && typeof selectedFormat !== 'undefined') {
                const exportNoteEl = document.getElementById('exportNote');
                if (exportNoteEl) {
                    exportNoteEl.textContent = getFormatNote(selectedFormat);
                }
            }
        }

        function switchLanguage(lang) {
            currentLang = lang;
            localStorage.setItem('toolbox_lang', lang);
            applyTranslations(lang);
            const dropdown = document.getElementById('langDropdown');
            if (dropdown) dropdown.classList.remove('active');
        }

        document.addEventListener('DOMContentLoaded', function() {
            applyTranslations(currentLang);

            const langCurrent = document.getElementById('langCurrent');
            const langDropdown = document.getElementById('langDropdown');

            if (langCurrent && langDropdown) {
                langCurrent.addEventListener('click', function(e) {
                    e.stopPropagation();
                    langDropdown.classList.toggle('active');
                });

                document.querySelectorAll('.lang-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const lang = this.getAttribute('data-lang');
                        switchLanguage(lang);
                    });
                });

                document.addEventListener('click', function() {
                    langDropdown.classList.remove('active');
                });
            }
        });
    })();
    </script>

    <!-- Áõ∏ÂÖ≥Â∑•ÂÖ∑Êé®Ëçê -->
    <section class="related-tools" style="max-width: 1000px; margin: 40px auto; padding: 0 20px;">
        <h3 style="color: #f0f0f0; font-size: 18px; margin-bottom: 20px; padding-bottom: 10px; border-bottom: 1px solid #333;" data-i18n="relatedTools">üîó Related Tools</h3>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px;">
            <a href="m3u8-downloader.html" style="display: block; padding: 16px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; text-decoration: none; transition: all 0.2s;">
                <div style="font-size: 24px; margin-bottom: 8px;">üé¨</div>
                <div style="color: #f0f0f0; font-weight: 500;" data-i18n="m3u8Title">M3U8 Video Download</div>
                <div style="color: #94a3b8; font-size: 12px; margin-top: 4px;" data-i18n="m3u8Desc">Download M3U8 streaming videos</div>
            </a>
            <a href="image-compressor.html" style="display: block; padding: 16px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; text-decoration: none; transition: all 0.2s;">
                <div style="font-size: 24px; margin-bottom: 8px;">üì¶</div>
                <div style="color: #f0f0f0; font-weight: 500;" data-i18n="imageCompressorTitle">Image Compressor</div>
                <div style="color: #94a3b8; font-size: 12px; margin-top: 4px;" data-i18n="imageCompressorDesc">Batch compress image files</div>
            </a>
            <a href="social-video-downloader.html" style="display: block; padding: 16px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; text-decoration: none; transition: all 0.2s;">
                <div style="font-size: 24px; margin-bottom: 8px;">üì±</div>
                <div style="color: #f0f0f0; font-weight: 500;" data-i18n="socialVideoTitle">X/TikTok Video Download</div>
                <div style="color: #94a3b8; font-size: 12px; margin-top: 4px;" data-i18n="socialVideoDesc">Download social media videos</div>
            </a>
            <a href="metronome.html" style="display: block; padding: 16px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; text-decoration: none; transition: all 0.2s;">
                <div style="font-size: 24px; margin-bottom: 8px;">üéµ</div>
                <div style="color: #f0f0f0; font-weight: 500;" data-i18n="metronomeTitle">Online Metronome</div>
                <div style="color: #94a3b8; font-size: 12px; margin-top: 4px;" data-i18n="metronomeDesc">Music practice metronome</div>
            </a>
        </div>
    </section>

    <footer style="text-align: center; padding: 30px 20px; border-top: 1px solid #333; color: #94a3b8; font-size: 14px;">
        <p data-i18n="footerPrivacy">Pure frontend processing, audio will not be uploaded to server</p>
        <p style="margin-top: 12px;">
            <a href="index.html" style="color: #7c3aed; text-decoration: none;" data-i18n="footerBack">‚Üê Back to Web Toolbox Home</a>
            <span style="margin: 0 12px;">|</span>
            <a href="https://github.com/heyuan110" target="_blank" rel="noopener" style="color: #7c3aed; text-decoration: none;">GitHub</a>
        </p>
    </footer>
</body>
</html>
