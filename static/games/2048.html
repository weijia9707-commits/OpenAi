<!doctype html><html lang="zh-CN"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>2048</title><style>body{margin:0;background:#111827;color:#e5e7eb;font-family:system-ui}.wrap{max-width:520px;margin:20px auto;padding:0 12px}.top{display:flex;justify-content:space-between;align-items:center}a{background:#0ea5e9;color:#fff;border-radius:8px;padding:8px 12px;text-decoration:none}.grid{display:grid;grid-template-columns:repeat(4,1fr);gap:8px;background:#1f2937;padding:8px;border-radius:10px}.cell{height:86px;display:flex;align-items:center;justify-content:center;border-radius:8px;font-size:28px;font-weight:700;background:#374151}.n0{color:transparent}.n2{background:#eee4da;color:#111}.n4{background:#ede0c8;color:#111}.n8{background:#f2b179}.n16{background:#f59563}.n32{background:#f67c5f}.n64{background:#f65e3b}.n128{background:#edcf72}.n256{background:#edcc61}.n512{background:#edc850}.n1024{background:#edc53f}.n2048{background:#edc22e}</style></head><body><div class="wrap"><div class="top"><h2>2048</h2><a href="/games/">返回</a></div><p>分数：<span id="score">0</span>｜最高：<span id="best">0</span></p><div id="g" class="grid"></div><p><button id="up">↑</button> <button id="left">←</button> <button id="down">↓</button> <button id="right">→</button></p></div><script>let b=Array.from({length:4},()=>Array(4).fill(0)),score=0,best=+localStorage.getItem('best_2048')||0;const g=document.getElementById('g');document.getElementById('best').textContent=best;function draw(){g.innerHTML='';for(let r=0;r<4;r++)for(let c=0;c<4;c++){const v=b[r][c],d=document.createElement('div');d.className='cell n'+v;d.textContent=v||0;g.appendChild(d)}document.getElementById('score').textContent=score;if(score>best){best=score;localStorage.setItem('best_2048',best);document.getElementById('best').textContent=best}}function add(){let e=[];for(let r=0;r<4;r++)for(let c=0;c<4;c++)if(!b[r][c])e.push([r,c]);if(!e.length)return;const [r,c]=e[Math.floor(Math.random()*e.length)];b[r][c]=Math.random()<.9?2:4}function slide(arr){arr=arr.filter(v=>v);for(let i=0;i<arr.length-1;i++)if(arr[i]===arr[i+1]){arr[i]*=2;score+=arr[i];arr[i+1]=0;i++}arr=arr.filter(v=>v);while(arr.length<4)arr.push(0);return arr}function move(dir){const old=JSON.stringify(b);if(dir==='L'){for(let r=0;r<4;r++)b[r]=slide(b[r])}if(dir==='R'){for(let r=0;r<4;r++)b[r]=slide([...b[r]].reverse()).reverse()}if(dir==='U'){for(let c=0;c<4;c++){let col=[b[0][c],b[1][c],b[2][c],b[3][c]];col=slide(col);for(let r=0;r<4;r++)b[r][c]=col[r]}}if(dir==='D'){for(let c=0;c<4;c++){let col=[b[0][c],b[1][c],b[2][c],b[3][c]].reverse();col=slide(col).reverse();for(let r=0;r<4;r++)b[r][c]=col[r]}}if(JSON.stringify(b)!==old){add();draw();if(!can())alert('游戏结束，得分：'+score)}}function can(){for(let r=0;r<4;r++)for(let c=0;c<4;c++){if(!b[r][c])return true;if(r<3&&b[r][c]===b[r+1][c])return true;if(c<3&&b[r][c]===b[r][c+1])return true}return false}window.addEventListener('keydown',e=>{if(e.key==='ArrowLeft')move('L');if(e.key==='ArrowRight')move('R');if(e.key==='ArrowUp')move('U');if(e.key==='ArrowDown')move('D')});document.getElementById('up').onclick=()=>move('U');document.getElementById('left').onclick=()=>move('L');document.getElementById('down').onclick=()=>move('D');document.getElementById('right').onclick=()=>move('R');add();add();draw();</script></body></html>