<!doctype html><html lang="zh-CN"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>贪吃蛇</title><link rel="stylesheet" href="/games/common.css"><style>.wrap{max-width:520px;margin:20px auto;padding:0 12px}canvas{background:#020617;border:1px solid #334155;border-radius:8px;display:block;width:100%;max-width:480px;touch-action:none}button,a{background:#0ea5e9;color:#fff;border:0;border-radius:8px;padding:8px 12px;text-decoration:none} .top{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.controls{display:grid;grid-template-columns:repeat(3,56px);gap:8px;justify-content:center;margin:12px 0}.controls button{padding:12px 0;min-height:48px;min-width:56px;font-size:18px}</style></head><body><div class="wrap"><div class="top"><h2>贪吃蛇</h2><a href="/games/">返回</a></div><p>分数：<span id="score">0</span>｜最高：<span id="best">0</span></p><canvas id="c" width="480" height="480"></canvas><div class="controls"><button></button><button data-d="U">↑</button><button></button><button data-d="L">←</button><button data-d="D">↓</button><button data-d="R">→</button></div><p><button id="restart">重新开始</button></p></div><script src="/games/common.js"></script><script>const c=document.getElementById('c'),ctx=c.getContext('2d');const n=24,sz=20,key='best_snake';let snake,dir,food,score,timer,best=GameStore.getBest(key);document.getElementById('best').textContent=best;function setDir(d){if(d==='U'&&dir.y!==1)dir={x:0,y:-1};if(d==='D'&&dir.y!==-1)dir={x:0,y:1};if(d==='L'&&dir.x!==1)dir={x:-1,y:0};if(d==='R'&&dir.x!==-1)dir={x:1,y:0}}function init(){snake=[{x:10,y:10}];dir={x:1,y:0};food={x:5,y:5};score=0;document.getElementById('score').textContent=score;clearInterval(timer);timer=setInterval(step,120)}function rnd(){return Math.floor(Math.random()*n)}function placeFood(){do{food={x:rnd(),y:rnd()}}while(snake.some(s=>s.x===food.x&&s.y===food.y))}function over(){if(score>best){best=score;GameStore.setBest(key,best);document.getElementById('best').textContent=best}alert('游戏结束，得分：'+score);init()}function step(){const h={x:snake[0].x+dir.x,y:snake[0].y+dir.y};if(h.x<0||h.y<0||h.x>=n||h.y>=n||snake.some(s=>s.x===h.x&&s.y===h.y))return over();snake.unshift(h);if(h.x===food.x&&h.y===food.y){score++;document.getElementById('score').textContent=score;placeFood()}else snake.pop();draw()}function draw(){ctx.clearRect(0,0,480,480);ctx.fillStyle='#22c55e';snake.forEach(s=>ctx.fillRect(s.x*sz+1,s.y*sz+1,sz-2,sz-2));ctx.fillStyle='#ef4444';ctx.fillRect(food.x*sz+2,food.y*sz+2,sz-4,sz-4)}window.addEventListener('keydown',e=>{if(e.key==='ArrowUp')setDir('U');if(e.key==='ArrowDown')setDir('D');if(e.key==='ArrowLeft')setDir('L');if(e.key==='ArrowRight')setDir('R')});document.querySelectorAll('[data-d]').forEach(b=>b.onclick=()=>setDir(b.dataset.d));document.getElementById('restart').onclick=init;init();</script></body></html>