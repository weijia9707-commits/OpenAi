<!doctype html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Flappy Bird</title><link rel="stylesheet" href="/games/common.css"><style>.wrap{max-width:520px}.stage{position:relative}.score{margin:8px 0}canvas{width:100%;max-width:480px;height:auto;background:linear-gradient(#7dd3fc,#e0f2fe);border:1px solid #334155;border-radius:10px;touch-action:none}</style></head><body><div class="wrap"><div class="top"><h2>Flappy Bird</h2><a href="/games/">返回</a></div><div class="score">分数：<b id="s">0</b>｜最高：<b id="b">0</b></div><div class="stage"><canvas id="c" width="480" height="640"></canvas></div><p><button id="start">开始/重开</button></p></div><script src="/games/common.js"></script><script>const c=document.getElementById('c'),x=c.getContext('2d');let y=260,v=0,g=0.45,j=-7,pipes=[],t=0,score=0,run=false,best=GameStore.getBest('best_flappy');b.textContent=best;function reset(){y=260;v=0;pipes=[];t=0;score=0;s.textContent=0;run=true}function flap(){if(!run)return;v=j}function addPipe(){const gap=145,top=80+Math.random()*300;pipes.push({x:520,top,gap,passed:false})}function over(){run=false;if(score>best){best=score;GameStore.setBest('best_flappy',best);b.textContent=best}}function loop(){x.clearRect(0,0,480,640);if(run){t++;v+=g;y+=v;if(t%95===0)addPipe();if(y<0||y>620)over();pipes.forEach(p=>{p.x-=2.2;if(!p.passed&&p.x<130){p.passed=true;score++;s.textContent=score}if(110+26>p.x&&110<p.x+62&&(y<p.top||y+26>p.top+p.gap))over();x.fillStyle='#16a34a';x.fillRect(p.x,0,62,p.top);x.fillRect(p.x,p.top+p.gap,62,640)});pipes=pipes.filter(p=>p.x>-80)}x.fillStyle='#f59e0b';x.fillRect(110,y,26,26);requestAnimationFrame(loop)}window.addEventListener('keydown',e=>{if(e.code==='Space'){e.preventDefault();flap()}});c.addEventListener('pointerdown',flap);start.onclick=reset;reset();loop();</script></body></html>